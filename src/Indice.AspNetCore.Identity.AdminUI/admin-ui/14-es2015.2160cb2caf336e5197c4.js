(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{qRw5:function(e,t,s){"use strict";s.r(t),s.d(t,"UsersModule",(function(){return ke}));var i=s("SVse"),r=s("s7LF"),n=s("G0yt"),a=s("hvj1"),o=s("iInd"),l=s("8Y7J"),c=s("onTr"),u=s("fQZA");const b=["usersList"],d=["actionsTemplate"],m=["optionalTemplate"];function p(e,t){if(1&e&&(l.Ub(0,"a",13),l.Ic(1,"Edit"),l.Tb()),2&e){const e=l.ic().value;l.oc("routerLink",e+"/details")}}function h(e,t){1&e&&l.Gc(0,p,2,1,"a",12),2&e&&l.oc("ngIf",t.value)}function g(e,t){if(1&e&&(l.Ub(0,"span"),l.Ic(1),l.Tb()),2&e){const e=l.ic().value;l.Bb(1),l.Jc(e)}}function f(e,t){1&e&&(l.Ub(0,"span"),l.Ic(1," - "),l.Tb())}function v(e,t){if(1&e&&(l.Gc(0,g,2,1,"span",14),l.Gc(1,f,2,0,"span",14)),2&e){const e=t.value;l.oc("ngIf",e),l.Bb(1),l.oc("ngIf",!e)}}let U=(()=>{class e{constructor(e){this.api=e,this.count=0,this.rows=[],this.columns=[]}ngOnInit(){this.columns=[{prop:"userName",name:"Username",draggable:!1,canAutoResize:!0,sortable:!0,resizeable:!0,cellTemplate:this._usersList.usernameTemplate},{prop:"email",name:"Email",draggable:!1,canAutoResize:!0,sortable:!0,resizeable:!0,cellTemplate:this._usersList.emailTemplate},{prop:"lastName",name:"Last Name",draggable:!1,canAutoResize:!0,sortable:!0,resizeable:!0,cellTemplate:this._optionalTemplate},{prop:"firstName",name:"First Name",draggable:!1,canAutoResize:!0,sortable:!0,resizeable:!0,cellTemplate:this._optionalTemplate},{prop:"phoneNumber",name:"Phone Number",draggable:!1,canAutoResize:!0,sortable:!1,resizeable:!0,cellTemplate:this._usersList.phoneNumberTemplate},{prop:"createDate",name:"Create Date",draggable:!1,canAutoResize:!1,sortable:!0,resizeable:!1,cellTemplate:this._usersList.dateTimeTemplate,width:200},{prop:"isAdmin",name:"Admin",draggable:!1,canAutoResize:!1,sortable:!0,resizeable:!1,cellTemplate:this._usersList.booleanTemplate,width:80},{prop:"id",name:"Actions",draggable:!1,canAutoResize:!1,sortable:!1,resizeable:!1,cellTemplate:this._actionsTemplate,cellClass:"d-flex align-items-center",width:100}]}getUsers(e){this.api.getUsers(void 0,void 0,e.page,e.pageSize,e.sortField,e.searchTerm).subscribe(e=>{this.count=e.count,this.rows=e.items})}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(c.n))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-users"]],viewQuery:function(e,t){var s;1&e&&(l.Ec(b,!0),l.Ec(d,!0),l.Ec(m,!0)),2&e&&(l.wc(s=l.hc())&&(t._usersList=s.first),l.wc(s=l.hc())&&(t._actionsTemplate=s.first),l.wc(s=l.hc())&&(t._optionalTemplate=s.first))},decls:17,vars:9,consts:[[1,"row"],[1,"col-sm-12"],[1,"page-title-box"],[1,"row","align-items-center"],[1,"col-md-8"],[1,"page-title","m-0"],[1,"text-muted","font-14"],[1,"col-12"],[3,"clientSide","columns","rows","count","rowsPerPage","defaultSortField","defaultSortDirection","canFilter","search"],["usersList",""],["actionsTemplate",""],["optionalTemplate",""],["class","btn btn-success","href","#","role","button",3,"routerLink",4,"ngIf"],["href","#","role","button",1,"btn","btn-success",3,"routerLink"],[4,"ngIf"]],template:function(e,t){1&e&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"div",2),l.Ub(3,"div",3),l.Ub(4,"div",4),l.Ub(5,"h4",5),l.Ic(6),l.Tb(),l.Ub(7,"p",6),l.Ic(8," Get a list of all system users. "),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(9,"div",0),l.Ub(10,"div",7),l.Ub(11,"app-list-view",8,9),l.gc("search",(function(e){return t.getUsers(e)})),l.Tb(),l.Tb(),l.Tb(),l.Gc(13,h,1,1,"ng-template",null,10,l.Hc),l.Gc(15,v,2,2,"ng-template",null,11,l.Hc)),2&e&&(l.Bb(6),l.Kc("Users List (",t.count,")"),l.Bb(5),l.oc("clientSide",!1)("columns",t.columns)("rows",t.rows)("count",t.count)("rowsPerPage",15)("defaultSortField","lastName")("defaultSortDirection","Asc")("canFilter",!0))},directives:[u.a,i.m,o.g],encapsulation:2}),e})();var T=s("1uCz"),w=s("1+MP");const _=["validationSummary"];function y(e,t){1&e&&(l.Ub(0,"div",30),l.Ic(1," Field 'Username' is required. "),l.Tb())}function C(e,t){1&e&&(l.Ub(0,"div",30),l.Ic(1," Field 'Email' is required. "),l.Tb())}function I(e,t){1&e&&(l.Ub(0,"div",30),l.Ic(1," Please enter a valid email address. "),l.Tb())}function S(e,t){1&e&&(l.Ub(0,"div",30),l.Ic(1," Field 'Password' is required. "),l.Tb())}const x=function(e){return{"was-validated":e}},M=function(e){return{invalid:e}};let k=(()=>{class e{constructor(e,t,s,i){this._api=e,this._route=t,this._router=s,this._toast=i,this._saveAndConfigure=!1,this.user=new c.l}setSaveAndConfigure(e){this._saveAndConfigure=e}save(){this._validationSummary.clear(),this._api.createUser(this.user).subscribe(e=>{this._toast.showSuccess(`User '${e.email}' was created successfully.`),this._saveAndConfigure?this._router.navigateByUrl(`/app/users/${e.id}/details`):this._router.navigate(["../"],{relativeTo:this._route})},e=>{this.problemDetails=e})}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(c.n),l.Ob(o.a),l.Ob(o.d),l.Ob(T.a))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-user-add"]],viewQuery:function(e,t){var s;1&e&&l.Nc(_,!0),2&e&&l.wc(s=l.hc())&&(t._validationSummary=s.first)},decls:52,vars:28,consts:[[1,"row"],[1,"col-12"],[1,"card","m-b-30","m-t-30"],[1,"card-body"],[1,"mt-0","header-title"],[1,"text-muted","m-b-30","font-14"],["novalidate","",1,"needs-validation",3,"ngClass","ngSubmit"],["form","ngForm"],[3,"problemDetails"],["validationSummary",""],[1,"form-group","row"],["for","first-name",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["id","first-name","name","first-name","type","text","maxlength","256",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["firstName","ngModel"],["for","last-name",1,"col-sm-2","col-form-label"],["id","last-name","name","last-name","type","text","maxlength","256",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["lastName","ngModel"],["for","userName",1,"col-sm-2","col-form-label"],["id","userName","name","userName","type","text","required","","maxlength","256",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["userName","ngModel"],["class","form-control-feedback text-danger",4,"ngIf"],["for","email",1,"col-sm-2","col-form-label"],["id","email","name","email","type","email","email","","required","","maxlength","256",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["email","ngModel"],["for","password",1,"col-sm-2","col-form-label"],["id","password","name","password","type","password","required","",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["password","ngModel"],[1,"form-group"],["type","submit",1,"btn","btn-primary","waves-effect","waves-light","m-r-5",3,"click"],[1,"form-control-feedback","text-danger"]],template:function(e,t){if(1&e){const e=l.Vb();l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"div",2),l.Ub(3,"div",3),l.Ub(4,"h4",4),l.Ic(5,"Add User"),l.Tb(),l.Ub(6,"p",5),l.Ic(7," Create a new user. "),l.Tb(),l.Ub(8,"form",6,7),l.gc("ngSubmit",(function(){return l.zc(e),l.xc(9).form.valid&&t.save()})),l.Pb(10,"app-validation-summary",8,9),l.Ub(12,"div",10),l.Ub(13,"label",11),l.Ic(14," First Name "),l.Tb(),l.Ub(15,"div",12),l.Ub(16,"input",13,14),l.gc("ngModelChange",(function(e){return t.user.firstName=e})),l.Tb(),l.Tb(),l.Tb(),l.Ub(18,"div",10),l.Ub(19,"label",15),l.Ic(20," Last Name "),l.Tb(),l.Ub(21,"div",12),l.Ub(22,"input",16,17),l.gc("ngModelChange",(function(e){return t.user.lastName=e})),l.Tb(),l.Tb(),l.Tb(),l.Ub(24,"div",10),l.Ub(25,"label",18),l.Ic(26," Username (*) "),l.Tb(),l.Ub(27,"div",12),l.Ub(28,"input",19,20),l.gc("ngModelChange",(function(e){return t.user.userName=e})),l.Tb(),l.Gc(30,y,2,0,"div",21),l.Tb(),l.Tb(),l.Ub(31,"div",10),l.Ub(32,"label",22),l.Ic(33," Email (*) "),l.Tb(),l.Ub(34,"div",12),l.Ub(35,"input",23,24),l.gc("ngModelChange",(function(e){return t.user.email=e})),l.Tb(),l.Gc(37,C,2,0,"div",21),l.Gc(38,I,2,0,"div",21),l.Tb(),l.Tb(),l.Ub(39,"div",10),l.Ub(40,"label",25),l.Ic(41," Password (*) "),l.Tb(),l.Ub(42,"div",12),l.Ub(43,"input",26,27),l.gc("ngModelChange",(function(e){return t.user.password=e})),l.Tb(),l.Gc(45,S,2,0,"div",21),l.Tb(),l.Tb(),l.Ub(46,"div",28),l.Ub(47,"div"),l.Ub(48,"button",29),l.gc("click",(function(){return t.setSaveAndConfigure(!0)})),l.Ic(49," Save & Configure "),l.Tb(),l.Ub(50,"button",29),l.gc("click",(function(){return t.setSaveAndConfigure(!1)})),l.Ic(51," Save "),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()}if(2&e){const e=l.xc(9),s=l.xc(17),i=l.xc(23),r=l.xc(29),n=l.xc(36),a=l.xc(44);l.Bb(8),l.oc("ngClass",l.sc(16,x,e.submitted)),l.Bb(2),l.oc("problemDetails",t.problemDetails),l.Bb(6),l.oc("ngClass",l.sc(18,M,e.submitted&&s.invalid))("ngModel",t.user.firstName),l.Bb(6),l.oc("ngClass",l.sc(20,M,e.submitted&&i.invalid))("ngModel",t.user.lastName),l.Bb(6),l.oc("ngClass",l.sc(22,M,e.submitted&&r.invalid))("ngModel",t.user.userName),l.Bb(2),l.oc("ngIf",e.submitted&&r.invalid),l.Bb(5),l.oc("ngClass",l.sc(24,M,e.submitted&&n.invalid))("ngModel",t.user.email),l.Bb(2),l.oc("ngIf",e.submitted&&n.invalid&&n.errors.required),l.Bb(1),l.oc("ngIf",e.submitted&&n.invalid&&n.errors.email),l.Bb(5),l.oc("ngClass",l.sc(26,M,e.submitted&&a.invalid))("ngModel",t.user.password),l.Bb(2),l.oc("ngIf",e.submitted&&a.invalid)}},directives:[r.y,r.n,r.o,i.k,w.a,r.b,r.j,r.m,r.p,r.u,i.m,r.c],encapsulation:2}),e})();var P=s("NHP+"),B=s("lJxs");let A=(()=>{class e{constructor(e){this._api=e}getUser(e){return this._user||(this._user=new P.a,this._api.getUser(e).subscribe(e=>{this._user.next(e),this._user.complete()})),this._user}updateUser(e,t){const s=t?t.map(e=>({type:e.name,value:e.value})):null;return this._api.updateUser(e.id,{email:e.email,phoneNumber:e.phoneNumber,twoFactorEnabled:e.twoFactorEnabled,userName:e.userName,passwordExpirationPolicy:e.passwordExpirationPolicy,isAdmin:e.isAdmin,emailConfirmed:e.emailConfirmed,phoneNumberConfirmed:e.phoneNumberConfirmed,claims:s}).pipe(Object(B.a)(t=>{e.claims=[...t.claims],this._user.next(e),this._user.complete()}))}deleteUser(e){return this._api.deleteUser(e)}blockUser(e){return this.getUser(e).subscribe(e=>{e.blocked=!0,this._user.next(e),this._user.complete()}),this._api.setUserBlock(e,{blocked:!0})}unblockUser(e){return this.getUser(e).subscribe(e=>{e.blocked=!1,this._user.next(e),this._user.complete()}),this._api.setUserBlock(e,{blocked:!1})}unlockUser(e){return this.getUser(e).subscribe(e=>{e.lockoutEnd=null,e.accessFailedCount=0,this._user.next(e),this._user.complete()}),this._api.unlockUser(e)}resetPassword(e,t,s){return this.getUser(e).subscribe(e=>{this._user.next(e),this._user.complete()}),this._api.setPassword(e,{password:t,changePasswordAfterFirstSignIn:s})}addUserRole(e,t){return this.getUser(e).subscribe(e=>{e.roles.push(t.name),this._user.next(e),this._user.complete()}),this._api.addUserRole(e,t.id)}deleteUserRole(e,t){return this.getUser(e).subscribe(e=>{const s=e.roles.indexOf(t.name,0);s>-1&&e.roles.splice(s,1),this._user.next(e),this._user.complete()}),this._api.deleteUserRole(e,t.id)}addClaim(e,t){return this._api.addUserClaim(e,{type:t.type,value:t.value}).pipe(Object(B.a)(t=>{this.getUser(e).subscribe(e=>{e.claims.push(t),this._user.next(e),this._user.complete()})}))}updateUserClaim(e,t,s){return this._api.updateUserClaim(e,t,{claimValue:s}).pipe(Object(B.a)(i=>{this.getUser(e).subscribe(e=>{e.claims.find(e=>e.id===t).value=s,this._user.next(e),this._user.complete()})}))}deleteUserClaim(e,t){return this._api.deleteUserClaim(e,t).pipe(Object(B.a)(s=>{this.getUser(e).subscribe(e=>{const s=e.claims.find(e=>e.id===t),i=e.claims.indexOf(s,0);i>-1&&e.claims.splice(i,1),this._user.next(e),this._user.complete()})}))}getUserApplications(e){return this._userApplications||(this._userApplications=new P.a,this._api.getUserApplications(e).subscribe(e=>{this._userApplications.next(e.items),this._userApplications.complete()})),this._userApplications}getAllRoles(){return this._allRoles||(this._allRoles=new P.a,this._api.getRoles(1,2147483647,"name+",void 0).subscribe(e=>{this._allRoles.next(e.items),this._allRoles.complete()})),this._allRoles}getAllClaims(){return this._allClaims||(this._allClaims=new P.a,this._api.getClaimTypes(void 0,1,2147483647,"name+",void 0).subscribe(e=>{this._allClaims.next(e.items),this._allClaims.complete()})),this._allClaims}}return e.\u0275fac=function(t){return new(t||e)(l.cc(c.n))},e.\u0275prov=l.Kb({token:e,factory:e.\u0275fac}),e})();var N=s("OsF4");const O=function(){return["details"]},R=function(){return["roles"]},z=function(){return["additional-details"]},D=function(){return["applications"]};let F=(()=>{class e{constructor(e,t){this.route=e,this.logger=t,this.userId=""}ngOnInit(){this.logger.log("UserEditComponent ngOnInit was called."),this.userId=this.route.snapshot.params.id}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(o.a),l.Ob(N.a))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-user-edit"]],features:[l.Ab([A])],decls:24,vars:9,consts:[[1,"row"],[1,"col-12"],[1,"card","m-b-30","m-t-30"],[1,"card-body"],[1,"mt-0","header-title"],[1,"text-muted","m-b-30","font-14"],["role","tablist",1,"nav","nav-tabs","justify-content-start"],[1,"nav-item"],["routerLinkActive","active","role","tab","id","user-details-tab",1,"nav-link",3,"routerLink"],["routerLinkActive","active","role","tab","id","user-roles-tab",1,"nav-link",3,"routerLink"],["routerLinkActive","active","role","tab","id","user-additional-details-tab",1,"nav-link",3,"routerLink"],["routerLinkActive","active","role","tab","id","user-applications-tab",1,"nav-link",3,"routerLink"],[1,"tab-content"],["role","tabpanel",1,"tab-pane","active"]],template:function(e,t){1&e&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"div",2),l.Ub(3,"div",3),l.Ub(4,"h4",4),l.Ic(5),l.Tb(),l.Ub(6,"p",5),l.Ic(7," Here you can modify some properties of a system user. "),l.Tb(),l.Ub(8,"ul",6),l.Ub(9,"li",7),l.Ub(10,"a",8),l.Ic(11," Details "),l.Tb(),l.Tb(),l.Ub(12,"li",7),l.Ub(13,"a",9),l.Ic(14," Roles "),l.Tb(),l.Tb(),l.Ub(15,"li",7),l.Ub(16,"a",10),l.Ic(17," Additional Details "),l.Tb(),l.Tb(),l.Ub(18,"li",7),l.Ub(19,"a",11),l.Ic(20," Applications "),l.Tb(),l.Tb(),l.Tb(),l.Ub(21,"div",12),l.Ub(22,"div",13),l.Pb(23,"router-outlet"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&e&&(l.Bb(5),l.Kc("Edit User - ",t.userId,""),l.Bb(5),l.oc("routerLink",l.rc(5,O)),l.Bb(3),l.oc("routerLink",l.rc(6,R)),l.Bb(3),l.oc("routerLink",l.rc(7,z)),l.Bb(3),l.oc("routerLink",l.rc(8,D)))},directives:[o.g,o.f,o.i],encapsulation:2}),e})();var E=s("cp0P"),L=s("m7xY"),q=s("7dP1");function G(e,t){if(1&e){const e=l.Vb();l.Ub(0,"input",4),l.gc("ngModelChange",(function(t){return l.zc(e),l.ic().value=t}))("ngModelChange",(function(){return l.zc(e),l.ic().updateChanges()})),l.Tb()}if(2&e){const e=l.ic();l.oc("id",e.id)("name",e.name)("ngModel",e.value)("placeholder",e.placeholder||"")}}function j(e,t){if(1&e){const e=l.Vb();l.Ub(0,"select",5),l.gc("ngModelChange",(function(t){return l.zc(e),l.ic().value=t}))("ngModelChange",(function(){return l.zc(e),l.ic().updateChanges()})),l.Ub(1,"option",6),l.Ic(2,"Please select a suitable value"),l.Tb(),l.Ub(3,"option",7),l.Ic(4,"Yes"),l.Tb(),l.Ub(5,"option",8),l.Ic(6,"No"),l.Tb(),l.Tb()}if(2&e){const e=l.ic();l.oc("id",e.id)("name",e.name)("ngModel",e.value)}}function V(e,t){if(1&e){const e=l.Vb();l.Ub(0,"input",9),l.gc("ngModelChange",(function(t){return l.zc(e),l.ic().value=t}))("ngModelChange",(function(){return l.zc(e),l.ic().updateChanges()})),l.Tb()}if(2&e){const e=l.ic();l.oc("id",e.id)("ngModel",e.value)("placeholder",e.placeholder||"")}}function $(e,t){if(1&e){const e=l.Vb();l.Ub(0,"input",10,11),l.gc("ngModelChange",(function(t){return l.zc(e),l.ic().value=t}))("ngModelChange",(function(){return l.zc(e),l.ic().updateChanges()}))("focus",(function(){return l.zc(e),l.xc(1).toggle()})),l.Tb()}if(2&e){const e=l.ic();l.oc("id",e.id)("name",e.name)("placeholder",e.placeholder||"mm-dd-yyyy")("ngModel",e.value)}}let K=(()=>{class e{constructor(){this.onChange=e=>{},this.onTouched=()=>{}}updateChanges(){this.onChange(this.value)}writeValue(e){this.value=e,this.updateChanges()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Ib({type:e,selectors:[["app-dynamic-input"]],inputs:{id:"id",name:"name",modelType:"modelType",placeholder:"placeholder"},features:[l.Ab([{provide:r.l,useExisting:Object(l.T)(()=>e),multi:!0}])],decls:4,vars:4,consts:[["class","form-control","type","text","required","",3,"id","name","ngModel","placeholder","ngModelChange",4,"ngIf"],["class","form-control custom-select","required","",3,"id","name","ngModel","ngModelChange",4,"ngIf"],["class","form-control","type","number","required","",3,"id","ngModel","placeholder","ngModelChange",4,"ngIf"],["class","form-control","ngbDatepicker","","required","",3,"id","name","placeholder","ngModel","ngModelChange","focus",4,"ngIf"],["type","text","required","",1,"form-control",3,"id","name","ngModel","placeholder","ngModelChange"],["required","",1,"form-control","custom-select",3,"id","name","ngModel","ngModelChange"],["value","","disabled",""],["value","true"],["value","false"],["type","number","required","",1,"form-control",3,"id","ngModel","placeholder","ngModelChange"],["ngbDatepicker","","required","",1,"form-control",3,"id","name","placeholder","ngModel","ngModelChange","focus"],["datePicker","ngbDatepicker"]],template:function(e,t){1&e&&(l.Gc(0,G,1,4,"input",0),l.Gc(1,j,7,3,"select",1),l.Gc(2,V,1,3,"input",2),l.Gc(3,$,2,4,"input",3)),2&e&&(l.oc("ngIf","String"===t.modelType||void 0===t.modelType),l.Bb(1),l.oc("ngIf","Boolean"===t.modelType),l.Bb(1),l.oc("ngIf","Int"===t.modelType),l.Bb(1),l.oc("ngIf","DateTime"===t.modelType))},directives:[i.m,r.b,r.u,r.m,r.p,r.v,r.q,r.x,r.r,n.h],encapsulation:2}),e})();function J(e,t){1&e&&(l.Ub(0,"div",28),l.Ic(1," Field 'Password' is required. "),l.Tb())}const H=function(e){return{"was-validated":e}};function Q(e,t){if(1&e){const e=l.Vb();l.Ub(0,"form",14,15),l.gc("ngSubmit",(function(){l.zc(e);const t=l.xc(1),s=l.ic(2);return t.form.valid&&s.resetPassword()})),l.Pb(2,"app-validation-summary",16,17),l.Ub(4,"div",18),l.Ub(5,"label",19),l.Ic(6,"Password (*)"),l.Tb(),l.Ub(7,"input",20,21),l.gc("ngModelChange",(function(t){return l.zc(e),l.ic(2).newPassword=t})),l.Tb(),l.Gc(9,J,2,0,"div",22),l.Tb(),l.Ub(10,"div",18),l.Ub(11,"div",23),l.Ub(12,"input",24,25),l.gc("ngModelChange",(function(t){return l.zc(e),l.ic(2).changePasswordAfterFirstSignIn=t})),l.Tb(),l.Ub(14,"label",26),l.Ic(15," Require this user to change their password when they first sign in "),l.Tb(),l.Tb(),l.Tb(),l.Ub(16,"button",27),l.Ic(17," Reset "),l.Tb(),l.Tb()}if(2&e){const e=l.xc(1),t=l.xc(8),s=l.ic(2);l.oc("ngClass",l.sc(5,H,e.submitted)),l.Bb(2),l.oc("problemDetails",s.problemDetails),l.Bb(5),l.oc("ngModel",s.newPassword),l.Bb(2),l.oc("ngIf",e.submitted&&t.invalid),l.Bb(3),l.oc("ngModel",s.changePasswordAfterFirstSignIn)}}function Y(e,t){if(1&e&&(l.Ub(0,"div",9),l.Ub(1,"h4",10),l.Ic(2," Reset Password "),l.Tb(),l.Ub(3,"button",11),l.gc("click",(function(){return t.$implicit.dismiss()})),l.Ub(4,"span",12),l.Ic(5,"\xd7"),l.Tb(),l.Tb(),l.Tb(),l.Ub(6,"div",13),l.Gc(7,Q,18,7,"form",8),l.Tb()),2&e){const e=l.ic();l.Bb(7),l.oc("ngIf",e.user)}}function Z(e,t){1&e&&(l.Ub(0,"p"),l.Ic(1,"Loading user data..."),l.Tb())}function W(e,t){if(1&e){const e=l.Vb();l.Ub(0,"div",68),l.Ub(1,"b",69),l.Ic(2),l.jc(3,"date"),l.Tb(),l.Ub(4,"button",70),l.gc("click",(function(){return l.zc(e),l.ic(2),l.xc(3).fire()})),l.Ic(5," Unlock "),l.Tb(),l.Tb()}if(2&e){const e=l.ic(2);l.Bb(2),l.Lc(" User is locked until ",l.lc(3,2,e.user.lockoutEnd,"medium")," after ",e.user.accessFailedCount," failed logins. ")}}function X(e,t){1&e&&(l.Ub(0,"div",28),l.Ic(1," Field 'Username' is required. "),l.Tb())}function ee(e,t){1&e&&(l.Ub(0,"div",28),l.Ic(1," Field 'Email' is required. "),l.Tb())}function te(e,t){1&e&&(l.Ub(0,"div",28),l.Ic(1," Please enter a valid email address. "),l.Tb())}function se(e,t){if(1&e&&(l.Ub(0,"div",28),l.Ic(1),l.Tb()),2&e){const e=l.ic().$implicit;l.Bb(1),l.Kc(" Field '",e.displayName||e.name,"' is required. ")}}function ie(e,t){1&e&&(l.Ub(0,"div",28),l.Ic(1," Pattern not correct. "),l.Tb())}function re(e,t){if(1&e){const e=l.Vb();l.Ub(0,"div",31),l.Ub(1,"label",71),l.Ic(2),l.Tb(),l.Ub(3,"div",33),l.Ub(4,"app-dynamic-input",72,73),l.gc("ngModelChange",(function(s){l.zc(e);const i=t.index;return l.ic(2).requiredClaims[i].value=s})),l.Tb(),l.Gc(6,se,2,1,"div",22),l.Gc(7,ie,2,0,"div",22),l.Tb(),l.Tb()}if(2&e){const e=t.$implicit,s=t.index,i=l.xc(5);l.ic();const r=l.xc(1),n=l.ic();l.Bb(1),l.oc("for","user-"+e.name),l.Bb(1),l.Kc("",e.displayName||e.name," (*)"),l.Bb(2),l.oc("id","user-"+e.name)("name","user-"+e.name)("pattern",e.rule)("ngModel",n.requiredClaims[s].value)("modelType",e.valueType),l.Bb(2),l.oc("ngIf",r.submitted&&i.invalid&&i.errors.required),l.Bb(1),l.oc("ngIf",r.submitted&&i.invalid&&i.errors.pattern)}}function ne(e,t){if(1&e){const e=l.Vb();l.Ub(0,"form",14,29),l.gc("ngSubmit",(function(){l.zc(e);const t=l.xc(1),s=l.ic();return t.form.valid&&s.update()})),l.Gc(2,W,6,5,"div",30),l.Ub(3,"div",31),l.Ub(4,"label",32),l.Ic(5," Username (*) "),l.Tb(),l.Ub(6,"div",33),l.Ub(7,"input",34,35),l.gc("ngModelChange",(function(t){return l.zc(e),l.ic().user.userName=t})),l.Tb(),l.Gc(9,X,2,0,"div",22),l.Tb(),l.Tb(),l.Ub(10,"div",31),l.Ub(11,"label",36),l.Ic(12," Email (*) "),l.Tb(),l.Ub(13,"div",33),l.Ub(14,"input",37,38),l.gc("ngModelChange",(function(t){return l.zc(e),l.ic().user.email=t})),l.Tb(),l.Gc(16,ee,2,0,"div",22),l.Gc(17,te,2,0,"div",22),l.Tb(),l.Tb(),l.Ub(18,"div",31),l.Ub(19,"label",39),l.Ic(20," Email Confirmed "),l.Tb(),l.Ub(21,"div",33),l.Ub(22,"div",23),l.Ub(23,"input",40,41),l.gc("ngModelChange",(function(t){return l.zc(e),l.ic().user.emailConfirmed=t})),l.Tb(),l.Pb(25,"label",42),l.Tb(),l.Tb(),l.Tb(),l.Ub(26,"div",31),l.Ub(27,"label",43),l.Ic(28," Create Date "),l.Tb(),l.Ub(29,"div",44),l.Ub(30,"span",45),l.Ic(31),l.jc(32,"date"),l.Tb(),l.Tb(),l.Tb(),l.Ub(33,"div",31),l.Ub(34,"label",46),l.Ic(35," Phone Number "),l.Tb(),l.Ub(36,"div",33),l.Ub(37,"input",47),l.gc("ngModelChange",(function(t){return l.zc(e),l.ic().user.phoneNumber=t})),l.Tb(),l.Tb(),l.Tb(),l.Ub(38,"div",31),l.Ub(39,"label",48),l.Ic(40," Phone Number Confirmed "),l.Tb(),l.Ub(41,"div",33),l.Ub(42,"div",23),l.Ub(43,"input",49,50),l.gc("ngModelChange",(function(t){return l.zc(e),l.ic().user.phoneNumberConfirmed=t})),l.Tb(),l.Pb(45,"label",51),l.Tb(),l.Tb(),l.Tb(),l.Ub(46,"div",31),l.Ub(47,"label",52),l.Ic(48," Password Expires "),l.Tb(),l.Ub(49,"div",33),l.Ub(50,"select",53,54),l.gc("ngModelChange",(function(t){return l.zc(e),l.ic().userPasswordExpirationPolicy=t})),l.Ub(52,"option",55),l.Ic(53,"Please select a password expiration policy"),l.Tb(),l.Ub(54,"option",56),l.Ic(55,"Never"),l.Tb(),l.Ub(56,"option",57),l.Ic(57,"In next login"),l.Tb(),l.Ub(58,"option",58),l.Ic(59,"Monthly"),l.Tb(),l.Ub(60,"option",59),l.Ic(61,"Quarterly"),l.Tb(),l.Ub(62,"option",60),l.Ic(63,"Semesterly"),l.Tb(),l.Ub(64,"option",61),l.Ic(65,"Annually"),l.Tb(),l.Ub(66,"option",62),l.Ic(67,"Biannually"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Gc(68,re,8,9,"div",63),l.Ub(69,"div",18),l.Ub(70,"div"),l.Ub(71,"button",64),l.Ub(72,"i",65),l.Ic(73,"save"),l.Tb(),l.Ic(74," Save Changes "),l.Tb(),l.Ub(75,"button",66),l.gc("click",(function(){return l.zc(e),l.ic(),l.xc(1).fire()})),l.Ub(76,"i",65),l.Ic(77,"delete"),l.Tb(),l.Ic(78," Delete "),l.Tb(),l.Ub(79,"button",67),l.gc("click",(function(){return l.zc(e),l.ic(),l.xc(5).fire()})),l.Ub(80,"i",65),l.Ic(81),l.Tb(),l.Ic(82),l.Tb(),l.Ub(83,"button",67),l.gc("click",(function(){l.zc(e);const t=l.ic(),s=l.xc(7);return t.showResetPassword(s)})),l.Ub(84,"i",65),l.Ic(85,"vpn_key"),l.Tb(),l.Ic(86," Reset Password "),l.Tb(),l.Tb(),l.Tb(),l.Tb()}if(2&e){const e=l.xc(1),t=l.xc(8),s=l.xc(15),i=l.ic();l.oc("ngClass",l.sc(21,H,e.submitted)),l.Bb(2),l.oc("ngIf",i.user.accessFailedCount>0&&i.user.lockoutEnd),l.Bb(5),l.oc("ngModel",i.user.userName),l.Bb(2),l.oc("ngIf",e.submitted&&t.invalid),l.Bb(5),l.oc("ngModel",i.user.email),l.Bb(2),l.oc("ngIf",e.submitted&&s.invalid&&s.errors.required),l.Bb(1),l.oc("ngIf",e.submitted&&s.invalid&&s.errors.email),l.Bb(6),l.oc("ngModel",i.user.emailConfirmed),l.Bb(8),l.Kc(" ",l.lc(32,18,i.user.createDate,"medium")," "),l.Bb(6),l.oc("ngModel",i.user.phoneNumber),l.Bb(6),l.oc("ngModel",i.user.phoneNumberConfirmed),l.Bb(7),l.oc("ngModel",i.userPasswordExpirationPolicy),l.Bb(18),l.oc("ngForOf",i.requiredClaims),l.Bb(7),l.oc("disabled",i.currentUserId===i.user.id),l.Bb(4),l.oc("disabled",i.currentUserId===i.user.id),l.Bb(2),l.Jc(i.user.blocked?"lock_open":"lock"),l.Bb(1),l.Kc(" ",i.user.blocked?"Unblock":"Block"," "),l.Bb(1),l.oc("disabled",i.currentUserId===i.user.id)}}let ae=(()=>{class e{constructor(e,t,s,i,r,n,a,o){this._route=e,this._userStore=t,this._dateParser=s,this._toast=i,this._router=r,this._authService=n,this._modalService=a,this.swalTargets=o,this.userPasswordExpirationPolicy="",this.newPassword="",this.changePasswordAfterFirstSignIn=!1}ngOnInit(){this.currentUserId=this._authService.getSubjectId();const e=this._userStore.getUser(this._route.parent.snapshot.params.id),t=this._userStore.getAllClaims();this._getDataSubscription=Object(E.a)([e,t]).pipe(Object(B.a)(e=>({user:e[0],claims:e[1]}))).subscribe(e=>{this.user=e.user,this.userPasswordExpirationPolicy=this.user.passwordExpirationPolicy?this.user.passwordExpirationPolicy:"";const t=e.claims.filter(e=>!0===e.required);t.forEach(e=>{const t=this.user.claims.find(t=>t.type===e.name);t&&(e.value=e.valueType===c.x.DateTime?this._dateParser.parse(t.value):t.value)}),this.requiredClaims=t})}ngOnDestroy(){this._getDataSubscription&&this._getDataSubscription.unsubscribe(),this._updateUserSubscription&&this._updateUserSubscription.unsubscribe(),this._routeDataSubscription&&this._routeDataSubscription.unsubscribe()}delete(){this._userStore.deleteUser(this.user.id).subscribe(e=>{this._toast.showSuccess(`User '${this.user.userName}' was deleted successfully.`),this._router.navigate(["../../"],{relativeTo:this._route})})}unlock(){this._userStore.unlockUser(this.user.id).subscribe(e=>{this._toast.showSuccess(`User '${this.user.userName}' was unlocked.`)})}toggleBlock(){this.user.blocked?this._userStore.unblockUser(this.user.id).subscribe(e=>{this._toast.showSuccess(`User '${this.user.userName}' was unblocked.`)}):this._userStore.blockUser(this.user.id).subscribe(e=>{this._toast.showSuccess(`User '${this.user.userName}' was blocked.`)})}showResetPassword(e){this._modalService.open(e)}resetPassword(){this._userStore.resetPassword(this.user.id,this.newPassword,this.changePasswordAfterFirstSignIn).subscribe(e=>{this.userPasswordExpirationPolicy=this.user.passwordExpirationPolicy?this.user.passwordExpirationPolicy:"",this._toast.showSuccess(`Password for user '${this.user.userName}' was reset successfully.`)},e=>{this.problemDetails=e})}update(){const e=this.requiredClaims.map(e=>Object.assign({},e));e.forEach(e=>{e.valueType===c.x.DateTime&&(e.value=this._dateParser.format(e.value))}),this.user.passwordExpirationPolicy=""===this.userPasswordExpirationPolicy?void 0:this.userPasswordExpirationPolicy,this._updateUserSubscription=this._userStore.updateUser(this.user,e).subscribe(e=>{this._toast.showSuccess(`User '${this.user.email}' was updated successfully.`)})}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(o.a),l.Ob(A),l.Ob(L.a),l.Ob(T.a),l.Ob(o.d),l.Ob(q.a),l.Ob(n.i),l.Ob(a.b))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-user-details"]],features:[l.Ab([L.a])],decls:10,vars:7,consts:[["title","Delete?","text","User will be deleted permanently. This action cannot be reversed.","type","warning",3,"showCancelButton","confirm"],["deleteAlert",""],["title","Unlock?","text","User will be unlocked permanently. This action cannot be reversed.","type","warning",3,"showCancelButton","confirm"],["unlockAlert",""],["type","warning",3,"title","text","showCancelButton","confirm"],["blockAlert",""],["content",""],[4,"ngIf"],["class","needs-validation","novalidate","",3,"ngClass","ngSubmit",4,"ngIf"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["novalidate","",1,"needs-validation",3,"ngClass","ngSubmit"],["userPasswordform","ngForm"],[3,"problemDetails"],["validationSummary",""],[1,"form-group"],["for","user-new-password"],["type","password","id","user-new-password","name","user-new-password","required","",1,"form-control",3,"ngModel","ngModelChange"],["userNewPassword","ngModel"],["class","form-control-feedback text-danger",4,"ngIf"],[1,"form-check","col-form-label","custom-control","custom-checkbox"],["type","checkbox","id","change-password-after-first-sign-in-check","name","change-password-after-first-sign-in-check",1,"form-check-input","custom-control-input",3,"ngModel","ngModelChange"],["changePasswordAfterFirstSignInCheck","ngModel"],["for","change-password-after-first-sign-in-check",1,"custom-control-label"],["type","submit",1,"btn","btn-primary"],[1,"form-control-feedback","text-danger"],["form","ngForm"],["class","alert alert-warning d-flex align-items-center justify-content-between","role","alert",4,"ngIf"],[1,"form-group","row"],["for","user-name",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["type","text","id","user-name","name","user-name","maxlength","256","required","",1,"form-control",3,"ngModel","ngModelChange"],["userName","ngModel"],["for","user-email",1,"col-sm-2","col-form-label"],["type","text","id","user-email","name","user-email","maxlength","256","required","","email","",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],["for","user-email-confirmed",1,"col-sm-2","col-form-label"],["type","checkbox","id","user-email-confirmed","name","user-email-confirmed",1,"form-check-input","custom-control-input",3,"ngModel","ngModelChange"],["emailConfirmed","ngModel"],["for","user-email-confirmed",1,"custom-control-label"],["for","user-create-date",1,"col-sm-2","col-form-label"],[1,"col-sm-10","col-form-label"],["id","user-create-date","name","user-create-date",1,"col-form-label"],["for","user-phone-number",1,"col-sm-2","col-form-label"],["type","tel","id","user-phone-number","name","user-phone-number",1,"form-control",3,"ngModel","ngModelChange"],["for","user-phone-number-confirmed",1,"col-sm-2","col-form-label"],["type","checkbox","id","user-phone-number-confirmed","name","user-phone-number-confirmed",1,"form-check-input","custom-control-input",3,"ngModel","ngModelChange"],["phoneNumberConfirmed","ngModel"],["for","user-phone-number-confirmed",1,"custom-control-label"],["for","resource-type",1,"col-sm-2","col-form-label"],["id","user-password-expiration-policy","name","user-password-expiration-policy",1,"form-control","custom-select",3,"ngModel","ngModelChange"],["passwordExpirationPolicy","ngModel"],["value",""],["value","Never"],["value","NextLogin"],["value","Monthly"],["value","Quarterly"],["value","Semesterly"],["value","Annually"],["value","Biannually"],["class","form-group row",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary","m-r-5"],[1,"material-icons","align-middle"],["type","button",1,"btn","btn-danger","m-r-5","float-right",3,"disabled","click"],["type","button",1,"btn","btn-secondary","m-r-5","float-right",3,"disabled","click"],["role","alert",1,"alert","alert-warning","d-flex","align-items-center","justify-content-between"],[1,"flex-fill"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"col-sm-2","col-form-label",3,"for"],["required","",3,"id","name","pattern","ngModel","modelType","ngModelChange"],["input","ngModel"]],template:function(e,t){1&e&&(l.Ub(0,"swal",0,1),l.gc("confirm",(function(){return t.delete()})),l.Tb(),l.Ub(2,"swal",2,3),l.gc("confirm",(function(){return t.unlock()})),l.Tb(),l.Ub(4,"swal",4,5),l.gc("confirm",(function(){return t.toggleBlock()})),l.Tb(),l.Gc(6,Y,8,1,"ng-template",null,6,l.Hc),l.Gc(8,Z,2,0,"p",7),l.Gc(9,ne,87,23,"form",8)),2&e&&(l.oc("showCancelButton",!0),l.Bb(2),l.oc("showCancelButton",!0),l.Bb(2),l.oc("title",null!=t.user&&t.user.blocked?"Unblock?":"Block?")("text",null!=t.user&&t.user.blocked?"User will be unblocked. You can revert this action later.":"User will be blocked. You can revert this action later.")("showCancelButton",!0),l.Bb(4),l.oc("ngIf",!t.user),l.Bb(1),l.oc("ngIf",t.user))},directives:[a.a,i.m,r.y,r.n,r.o,i.k,w.a,r.b,r.u,r.m,r.p,r.a,r.j,r.c,r.v,r.q,r.x,i.l,K,r.s],pipes:[i.e],encapsulation:2}),e})();var oe=s("8xOu");function le(e,t){1&e&&(l.Ub(0,"p"),l.Ic(1,"Loading user roles..."),l.Tb())}const ce=function(){return{sourceListTitle:"Available Roles",emptySourceListMessage:"There are no available roles to assign.",destinationListTitle:"Assigned Roles",emptyDestinationListMessage:"There are no roles assigned to this user."}};function ue(e,t){if(1&e){const e=l.Vb();l.Ub(0,"app-transfer-lists",3,4),l.gc("itemAdded",(function(t){return l.zc(e),l.ic().addRole(t)}))("itemRemoved",(function(t){return l.zc(e),l.ic().removeRole(t)})),l.Tb()}if(2&e){const e=l.ic();l.oc("source",e.availableRoles)("destination",e.userRoles)("titlePropertyName","name")("subtitlePropertyName","description")("options",l.rc(5,ce))}}const be=["form"],de=["actionsTemplate"];function me(e,t){if(1&e&&(l.Ub(0,"option",20),l.Ic(1),l.Tb()),2&e){const e=t.$implicit;l.oc("value",e.name),l.Bb(1),l.Kc(" ",e.name," ")}}function pe(e,t){1&e&&(l.Ub(0,"div",21),l.Ic(1," Please select a claim. "),l.Tb())}function he(e,t){1&e&&(l.Ub(0,"div",21),l.Ic(1," Please provide a value. "),l.Tb())}function ge(e,t){1&e&&(l.Ub(0,"a",22),l.Ic(1,"Edit"),l.Tb()),2&e&&l.oc("routerLink",t.value+"/edit")}const fe=function(e){return{"was-validated":e}};function ve(e,t){if(1&e&&(l.Ub(0,"div",24),l.Ic(1),l.Tb()),2&e){const e=l.ic(2);l.Bb(1),l.Kc(" Field '",e.claim.displayName||e.claim.name,"' is required. ")}}function Ue(e,t){1&e&&(l.Ub(0,"div",24),l.Ic(1," Pattern not correct. "),l.Tb())}const Te=function(e){return{"was-validated":e}};function we(e,t){if(1&e){const e=l.Vb();l.Ub(0,"form",9,10),l.gc("ngSubmit",(function(){l.zc(e);const t=l.xc(1),s=l.ic();return t.form.valid&&s.update()})),l.Ub(2,"div",11),l.Ub(3,"label",12),l.Ub(4,"i",13),l.Ic(5," info "),l.Tb(),l.Ic(6," Type "),l.Tb(),l.Ub(7,"div",14),l.Ub(8,"span",15),l.Ic(9),l.Tb(),l.Tb(),l.Tb(),l.Ub(10,"div",11),l.Ub(11,"label",16),l.Ic(12,"Value (*)"),l.Tb(),l.Ub(13,"div",17),l.Ub(14,"app-dynamic-input",18,19),l.gc("ngModelChange",(function(t){return l.zc(e),l.ic().claim.value=t})),l.Tb(),l.Gc(16,ve,2,1,"div",20),l.Gc(17,Ue,2,0,"div",20),l.Tb(),l.Tb(),l.Ub(18,"div",21),l.Ub(19,"div"),l.Ub(20,"button",22),l.Ic(21," Save Changes "),l.Tb(),l.Ub(22,"button",23),l.gc("click",(function(){return l.zc(e),l.ic(),l.xc(1).fire()})),l.Ic(23," Delete "),l.Tb(),l.Tb(),l.Tb(),l.Tb()}if(2&e){const e=l.xc(1),t=l.xc(15),s=l.ic();l.oc("ngClass",l.sc(10,Te,e.submitted)),l.Bb(4),l.oc("title",s.claim.description),l.Bb(5),l.Kc(" ",s.claim.name," "),l.Bb(5),l.oc("id","claim-value")("name","claim-value")("pattern",s.claim.rule)("modelType",s.claim.valueType)("ngModel",s.claim.value),l.Bb(2),l.oc("ngIf",e.submitted&&t.invalid&&t.errors.required),l.Bb(1),l.oc("ngIf",e.submitted&&t.invalid&&t.errors.pattern)}}const _e=["actionsTemplate"];function ye(e,t){if(1&e&&(l.Ub(0,"h6",16),l.Ub(1,"span",17),l.Ic(2),l.Tb(),l.Tb()),2&e){const e=t.$implicit;l.Bb(2),l.Jc(e)}}function Ce(e,t){if(1&e&&(l.Ub(0,"div",6),l.Ub(1,"h4",7),l.Ic(2),l.Tb(),l.Ub(3,"button",8),l.gc("click",(function(){return t.$implicit.dismiss()})),l.Ub(4,"span",9),l.Ic(5,"\xd7"),l.Tb(),l.Tb(),l.Tb(),l.Ub(6,"div",10),l.Ub(7,"div",11),l.Ub(8,"table",12),l.Ub(9,"tbody"),l.Ub(10,"tr"),l.Ub(11,"th",13),l.Ic(12,"Id"),l.Tb(),l.Ub(13,"td"),l.Ic(14),l.Tb(),l.Tb(),l.Ub(15,"tr"),l.Ub(16,"th",13),l.Ic(17,"Description"),l.Tb(),l.Ub(18,"td"),l.Ic(19),l.Tb(),l.Tb(),l.Ub(20,"tr"),l.Ub(21,"th",13),l.Ic(22,"URL"),l.Tb(),l.Ub(23,"td"),l.Ic(24),l.Tb(),l.Tb(),l.Ub(25,"tr"),l.Ub(26,"th",13),l.Ic(27,"Created"),l.Tb(),l.Ub(28,"td"),l.Ic(29),l.jc(30,"date"),l.Tb(),l.Tb(),l.Ub(31,"tr"),l.Ub(32,"th",13),l.Ic(33,"Expires"),l.Tb(),l.Ub(34,"td"),l.Ic(35),l.jc(36,"date"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Pb(37,"hr"),l.Ub(38,"p",14),l.Ic(39,"Resources & scopes accessible by client:"),l.Tb(),l.Gc(40,ye,3,1,"h6",15),l.Tb(),l.Tb()),2&e){const e=l.ic();l.Bb(2),l.Kc(" ",null==e.selectedUserClient?null:e.selectedUserClient.clientName," "),l.Bb(12),l.Jc(null==e.selectedUserClient?null:e.selectedUserClient.clientId),l.Bb(5),l.Jc(null==e.selectedUserClient?null:e.selectedUserClient.description),l.Bb(5),l.Jc(null==e.selectedUserClient?null:e.selectedUserClient.clientUri),l.Bb(5),l.Jc(l.lc(30,7,null==e.selectedUserClient?null:e.selectedUserClient.createdAt,"medium")),l.Bb(6),l.Kc("",null!=e.selectedUserClient&&e.selectedUserClient.expiresAt?l.lc(36,10,null==e.selectedUserClient?null:e.selectedUserClient.expiresAt,"medium"):"Never"," "),l.Bb(5),l.oc("ngForOf",null==e.selectedUserClient?null:e.selectedUserClient.scopes)}}function Ie(e,t){if(1&e){const e=l.Vb();l.Ub(0,"button",18),l.gc("click",(function(){l.zc(e);const s=t.row,i=l.ic(),r=l.xc(1);return i.showDetails(s,r)})),l.Ic(1," Details "),l.Tb()}}const Se=[{path:"",component:U},{path:"add",component:k},{path:":id",component:F,children:[{path:"",redirectTo:"details",pathMatch:"full"},{path:"details",component:ae},{path:"roles",component:(()=>{class e{constructor(e,t,s,i){this._route=e,this._userStore=t,this._toast=s,this._authService=i,this.user=new c.r}ngOnInit(){const e=this._route.parent.snapshot.params.id;this.currentUserId=this._authService.getSubjectId();const t=this._userStore.getUser(e),s=this._userStore.getAllRoles();this._getDataSubscription=Object(E.a)([t,s]).pipe(Object(B.a)(e=>({user:e[0],roles:e[1]}))).subscribe(e=>{this.user=e.user;const t=e.user.roles,s=e.roles;this.availableRoles=s.filter(e=>!t.includes(e.name)),this.userRoles=s.filter(e=>t.includes(e.name))})}ngOnDestroy(){this._getDataSubscription&&this._getDataSubscription.unsubscribe(),this._addUserRoleSubscription&&this._addUserRoleSubscription.unsubscribe(),this._removeUserRoleSubscription&&this._removeUserRoleSubscription.unsubscribe()}addRole(e){this._addUserRoleSubscription=this._userStore.addUserRole(this.user.id,e).subscribe(t=>{this._toast.showSuccess(`Role '${e.name}' was successfully added to user '${this.user.email}'.`)})}removeRole(e){this._removeUserRoleSubscription=this._userStore.deleteUserRole(this.user.id,e).subscribe(t=>{this._toast.showSuccess(`Role '${e.name}' was successfully removed from user '${this.user.email}'.`)})}toggleAdmin(){this.user.isAdmin=!this.user.isAdmin,this._userStore.updateUser(this.user,null).subscribe(e=>{this._toast.showSuccess(`User '${this.user.email}' was updated successfully.`)})}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(o.a),l.Ob(A),l.Ob(T.a),l.Ob(q.a))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-user-roles"]],decls:6,vars:4,consts:[[4,"ngIf"],[3,"source","destination","titlePropertyName","subtitlePropertyName","options","itemAdded","itemRemoved",4,"ngIf"],["type","button",1,"btn","btn-secondary","m-r-5","float-right",3,"disabled","click"],[3,"source","destination","titlePropertyName","subtitlePropertyName","options","itemAdded","itemRemoved"],["transferList",""]],template:function(e,t){1&e&&(l.Gc(0,le,2,0,"p",0),l.Gc(1,ue,2,6,"app-transfer-lists",1),l.Pb(2,"hr"),l.Ub(3,"div"),l.Ub(4,"button",2),l.gc("click",(function(){return t.toggleAdmin()})),l.Ic(5),l.Tb(),l.Tb()),2&e&&(l.oc("ngIf",!t.availableRoles),l.Bb(1),l.oc("ngIf",t.availableRoles),l.Bb(3),l.oc("disabled",t.currentUserId===t.user.id),l.Bb(1),l.Kc(" ",t.user.isAdmin?"Remove from admins":"Mark as admin"," "))},directives:[i.m,oe.a],encapsulation:2}),e})()},{path:"additional-details",component:(()=>{class e{constructor(e,t,s,i){this._userStore=e,this._route=t,this._dateParser=s,this._toast=i,this.selectedClaimName="",this.selectedClaimValue="",this.selectedClaimRule="",this.selectedClaimValueType=c.x.String,this.columns=[],this.rows=[]}ngOnInit(){this.columns=[{prop:"type",name:"Type",draggable:!1,canAutoResize:!0,sortable:!0,resizeable:!1},{prop:"value",name:"Value",draggable:!1,canAutoResize:!0,sortable:!0,resizeable:!1},{prop:"id",name:"Actions",draggable:!1,canAutoResize:!0,sortable:!1,resizeable:!1,cellTemplate:this._actionsTemplate,cellClass:"d-flex align-items-center"}];const e=this._userStore.getUser(this._route.parent.snapshot.params.id),t=this._userStore.getAllClaims();this._getDataSubscription=Object(E.a)([e,t]).pipe(Object(B.a)(e=>({user:e[0],claims:e[1]}))).subscribe(e=>{this._user=e.user,this.rows=this._user.claims,this.claims=e.claims.filter(e=>!1===e.required)})}ngOnDestroy(){this._getDataSubscription&&this._getDataSubscription.unsubscribe()}claimSelected(e){this.selectedClaimName=e;const t=this.claims.find(e=>e.name===this.selectedClaimName);t&&(this.selectedClaimRule=t.rule,this.selectedClaimValueType=t.valueType)}addClaim(){this._userStore.addClaim(this._user.id,{type:this.selectedClaimName,value:this.selectedClaimValueType===c.x.DateTime?this._dateParser.format(this.selectedClaimValue):this.selectedClaimValue}).subscribe(e=>{this._toast.showSuccess(`Claim '${this.selectedClaimName}' was successfully added to user ${this._user.email}.`),this._form.resetForm({"claims-select":"","claim-value":""}),this.rows=[...this.rows]})}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(A),l.Ob(o.a),l.Ob(L.a),l.Ob(T.a))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-user-additional-details"]],viewQuery:function(e,t){var s;1&e&&(l.Nc(be,!0),l.Ec(de,!0)),2&e&&(l.wc(s=l.hc())&&(t._form=s.first),l.wc(s=l.hc())&&(t._actionsTemplate=s.first))},features:[l.Ab([L.a])],decls:27,vars:18,consts:[["novalidate","",1,"needs-validation",3,"ngClass","ngSubmit"],["form","ngForm"],[1,"form-row"],[1,"col"],["for","claims-select",1,"sr-only"],["id","claims-select","name","claims-select","required","",1,"form-control","custom-select",3,"ngModel","ngModelChange"],["claim","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","form-control-feedback text-danger",4,"ngIf"],["for","claim-value",1,"sr-only"],["id","claim-value","name","claim-value","required","",3,"pattern","ngModel","modelType","placeholder","ngModelChange"],["value","ngModel"],[1,"col-md-1","text-right"],["type","submit",1,"btn","btn-primary","waves-effect","waves-light","m-r-5"],[1,"row","mt-3"],[1,"col-12"],[3,"clientSide","rowsPerPage","canFilter","columns","rows","defaultSortField","defaultSortDirection"],["userClaimsList",""],["actionsTemplate",""],[3,"value"],[1,"form-control-feedback","text-danger"],["href","#","role","button",1,"btn","btn-success",3,"routerLink"]],template:function(e,t){if(1&e){const e=l.Vb();l.Ub(0,"form",0,1),l.gc("ngSubmit",(function(){return l.zc(e),l.xc(1).form.valid&&t.addClaim()})),l.Ub(2,"div",2),l.Ub(3,"div",3),l.Ub(4,"label",4),l.Ic(5," Claim "),l.Tb(),l.Ub(6,"select",5,6),l.gc("ngModelChange",(function(e){return t.claimSelected(e)})),l.Ub(8,"option",7),l.Ic(9," Please select a claim "),l.Tb(),l.Gc(10,me,2,2,"option",8),l.Tb(),l.Gc(11,pe,2,0,"div",9),l.Tb(),l.Ub(12,"div",3),l.Ub(13,"label",10),l.Ic(14," Value "),l.Tb(),l.Ub(15,"app-dynamic-input",11,12),l.gc("ngModelChange",(function(e){return t.selectedClaimValue=e})),l.Tb(),l.Gc(17,he,2,0,"div",9),l.Tb(),l.Ub(18,"div",13),l.Ub(19,"button",14),l.Ic(20," Add "),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(21,"div",15),l.Ub(22,"div",16),l.Pb(23,"app-list-view",17,18),l.Tb(),l.Tb(),l.Gc(25,ge,2,1,"ng-template",null,19,l.Hc)}if(2&e){const e=l.xc(1),s=l.xc(7),i=l.xc(16);l.oc("ngClass",l.sc(16,fe,e.submitted)),l.Bb(6),l.oc("ngModel",t.selectedClaimName),l.Bb(4),l.oc("ngForOf",t.claims),l.Bb(1),l.oc("ngIf",e.submitted&&s.invalid),l.Bb(4),l.oc("pattern",t.selectedClaimRule)("ngModel",t.selectedClaimValue)("modelType",t.selectedClaimValueType)("placeholder","Please provide a value..."),l.Bb(2),l.oc("ngIf",e.submitted&&i.invalid),l.Bb(6),l.oc("clientSide",!0)("rowsPerPage",10)("canFilter",!1)("columns",t.columns)("rows",t.rows)("defaultSortField","type")("defaultSortDirection","Asc")}},directives:[r.y,r.n,r.o,i.k,r.v,r.u,r.m,r.p,r.q,r.x,i.l,i.m,K,r.s,u.a,o.g],encapsulation:2}),e})()},{path:"additional-details/:id/edit",component:(()=>{class e{constructor(e,t,s,i,r){this._userStore=e,this._router=t,this._route=s,this._dateParser=i,this._toast=r}ngOnInit(){this._userId=this._route.snapshot.parent.params.id,this._claimId=+this._route.snapshot.params.id;const e=this._userStore.getUser(this._userId),t=this._userStore.getAllClaims();this._getDataSubscription=Object(E.a)([e,t]).pipe(Object(B.a)(e=>({user:e[0],claims:e[1]}))).subscribe(e=>{this._userEmail=e.user.email;const t=e.user.claims.find(e=>e.id===this._claimId),s=t&&e.claims.find(e=>e.name===t.type);if(s){const e=s;e.value=e.valueType===c.x.DateTime?this._dateParser.parse(t.value):t.value,this.claim=e}})}ngOnDestroy(){this._getDataSubscription&&this._getDataSubscription.unsubscribe()}delete(){this._userStore.deleteUserClaim(this._userId,this._claimId).subscribe(e=>{this._toast.showSuccess(`Claim '${this.claim.name}' was successfully removed from user '${this._userEmail}'.`),this._router.navigate(["../../"],{relativeTo:this._route})})}update(){const e=this.claim.valueType===c.x.DateTime?this._dateParser.format(this.claim.value):this.claim.value;this._userStore.updateUserClaim(this._userId,this._claimId,e).subscribe(e=>{this._toast.showSuccess(`Claim '${this.claim.name}' was successfully updated.`)})}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(A),l.Ob(o.d),l.Ob(o.a),l.Ob(L.a),l.Ob(T.a))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-additional-detail-edit"]],features:[l.Ab([L.a])],decls:11,vars:3,consts:[["title","Delete?","type","warning",3,"text","showCancelButton","confirm"],["deleteAlert",""],[1,"row"],[1,"col-12"],[1,"card","m-b-30"],[1,"card-body"],[1,"mt-0","header-title"],[1,"text-muted","m-b-30","font-14"],["class","needs-validation","novalidate","",3,"ngClass","ngSubmit",4,"ngIf"],["novalidate","",1,"needs-validation",3,"ngClass","ngSubmit"],["form","ngForm"],[1,"form-group","row"],["for","claim-type",1,"col-sm-2","col-form-label"],[1,"material-icons","align-middle",3,"title"],[1,"col-sm-10","col-form-label"],["id","claim-type","name","claim-type",1,"col-form-label"],["for","claim-value",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["required","",3,"id","name","pattern","modelType","ngModel","ngModelChange"],["claimValue","ngModel"],["class","form-control-feedback text-danger",4,"ngIf"],[1,"form-group"],["type","submit",1,"btn","btn-primary","waves-effect","waves-light","m-r-5"],["type","button",1,"btn","btn-danger","waves-effect","m-r-5","float-right",3,"click"],[1,"form-control-feedback","text-danger"]],template:function(e,t){1&e&&(l.Ub(0,"swal",0,1),l.gc("confirm",(function(){return t.delete()})),l.Tb(),l.Ub(2,"div",2),l.Ub(3,"div",3),l.Ub(4,"div",4),l.Ub(5,"div",5),l.Ub(6,"h4",6),l.Ic(7,"Edit Claim"),l.Tb(),l.Ub(8,"p",7),l.Ic(9," Here you can modify a claim of the specified user. "),l.Tb(),l.Gc(10,we,24,12,"form",8),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&e&&(l.oc("text","Claim '"+(null==t.claim?null:t.claim.name)+"' will be deleted permanently. This action cannot be reversed.")("showCancelButton",!0),l.Bb(10),l.oc("ngIf",t.claim))},directives:[a.a,i.m,r.y,r.n,r.o,i.k,K,r.u,r.s,r.m,r.p],encapsulation:2}),e})()},{path:"applications",component:(()=>{class e{constructor(e,t,s){this._userStore=e,this._route=t,this._modalService=s,this.columns=[],this.rows=[]}ngOnInit(){this.columns=[{prop:"clientId",name:"App Id",draggable:!1,canAutoResize:!0,sortable:!0,resizeable:!1},{prop:"clientName",name:"App Name",draggable:!1,canAutoResize:!0,sortable:!0,resizeable:!1},{prop:"description",name:"Description",draggable:!1,canAutoResize:!0,sortable:!1,resizeable:!1},{prop:"id",name:"Actions",draggable:!1,canAutoResize:!0,sortable:!1,resizeable:!1,cellTemplate:this._actionsTemplate,cellClass:"d-flex align-items-center"}],this._getDataSubscription=this._userStore.getUserApplications(this._route.parent.snapshot.params.id).subscribe(e=>{this.rows=e})}ngOnDestroy(){this._getDataSubscription&&this._getDataSubscription.unsubscribe()}showDetails(e,t){this.selectedUserClient=e,this._modalService.open(t)}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(A),l.Ob(o.a),l.Ob(n.i))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-user-applications"]],viewQuery:function(e,t){var s;1&e&&l.Ec(_e,!0),2&e&&l.wc(s=l.hc())&&(t._actionsTemplate=s.first)},decls:8,vars:7,consts:[["content",""],[1,"row","mt-3"],[1,"col-12"],[3,"clientSide","rowsPerPage","canFilter","columns","rows","defaultSortField","defaultSortDirection"],["userApplicationsList",""],["actionsTemplate",""],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"table-responsive"],[1,"table","table-striped","mb-0"],["scope","row"],[1,"text-muted","font-14"],["class","d-inline-block mt-0",4,"ngFor","ngForOf"],[1,"d-inline-block","mt-0"],[1,"badge","badge-warning","mr-1"],[1,"btn","btn-success",3,"click"]],template:function(e,t){1&e&&(l.Gc(0,Ce,41,13,"ng-template",null,0,l.Hc),l.Ub(2,"div",1),l.Ub(3,"div",2),l.Pb(4,"app-list-view",3,4),l.Tb(),l.Tb(),l.Gc(6,Ie,2,0,"ng-template",null,5,l.Hc)),2&e&&(l.Bb(4),l.oc("clientSide",!0)("rowsPerPage",10)("canFilter",!1)("columns",t.columns)("rows",t.rows)("defaultSortField","clientId")("defaultSortDirection","Asc"))},directives:[u.a,i.l],pipes:[i.e],encapsulation:2}),e})()}]}];let xe=(()=>{class e{}return e.\u0275mod=l.Mb({type:e}),e.\u0275inj=l.Lb({factory:function(t){return new(t||e)},imports:[[o.h.forChild(Se)],o.h]}),e})();var Me=s("PCNd");let ke=(()=>{class e{}return e.\u0275mod=l.Mb({type:e}),e.\u0275inj=l.Lb({factory:function(t){return new(t||e)},imports:[[i.c,r.i,xe,n.f,n.j,Me.a,a.c]]}),e})()}}]);