(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"U/KP":function(e,t,i){"use strict";i.r(t),i.d(t,"ResourcesModule",(function(){return mt}));var s=i("SVse"),o=i("s7LF"),c=i("hvj1"),n=i("PCNd"),r=i("iInd"),a=i("8Y7J"),l=i("onTr"),u=i("fQZA");const d=["actionsTemplate"];function p(e,t){if(1&e&&(a.Ub(0,"a",12),a.Ic(1,"Edit"),a.Tb()),2&e){const e=a.ic().value;a.oc("routerLink",e+"/details")}}function b(e,t){1&e&&a.Gc(0,p,2,1,"a",11),2&e&&a.oc("ngIf",t.value)}let m=(()=>{class e{constructor(e){this._api=e,this.count=0,this.rows=[],this.columns=[]}ngOnInit(){this.columns=[{prop:"name",name:"Id",draggable:!1,canAutoResize:!0,sortable:!0,resizeable:!1},{prop:"displayName",name:"Name",draggable:!1,canAutoResize:!0,sortable:!0,resizeable:!1},{prop:"description",name:"Description",draggable:!1,canAutoResize:!0,sortable:!0,resizeable:!1},{prop:"id",name:"Actions",draggable:!1,canAutoResize:!1,sortable:!1,resizeable:!1,cellTemplate:this._actionsTemplate,cellClass:"d-flex align-items-center"}]}getIdentityResources(e){this._api.getIdentityResources(e.page,e.pageSize,e.sortField,e.searchTerm).subscribe(e=>{this.count=e.count,this.rows=e.items})}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(l.n))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-identity-resources"]],viewQuery:function(e,t){var i;1&e&&a.Ec(d,!0),2&e&&a.wc(i=a.hc())&&(t._actionsTemplate=i.first)},decls:15,vars:8,consts:[[1,"row"],[1,"col-sm-12"],[1,"page-title-box"],[1,"row","align-items-center"],[1,"col-md-8"],[1,"page-title","m-0"],[1,"text-muted","font-14"],[1,"col-12"],[3,"clientSide","columns","rows","count","rowsPerPage","defaultSortField","defaultSortDirection","search"],["identityResourcesList",""],["actionsTemplate",""],["class","btn btn-success","href","#","role","button",3,"routerLink",4,"ngIf"],["href","#","role","button",1,"btn","btn-success",3,"routerLink"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Ub(1,"div",1),a.Ub(2,"div",2),a.Ub(3,"div",3),a.Ub(4,"div",4),a.Ub(5,"h4",5),a.Ic(6),a.Tb(),a.Ub(7,"p",6),a.Ic(8," Get a list of all identity resources. "),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(9,"div",0),a.Ub(10,"div",7),a.Ub(11,"app-list-view",8,9),a.gc("search",(function(e){return t.getIdentityResources(e)})),a.Tb(),a.Tb(),a.Tb(),a.Gc(13,b,1,1,"ng-template",null,10,a.Hc)),2&e&&(a.Bb(6),a.Kc("Identity Resources List (",t.count,")"),a.Bb(5),a.oc("clientSide",!1)("columns",t.columns)("rows",t.rows)("count",t.count)("rowsPerPage",15)("defaultSortField","name")("defaultSortDirection","Asc"))},directives:[u.a,s.m,r.g],encapsulation:2}),e})();var h=i("NHP+"),f=i("cp0P"),g=i("lJxs");let v=(()=>{class e{constructor(e){this._api=e}getIdentityResource(e){return this._identityResource||(this._identityResource=new h.a,this._api.getIdentityResource(e).subscribe(e=>{this._identityResource.next(e),this._identityResource.complete()})),this._identityResource}updateIdentityResource(e){return this._api.updateIdentityResource(e.id,new l.w({displayName:e.displayName,description:e.description,enabled:e.enabled,emphasize:e.emphasize,required:e.required,showInDiscoveryDocument:e.showInDiscoveryDocument})).pipe(Object(g.a)(t=>{this._identityResource.next(e),this._identityResource.complete()}))}deleteIdentityResource(e){return this._api.deleteIdentityResource(e)}getAllClaims(){return this._allClaims||(this._allClaims=new h.a,this._api.getClaimTypes(void 0,1,2147483647,"name+",void 0).subscribe(e=>{this._allClaims.next(e.items),this._allClaims.complete()})),this._allClaims}addIdentityResourceClaim(e,t){const i=this.getIdentityResource(e),s=this._api.addIdentityResourceClaims(e,[t.name]);return Object(f.a)([i,s]).pipe(Object(g.a)(e=>({identityResource:e[0]}))).pipe(Object(g.a)(e=>{e.identityResource.allowedClaims.push(t.name),this._identityResource.next(e.identityResource),this._identityResource.complete()}))}deleteIdentityResourceClaim(e,t){return this.getIdentityResource(e).subscribe(e=>{const i=e.allowedClaims.indexOf(t.name);i>-1&&e.allowedClaims.splice(i,1),this._identityResource.next(e),this._identityResource.complete()}),this._api.deleteIdentityResourceClaim(e,t.name)}}return e.\u0275fac=function(t){return new(t||e)(a.cc(l.n))},e.\u0275prov=a.Kb({token:e,factory:e.\u0275fac}),e})();var y=i("OsF4");const R=function(){return["details"]},T=function(){return["claims"]};let I=(()=>{class e{constructor(e,t){this.route=e,this.logger=t,this.userId=""}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(r.a),a.Ob(y.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-identity-resource-edit"]],features:[a.Ab([v])],decls:18,vars:4,consts:[[1,"row"],[1,"col-12"],[1,"card","m-b-30","m-t-30"],[1,"card-body"],[1,"mt-0","header-title"],[1,"text-muted","m-b-30","font-14"],["role","tablist",1,"nav","nav-tabs","justify-content-start"],[1,"nav-item"],["routerLinkActive","active","role","tab","id","identity-resource-details-tab",1,"nav-link",3,"routerLink"],["routerLinkActive","active","role","tab","id","identity-resource-claims-tab",1,"nav-link",3,"routerLink"],[1,"tab-content"],["role","tabpanel",1,"tab-pane","active"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Ub(1,"div",1),a.Ub(2,"div",2),a.Ub(3,"div",3),a.Ub(4,"h4",4),a.Ic(5,"Edit Identity Resource"),a.Tb(),a.Ub(6,"p",5),a.Ic(7," Here you can modify an identity resource. "),a.Tb(),a.Ub(8,"ul",6),a.Ub(9,"li",7),a.Ub(10,"a",8),a.Ic(11," Details "),a.Tb(),a.Tb(),a.Ub(12,"li",7),a.Ub(13,"a",9),a.Ic(14," Claims "),a.Tb(),a.Tb(),a.Tb(),a.Ub(15,"div",10),a.Ub(16,"div",11),a.Pb(17,"router-outlet"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb()),2&e&&(a.Bb(10),a.oc("routerLink",a.rc(2,R)),a.Bb(3),a.oc("routerLink",a.rc(3,T)))},directives:[r.g,r.f,r.i],encapsulation:2}),e})();var _=i("1uCz");function S(e,t){1&e&&(a.Ub(0,"p"),a.Ic(1,"Loading identity resource..."),a.Tb())}function C(e,t){1&e&&(a.Ub(0,"div",37),a.Ic(1," Field 'Display Name' must be up to 200 characters. "),a.Tb())}function U(e,t){1&e&&(a.Ub(0,"div",37),a.Ic(1," Field 'Display Name' must be up to 1000 characters. "),a.Tb())}const w=function(e){return{"was-validated":e}};function A(e,t){if(1&e){const e=a.Vb();a.Ub(0,"form",4,5),a.gc("ngSubmit",(function(){a.zc(e);const t=a.xc(1),i=a.ic();return t.form.valid&&i.update()})),a.Ub(2,"div",6),a.Ub(3,"label",7),a.Ic(4," Resource Id "),a.Tb(),a.Ub(5,"div",8),a.Ub(6,"span",9),a.Ic(7),a.Tb(),a.Tb(),a.Tb(),a.Ub(8,"div",6),a.Ub(9,"label",10),a.Ic(10," Display Name "),a.Tb(),a.Ub(11,"div",11),a.Ub(12,"input",12,13),a.gc("ngModelChange",(function(t){return a.zc(e),a.ic().identityResource.displayName=t})),a.Tb(),a.Gc(14,C,2,0,"div",14),a.Tb(),a.Tb(),a.Ub(15,"div",6),a.Ub(16,"label",15),a.Ic(17," Description "),a.Tb(),a.Ub(18,"div",11),a.Ub(19,"textarea",16,17),a.gc("ngModelChange",(function(t){return a.zc(e),a.ic().identityResource.description=t})),a.Ic(21,"            "),a.Tb(),a.Gc(22,U,2,0,"div",14),a.Tb(),a.Tb(),a.Ub(23,"div",6),a.Ub(24,"label",18),a.Ic(25," Required "),a.Tb(),a.Ub(26,"div",11),a.Ub(27,"div",19),a.Ub(28,"input",20,21),a.gc("ngModelChange",(function(t){return a.zc(e),a.ic().identityResource.required=t})),a.Tb(),a.Pb(30,"label",22),a.Tb(),a.Tb(),a.Tb(),a.Ub(31,"div",6),a.Ub(32,"label",23),a.Ic(33," Show in Discovery Document "),a.Tb(),a.Ub(34,"div",11),a.Ub(35,"div",19),a.Ub(36,"input",24,25),a.gc("ngModelChange",(function(t){return a.zc(e),a.ic().identityResource.showInDiscoveryDocument=t})),a.Tb(),a.Pb(38,"label",26),a.Tb(),a.Tb(),a.Tb(),a.Ub(39,"div",6),a.Ub(40,"label",27),a.Ic(41," Emphasize "),a.Tb(),a.Ub(42,"div",11),a.Ub(43,"div",19),a.Ub(44,"input",28,29),a.gc("ngModelChange",(function(t){return a.zc(e),a.ic().identityResource.emphasize=t})),a.Tb(),a.Pb(46,"label",30),a.Tb(),a.Tb(),a.Tb(),a.Ub(47,"div",6),a.Ub(48,"label",31),a.Ic(49,"Enabled"),a.Tb(),a.Ub(50,"div",11),a.Ub(51,"div",19),a.Ub(52,"input",32,33),a.gc("ngModelChange",(function(t){return a.zc(e),a.ic().identityResource.enabled=t})),a.Tb(),a.Pb(54,"label",30),a.Tb(),a.Tb(),a.Tb(),a.Ub(55,"div",34),a.Ub(56,"div"),a.Ub(57,"button",35),a.Ic(58," Save Changes "),a.Tb(),a.Ub(59,"button",36),a.gc("click",(function(){return a.zc(e),a.ic(),a.xc(1).fire()})),a.Ic(60," Delete "),a.Tb(),a.Tb(),a.Tb(),a.Tb()}if(2&e){const e=a.xc(1),t=a.xc(13),i=a.xc(20),s=a.ic();a.oc("ngClass",a.sc(10,w,e.submitted)),a.Bb(7),a.Kc(" ",s.identityResource.name," "),a.Bb(5),a.oc("ngModel",s.identityResource.displayName),a.Bb(2),a.oc("ngIf",e.submitted&&t.invalid&&t.errors.maxLength),a.Bb(5),a.oc("ngModel",s.identityResource.description),a.Bb(3),a.oc("ngIf",e.submitted&&i.invalid&&i.errors.maxLength),a.Bb(6),a.oc("ngModel",s.identityResource.required),a.Bb(8),a.oc("ngModel",s.identityResource.showInDiscoveryDocument),a.Bb(8),a.oc("ngModel",s.identityResource.emphasize),a.Bb(8),a.oc("ngModel",s.identityResource.enabled)}}let x=(()=>{class e{constructor(e,t,i,s){this._router=e,this._route=t,this._identityResourceStore=i,this._toast=s}ngOnInit(){this._getResourceSubscription=this._identityResourceStore.getIdentityResource(+this._route.parent.snapshot.params.id).subscribe(e=>{this.identityResource=e})}ngOnDestroy(){this._getResourceSubscription&&this._getResourceSubscription.unsubscribe(),this._updateIdentityResourceSubscription&&this._updateIdentityResourceSubscription.unsubscribe(),this._deleteIdentityResourceSubscription&&this._deleteIdentityResourceSubscription.unsubscribe()}delete(){this._deleteIdentityResourceSubscription=this._identityResourceStore.deleteIdentityResource(this.identityResource.id).subscribe(e=>{this._toast.showSuccess(`Identity resource '${this.identityResource.name}' was deleted successfully.`),this._router.navigate(["../../"],{relativeTo:this._route})})}update(){this._updateIdentityResourceSubscription=this._identityResourceStore.updateIdentityResource(this.identityResource).subscribe(e=>{this._toast.showSuccess(`Identity resource '${this.identityResource.name}' was updated successfully.`)})}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(r.d),a.Ob(r.a),a.Ob(v),a.Ob(_.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-identity-resource-details"]],decls:4,vars:4,consts:[["title","Delete?","type","warning",3,"text","showCancelButton","confirm"],["deleteAlert",""],[4,"ngIf"],["class","needs-validation","novalidate","",3,"ngClass","ngSubmit",4,"ngIf"],["novalidate","",1,"needs-validation",3,"ngClass","ngSubmit"],["form","ngForm"],[1,"form-group","row"],["for","resource-id",1,"col-sm-2","col-form-label"],[1,"col-sm-10","col-form-label"],["id","resource-id","name","resource-id",1,"col-form-label"],["for","resource-display-name",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["type","text","id","resource-display-name","name","resource-display-name","maxlength","200",1,"form-control",3,"ngModel","ngModelChange"],["resourceDisplayName","ngModel"],["class","form-control-feedback text-danger",4,"ngIf"],["for","resource-description",1,"col-sm-2","col-form-label"],["id","resource-description","name","resource-description","rows","3","maxlength","1000",1,"form-control",3,"ngModel","ngModelChange"],["resourceDescription","ngModel"],["for","resource-required",1,"col-sm-2","col-form-label"],[1,"form-check","col-form-label","custom-control","custom-checkbox"],["type","checkbox","id","resource-required","name","resource-required",1,"form-check-input","custom-control-input",3,"ngModel","ngModelChange"],["required","ngModel"],["for","resource-required",1,"custom-control-label"],["for","resource-in-discovery-document",1,"col-sm-2","col-form-label"],["type","checkbox","id","resource-in-discovery-document","name","resource-in-discovery-document",1,"form-check-input","custom-control-input",3,"ngModel","ngModelChange"],["showInDiscoveryDocument","ngModel"],["for","resource-in-discovery-document",1,"custom-control-label"],["for","resource-emphasize",1,"col-sm-2","col-form-label"],["type","checkbox","id","resource-emphasize","name","resource-emphasize",1,"form-check-input","custom-control-input",3,"ngModel","ngModelChange"],["emphasize","ngModel"],["for","resource-emphasize",1,"custom-control-label"],["for","resource-enabled",1,"col-sm-2","col-form-label"],["type","checkbox","id","resource-enabled","name","resource-enabled",1,"form-check-input","custom-control-input",3,"ngModel","ngModelChange"],["enabled","ngModel"],[1,"form-group"],["type","submit",1,"btn","btn-primary","m-r-5"],["type","button",1,"btn","btn-danger","m-r-5","float-right",3,"click"],[1,"form-control-feedback","text-danger"]],template:function(e,t){1&e&&(a.Ub(0,"swal",0,1),a.gc("confirm",(function(){return t.delete()})),a.Tb(),a.Gc(2,S,2,0,"p",2),a.Gc(3,A,61,12,"form",3)),2&e&&(a.oc("text","Identity resource '"+(null==t.identityResource?null:t.identityResource.name)+"' will be deleted permanently. This action cannot be reversed.")("showCancelButton",!0),a.Bb(2),a.oc("ngIf",!t.identityResource),a.Bb(1),a.oc("ngIf",t.identityResource))},directives:[c.a,s.m,o.y,o.n,o.o,s.k,o.b,o.j,o.m,o.p,o.a],encapsulation:2}),e})();var k=i("8xOu");function z(e,t){1&e&&(a.Ub(0,"p"),a.Ic(1,"Loading identity resource claims..."),a.Tb())}const O=function(){return{sourceListTitle:"Available Claims",emptySourceListMessage:"There are no available claims to assign.",destinationListTitle:"Assigned Claims",emptyDestinationListMessage:"There are no claims assigned to this identity resource."}};function D(e,t){if(1&e){const e=a.Vb();a.Ub(0,"app-transfer-lists",2,3),a.gc("itemAdded",(function(t){return a.zc(e),a.ic().addClaim(t)}))("itemRemoved",(function(t){return a.zc(e),a.ic().removeClaim(t)})),a.Tb()}if(2&e){const e=a.ic();a.oc("source",e.availableClaims)("destination",e.identityResourceClaims)("titlePropertyName","name")("subtitlePropertyName","description")("options",a.rc(5,O))}}let B=(()=>{class e{constructor(e,t){this._route=e,this._identityResourceStore=t}ngOnInit(){this._identityResourceId=this._route.parent.snapshot.params.id;const e=this._identityResourceStore.getIdentityResource(this._identityResourceId),t=this._identityResourceStore.getAllClaims();this._getDataSubscription=Object(f.a)([e,t]).pipe(Object(g.a)(e=>({resource:e[0],claimTypes:e[1]}))).subscribe(e=>{const t=e.resource.allowedClaims,i=e.claimTypes;this.availableClaims=i.filter(e=>!t.includes(e.name)),this.identityResourceClaims=i.filter(e=>t.includes(e.name))})}ngOnDestroy(){this._getDataSubscription&&this._getDataSubscription.unsubscribe(),this._addIdentityResourceClaim&&this._addIdentityResourceClaim.unsubscribe(),this._deleteIdentityResourceClaim&&this._deleteIdentityResourceClaim.unsubscribe()}addClaim(e){this._addIdentityResourceClaim=this._identityResourceStore.addIdentityResourceClaim(this._identityResourceId,e).subscribe()}removeClaim(e){this._deleteIdentityResourceClaim=this._identityResourceStore.deleteIdentityResourceClaim(this._identityResourceId,e).subscribe()}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(r.a),a.Ob(v))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-identity-resource-claims"]],decls:2,vars:2,consts:[[4,"ngIf"],[3,"source","destination","titlePropertyName","subtitlePropertyName","options","itemAdded","itemRemoved",4,"ngIf"],[3,"source","destination","titlePropertyName","subtitlePropertyName","options","itemAdded","itemRemoved"],["transferList",""]],template:function(e,t){1&e&&(a.Gc(0,z,2,0,"p",0),a.Gc(1,D,2,6,"app-transfer-lists",1)),2&e&&(a.oc("ngIf",!t.availableClaims),a.Bb(1),a.oc("ngIf",t.availableClaims))},directives:[s.m,k.a],encapsulation:2}),e})();const M=["actionsTemplate"],P=["idTemplate"];function N(e,t){if(1&e&&(a.Ub(0,"a",13),a.Ic(1," Edit "),a.Tb()),2&e){const e=a.ic().value;a.oc("routerLink",e+"/details")}}function F(e,t){1&e&&a.Gc(0,N,2,1,"a",12),2&e&&a.oc("ngIf",t.value)}function L(e,t){1&e&&(a.Ub(0,"span",16),a.Ic(1," reserved "),a.Tb())}function G(e,t){if(1&e&&(a.Ub(0,"span",14),a.Ic(1),a.Tb(),a.Ic(2," \xa0 "),a.Gc(3,L,2,0,"span",15)),2&e){const e=t.row,i=t.value;a.oc("title",i),a.Bb(1),a.Jc(i),a.Bb(2),a.oc("ngIf",e.nonEditable)}}let V=(()=>{class e{constructor(e){this._api=e,this.count=0,this.rows=[],this.columns=[]}ngOnInit(){this.columns=[{prop:"name",name:"Id",draggable:!1,canAutoResize:!0,sortable:!0,resizeable:!1,cellTemplate:this._idTemplate},{prop:"displayName",name:"Name",draggable:!1,canAutoResize:!0,sortable:!0,resizeable:!1},{prop:"description",name:"Description",draggable:!1,canAutoResize:!0,sortable:!0,resizeable:!1},{prop:"id",name:"Actions",draggable:!1,canAutoResize:!1,sortable:!1,resizeable:!1,cellTemplate:this._actionsTemplate,cellClass:"d-flex align-items-center"}]}getApiResources(e){this._api.getApiResources(e.page,e.pageSize,e.sortField,e.searchTerm).subscribe(e=>{this.count=e.count,this.rows=e.items})}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(l.n))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-api-resources"]],viewQuery:function(e,t){var i;1&e&&(a.Ec(M,!0),a.Ec(P,!0)),2&e&&(a.wc(i=a.hc())&&(t._actionsTemplate=i.first),a.wc(i=a.hc())&&(t._idTemplate=i.first))},decls:17,vars:8,consts:[[1,"row"],[1,"col-sm-12"],[1,"page-title-box"],[1,"row","align-items-center"],[1,"col-md-8"],[1,"page-title","m-0"],[1,"text-muted","font-14"],[1,"col-12"],[3,"clientSide","columns","rows","count","rowsPerPage","defaultSortField","defaultSortDirection","search"],["apiResourcesList",""],["actionsTemplate",""],["idTemplate",""],["class","btn btn-success","href","#","role","button",3,"routerLink",4,"ngIf"],["href","#","role","button",1,"btn","btn-success",3,"routerLink"],[3,"title"],["class","badge badge-warning",4,"ngIf"],[1,"badge","badge-warning"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Ub(1,"div",1),a.Ub(2,"div",2),a.Ub(3,"div",3),a.Ub(4,"div",4),a.Ub(5,"h4",5),a.Ic(6),a.Tb(),a.Ub(7,"p",6),a.Ic(8," Get a list of all API resources. "),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(9,"div",0),a.Ub(10,"div",7),a.Ub(11,"app-list-view",8,9),a.gc("search",(function(e){return t.getApiResources(e)})),a.Tb(),a.Tb(),a.Tb(),a.Gc(13,F,1,1,"ng-template",null,10,a.Hc),a.Gc(15,G,4,3,"ng-template",null,11,a.Hc)),2&e&&(a.Bb(6),a.Kc("API Resources List (",t.count,")"),a.Bb(5),a.oc("clientSide",!1)("columns",t.columns)("rows",t.rows)("count",t.count)("rowsPerPage",15)("defaultSortField","name")("defaultSortDirection","Asc"))},directives:[u.a,s.m,r.g],encapsulation:2}),e})(),j=(()=>{class e{constructor(e){this._api=e}getApiResource(e){return this._apiResource||(this._apiResource=new h.a,this._api.getApiResource(e).subscribe(e=>{e.secrets=e.secrets||[],e.scopes=e.scopes.sort((e,t)=>e.name>t.name?1:-1),e.scopes.forEach(e=>{e.isOpen=!1,e.userClaims=e.userClaims||[]}),this._apiResource.next(e),this._apiResource.complete()})),this._apiResource}updateApiResource(e){return this._api.updateApiResource(e.id,new l.t({displayName:e.displayName,description:e.description,enabled:e.enabled})).pipe(Object(g.a)(t=>{this._apiResource.next(e),this._apiResource.complete()}))}addApiResourceClaim(e,t){const i=this.getApiResource(e),s=this._api.addApiResourceClaims(e,[t.name]);return Object(f.a)([i,s]).pipe(Object(g.a)(e=>({apiResource:e[0]}))).pipe(Object(g.a)(e=>{e.apiResource.allowedClaims.push(t.name),this._apiResource.next(e.apiResource),this._apiResource.complete()}))}addApiResourceSecret(e,t){const i=this.getApiResource(e),s=this._api.addApiResourceSecret(e,t);return Object(f.a)([i,s]).pipe(Object(g.a)(e=>({apiResource:e[0],addedSecret:e[1]}))).pipe(Object(g.a)(e=>{e.addedSecret.valueText="Value is hidden",e.apiResource.secrets.push(e.addedSecret),this._apiResource.next(e.apiResource),this._apiResource.complete()}))}deleteApiResourceSecret(e,t){return this.getApiResource(e).subscribe(e=>{const i=e.secrets.indexOf(t);i>-1&&e.secrets.splice(i,1),this._apiResource.next(e),this._apiResource.complete()}),this._api.deleteApiResourceSecret(e,t.id)}deleteApiResourceClaim(e,t){return this.getApiResource(e).subscribe(e=>{const i=e.allowedClaims.indexOf(t.name);i>-1&&e.allowedClaims.splice(i,1),this._apiResource.next(e),this._apiResource.complete()}),this._api.deleteApiResourceClaim(e,t.name)}addApiResourceScope(e,t){const i=this.getApiResource(e);t.showInDiscoveryDocument=!0;const s=this._api.addApiResourceScope(e,t);return Object(f.a)([i,s]).pipe(Object(g.a)(e=>({apiResource:e[0],addedScope:e[1]}))).pipe(Object(g.a)(e=>{e.apiResource.scopes.push(e.addedScope),e.apiResource.scopes=e.apiResource.scopes.sort((e,t)=>e.name>t.name?1:-1),this._apiResource.next(e.apiResource),this._apiResource.complete()}))}updateApiResourceScope(e,t){const i=this.getApiResource(e),s=this._api.updateApiResourceScope(e,t.id,new l.u({displayName:t.displayName,description:t.description,emphasize:t.emphasize,showInDiscoveryDocument:t.showInDiscoveryDocument}));return Object(f.a)([i,s]).pipe(Object(g.a)(e=>({apiResource:e[0],updatedScope:e[1]}))).pipe(Object(g.a)(e=>{let i=e.apiResource.scopes.find(e=>e.id===t.id);i&&(i=t),this._apiResource.next(e.apiResource),this._apiResource.complete()}))}deleteApiResourceScope(e,t){return this.getApiResource(e).subscribe(e=>{const i=e.scopes.findIndex(e=>e.id===t);i>-1&&e.scopes.splice(i,1),this._apiResource.next(e),this._apiResource.complete()}),this._api.deleteApiResourceScope(e,t)}addApiResourceScopeClaim(e,t,i){return this.getApiResource(e).subscribe(e=>{e.scopes.find(e=>e.id===t).userClaims.push(i.name),this._apiResource.next(e),this._apiResource.complete()}),this._api.addApiResourceScopeClaims(e,t,[i.name])}deleteApiResourceScopeClaim(e,t,i){return this.getApiResource(e).subscribe(e=>{const s=e.scopes.find(e=>e.id===t),o=s.userClaims.indexOf(i.name);o>-1&&s.userClaims.splice(o,1),this._apiResource.next(e),this._apiResource.complete()}),this._api.deleteApiResourceScopeClaim(e,t,i.name)}deleteApiResource(e){return this._api.deleteApiResource(e)}getAllClaims(){return this._allClaims||(this._allClaims=new h.a,this._api.getClaimTypes(void 0,1,2147483647,"name+",void 0).subscribe(e=>{this._allClaims.next(e.items),this._allClaims.complete()})),this._allClaims}}return e.\u0275fac=function(t){return new(t||e)(a.cc(l.n))},e.\u0275prov=a.Kb({token:e,factory:e.\u0275fac}),e})();const E=function(){return["details"]},q=function(){return["scopes"]},H=function(){return["claims"]},$=function(){return["secrets"]};let K=(()=>{class e{constructor(e,t){this._route=e,this._apiResourceStore=t}ngOnInit(){this._getDataSubscription=this._apiResourceStore.getApiResource(+this._route.snapshot.params.id).subscribe(e=>{this.apiResource=e})}ngOnDestroy(){this._getDataSubscription&&this._getDataSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(r.a),a.Ob(j))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-api-resource-edit"]],features:[a.Ab([j])],decls:24,vars:9,consts:[[1,"row"],[1,"col-12"],[1,"card","m-b-30","m-t-30"],[1,"card-body"],[1,"mt-0","header-title"],[1,"text-muted","m-b-30","font-14"],["role","tablist",1,"nav","nav-tabs","justify-content-start"],[1,"nav-item"],["routerLinkActive","active","role","tab","id","api-resource-details-tab",1,"nav-link",3,"routerLink"],["routerLinkActive","active","role","tab","id","api-resource-scopes-tab",1,"nav-link",3,"routerLink"],["routerLinkActive","active","role","tab","id","api-resource-resources-tab",1,"nav-link",3,"routerLink"],["routerLinkActive","active","role","tab","id","api-resource-secrets-tab",1,"nav-link",3,"routerLink"],[1,"tab-content","mt-2"],["role","tabpanel",1,"tab-pane","active"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Ub(1,"div",1),a.Ub(2,"div",2),a.Ub(3,"div",3),a.Ub(4,"h4",4),a.Ic(5),a.Tb(),a.Ub(6,"p",5),a.Ic(7," Here you can modify some properties of an API resource. "),a.Tb(),a.Ub(8,"ul",6),a.Ub(9,"li",7),a.Ub(10,"a",8),a.Ic(11," Details "),a.Tb(),a.Tb(),a.Ub(12,"li",7),a.Ub(13,"a",9),a.Ic(14," Scopes "),a.Tb(),a.Tb(),a.Ub(15,"li",7),a.Ub(16,"a",10),a.Ic(17," Claims "),a.Tb(),a.Tb(),a.Ub(18,"li",7),a.Ub(19,"a",11),a.Ic(20," Secrets "),a.Tb(),a.Tb(),a.Tb(),a.Ub(21,"div",12),a.Ub(22,"div",13),a.Pb(23,"router-outlet"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb()),2&e&&(a.Bb(5),a.Jc((null==t.apiResource?null:t.apiResource.displayName)||(null==t.apiResource?null:t.apiResource.name)),a.Bb(5),a.oc("routerLink",a.rc(5,E)),a.Bb(3),a.oc("routerLink",a.rc(6,q)),a.Bb(3),a.oc("routerLink",a.rc(7,H)),a.Bb(3),a.oc("routerLink",a.rc(8,$)))},directives:[r.g,r.f,r.i],encapsulation:2}),e})();function J(e,t){1&e&&(a.Ub(0,"p"),a.Ic(1,"Loading API resource data..."),a.Tb())}function Q(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",25),a.gc("click",(function(){return a.zc(e),a.ic(2),a.xc(1).fire()})),a.Ic(1," Delete "),a.Tb()}}const Y=function(e){return{"was-validated":e}};function W(e,t){if(1&e){const e=a.Vb();a.Ub(0,"form",4,5),a.gc("ngSubmit",(function(){a.zc(e);const t=a.xc(1),i=a.ic();return t.form.valid&&i.update()})),a.Ub(2,"div",6),a.Ub(3,"label",7),a.Ic(4," Resource Id "),a.Tb(),a.Ub(5,"div",8),a.Ub(6,"span",9),a.Ic(7),a.Tb(),a.Tb(),a.Tb(),a.Ub(8,"div",6),a.Ub(9,"label",10),a.Ic(10," Display Name "),a.Tb(),a.Ub(11,"div",11),a.Ub(12,"input",12,13),a.gc("ngModelChange",(function(t){return a.zc(e),a.ic().apiResource.displayName=t})),a.Tb(),a.Tb(),a.Tb(),a.Ub(14,"div",6),a.Ub(15,"label",14),a.Ic(16,"Description"),a.Tb(),a.Ub(17,"div",11),a.Ub(18,"textarea",15,16),a.gc("ngModelChange",(function(t){return a.zc(e),a.ic().apiResource.description=t})),a.Ic(20,"            "),a.Tb(),a.Tb(),a.Tb(),a.Ub(21,"div",6),a.Ub(22,"label",17),a.Ic(23," Enabled "),a.Tb(),a.Ub(24,"div",11),a.Ub(25,"div",18),a.Ub(26,"input",19,20),a.gc("ngModelChange",(function(t){return a.zc(e),a.ic().apiResource.enabled=t})),a.Tb(),a.Pb(28,"label",21),a.Tb(),a.Tb(),a.Tb(),a.Ub(29,"div",22),a.Ub(30,"div"),a.Ub(31,"button",23),a.Ic(32," Save Changes "),a.Tb(),a.Gc(33,Q,2,0,"button",24),a.Tb(),a.Tb(),a.Tb()}if(2&e){const e=a.xc(1),t=a.ic();a.oc("ngClass",a.sc(6,Y,e.submitted)),a.Bb(7),a.Kc(" ",t.apiResource.name," "),a.Bb(5),a.oc("ngModel",t.apiResource.displayName),a.Bb(6),a.oc("ngModel",t.apiResource.description),a.Bb(8),a.oc("ngModel",t.apiResource.enabled),a.Bb(7),a.oc("ngIf",!t.apiResource.nonEditable)}}let X=(()=>{class e{constructor(e,t,i,s){this._route=e,this._apiResourceStore=t,this._toast=i,this._router=s}ngOnInit(){this._getDataSubscription=this._apiResourceStore.getApiResource(+this._route.parent.snapshot.params.id).subscribe(e=>{this.apiResource=e})}ngOnDestroy(){this._getDataSubscription&&this._getDataSubscription.unsubscribe(),this._updateApiResourceSubscription&&this._updateApiResourceSubscription.unsubscribe(),this._deleteApiResourceSubscription&&this._deleteApiResourceSubscription.unsubscribe()}delete(){this._deleteApiResourceSubscription=this._apiResourceStore.deleteApiResource(this.apiResource.id).subscribe(e=>{this._toast.showSuccess(`API resource '${this.apiResource.name}' was deleted successfully.`),this._router.navigate(["../../"],{relativeTo:this._route})})}update(){this._updateApiResourceSubscription=this._apiResourceStore.updateApiResource(this.apiResource).subscribe(e=>{this._toast.showSuccess(`API resource '${this.apiResource.name}' was updated successfully.`)})}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(r.a),a.Ob(j),a.Ob(_.a),a.Ob(r.d))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-api-resource-details"]],decls:4,vars:4,consts:[["title","Delete?","type","warning",3,"text","showCancelButton","confirm"],["deleteAlert",""],[4,"ngIf"],["class","needs-validation","novalidate","",3,"ngClass","ngSubmit",4,"ngIf"],["novalidate","",1,"needs-validation",3,"ngClass","ngSubmit"],["form","ngForm"],[1,"form-group","row"],["for","api-resource-id",1,"col-sm-2","col-form-label"],[1,"col-sm-10","col-form-label"],["id","api-resource-id","name","api-resource-id",1,"col-form-label"],["for","api-resource-display-name",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["type","text","id","api-resource-display-name","name","api-resource-display-name","maxlength","200",1,"form-control",3,"ngModel","ngModelChange"],["apiResourceName","ngModel"],["for","api-resource-description",1,"col-sm-2","col-form-label"],["id","api-resource-description","name","api-resource-description","rows","3","maxlength","1000",1,"form-control",3,"ngModel","ngModelChange"],["description","ngModel"],["for","api-resource-enabled",1,"col-sm-2","col-form-label"],[1,"form-check","col-form-label","custom-control","custom-checkbox"],["type","checkbox","id","api-resource-enabled","name","api-resource-enabled",1,"form-check-input","custom-control-input",3,"ngModel","ngModelChange"],["enabled","ngModel"],["for","api-resource-enabled",1,"custom-control-label"],[1,"form-group"],["type","submit",1,"btn","btn-primary","m-r-5"],["type","button","class","btn btn-danger m-r-5 float-right",3,"click",4,"ngIf"],["type","button",1,"btn","btn-danger","m-r-5","float-right",3,"click"]],template:function(e,t){1&e&&(a.Ub(0,"swal",0,1),a.gc("confirm",(function(){return t.delete()})),a.Tb(),a.Gc(2,J,2,0,"p",2),a.Gc(3,W,34,8,"form",3)),2&e&&(a.oc("text","API resource '"+(null==t.apiResource?null:t.apiResource.name)+"' will be deleted permanently. This action cannot be reversed.")("showCancelButton",!0),a.Bb(2),a.oc("ngIf",!t.apiResource),a.Bb(1),a.oc("ngIf",t.apiResource))},directives:[c.a,s.m,o.y,o.n,o.o,s.k,o.b,o.j,o.m,o.p,o.a],encapsulation:2}),e})();var Z=i("xWML");const ee=["deleteAlert"];function te(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",26),a.gc("click",(function(){a.zc(e);const t=a.ic();return t.deletePrompt(t.scope)})),a.Ic(1," Delete "),a.Tb()}}const ie=function(e){return{"was-validated":e}};let se=(()=>{class e{constructor(e,t,i,s){this._route=e,this._apiResourceStore=t,this._toast=i,this.utilities=s,this.scope=new l.a,this.editable=!1,this.discriminator=this.utilities.newGuid()}ngOnInit(){this._apiResourceId=+this._route.parent.snapshot.params.id}ngOnDestroy(){this._getDataSubscription&&this._getDataSubscription.unsubscribe(),this._deleteApiResourceSubscription&&this._deleteApiResourceSubscription.unsubscribe(),this._updateApiResourceSubscription&&this._updateApiResourceSubscription.unsubscribe()}deletePrompt(e){this.scope=e,setTimeout(()=>this._deleteAlert.fire(),0)}delete(){this._deleteApiResourceSubscription=this._apiResourceStore.deleteApiResourceScope(this._apiResourceId,this.scope.id).subscribe(e=>{this._toast.showSuccess(`API scope '${this.scope.name}' was deleted successfully.`)})}update(){this._updateApiResourceSubscription=this._apiResourceStore.updateApiResourceScope(this._apiResourceId,this.scope).subscribe(e=>{this._toast.showSuccess(`API scope '${this.scope.name}' was updated successfully.`)})}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(r.a),a.Ob(j),a.Ob(_.a),a.Ob(Z.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-api-resource-scope-details"]],viewQuery:function(e,t){var i;1&e&&a.Nc(ee,!0),2&e&&a.wc(i=a.hc())&&(t._deleteAlert=i.first)},inputs:{scope:"scope",editable:"editable"},decls:44,vars:20,consts:[["title","Delete?","type","warning",3,"text","showCancelButton","confirm"],["deleteAlert",""],["novalidate","",1,"needs-validation","mt-3",3,"ngClass","ngSubmit"],["form","ngForm"],[1,"form-group","row"],["for","scope-id",1,"col-sm-2","col-form-label"],[1,"col-sm-10","col-form-label"],["id","scope-id","name","scope-id",1,"col-form-label"],["for","scope-display-name",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["type","text","maxlength","200",1,"form-control",3,"id","name","ngModel","ngModelChange"],["scopeName","ngModel"],["for","scope-description",1,"col-sm-2","col-form-label"],["rows","3","maxlength","1000",1,"form-control",3,"id","name","ngModel","ngModelChange"],["description","ngModel"],["for","scope-show-in-dd",1,"col-sm-2","col-form-label"],[1,"form-check","col-form-label","custom-control","custom-checkbox"],["type","checkbox",1,"form-check-input","custom-control-input",3,"id","name","ngModel","ngModelChange"],["showInDiscoveryDocument","ngModel"],[1,"custom-control-label",3,"for"],["for","scope-emphasize",1,"col-sm-2","col-form-label"],["type","checkbox","name","scope-emphasize",1,"form-check-input","custom-control-input",3,"id","ngModel","ngModelChange"],["emphasize","ngModel"],[1,"form-group"],["type","submit",1,"btn","btn-primary","m-r-5"],["type","button","class","btn btn-danger m-r-5 float-right",3,"click",4,"ngIf"],["type","button",1,"btn","btn-danger","m-r-5","float-right",3,"click"]],template:function(e,t){if(1&e){const e=a.Vb();a.Ub(0,"swal",0,1),a.gc("confirm",(function(){return t.delete()})),a.Tb(),a.Ub(2,"form",2,3),a.gc("ngSubmit",(function(){return a.zc(e),a.xc(3).form.valid&&t.update()})),a.Ub(4,"div",4),a.Ub(5,"label",5),a.Ic(6," Scope Id "),a.Tb(),a.Ub(7,"div",6),a.Ub(8,"span",7),a.Ic(9),a.Tb(),a.Tb(),a.Tb(),a.Ub(10,"div",4),a.Ub(11,"label",8),a.Ic(12," Display Name "),a.Tb(),a.Ub(13,"div",9),a.Ub(14,"input",10,11),a.gc("ngModelChange",(function(e){return t.scope.displayName=e})),a.Tb(),a.Tb(),a.Tb(),a.Ub(16,"div",4),a.Ub(17,"label",12),a.Ic(18," Description "),a.Tb(),a.Ub(19,"div",9),a.Ub(20,"textarea",13,14),a.gc("ngModelChange",(function(e){return t.scope.description=e})),a.Ic(22,"            "),a.Tb(),a.Tb(),a.Tb(),a.Ub(23,"div",4),a.Ub(24,"label",15),a.Ic(25,"Show in Discovery Document"),a.Tb(),a.Ub(26,"div",9),a.Ub(27,"div",16),a.Ub(28,"input",17,18),a.gc("ngModelChange",(function(e){return t.scope.showInDiscoveryDocument=e})),a.Tb(),a.Pb(30,"label",19),a.Tb(),a.Tb(),a.Tb(),a.Ub(31,"div",4),a.Ub(32,"label",20),a.Ic(33,"Emphasize"),a.Tb(),a.Ub(34,"div",9),a.Ub(35,"div",16),a.Ub(36,"input",21,22),a.gc("ngModelChange",(function(e){return t.scope.emphasize=e})),a.Tb(),a.Pb(38,"label",19),a.Tb(),a.Tb(),a.Tb(),a.Ub(39,"div",23),a.Ub(40,"div"),a.Ub(41,"button",24),a.Ic(42," Save Changes "),a.Tb(),a.Gc(43,te,2,0,"button",25),a.Tb(),a.Tb(),a.Tb()}if(2&e){const e=a.xc(3);a.oc("text","Scope '"+(null==t.scope?null:t.scope.name)+"' will be deleted permanently. This action cannot be reversed.")("showCancelButton",!0),a.Bb(2),a.oc("ngClass",a.sc(18,ie,e.submitted)),a.Bb(7),a.Kc(" ",t.scope.name," "),a.Bb(5),a.oc("id","scope-display-name-"+t.discriminator)("name","scope-display-name-"+t.discriminator)("ngModel",t.scope.displayName),a.Bb(6),a.oc("id","scope-description-"+t.discriminator)("name","scope-description-"+t.discriminator)("ngModel",t.scope.description),a.Bb(8),a.oc("id","scope-show-in-dd-"+t.discriminator)("name","scope-show-in-dd-"+t.discriminator)("ngModel",t.scope.showInDiscoveryDocument),a.Bb(2),a.oc("for","scope-show-in-dd-"+t.discriminator),a.Bb(6),a.oc("id","scope-emphasize"+t.discriminator)("ngModel",t.scope.emphasize),a.Bb(2),a.oc("for","scope-emphasize"+t.discriminator),a.Bb(5),a.oc("ngIf",t.editable)}},directives:[c.a,o.y,o.n,o.o,s.k,o.b,o.j,o.m,o.p,o.a,s.m],encapsulation:2}),e})();function oe(e,t){1&e&&(a.Ub(0,"p"),a.Ic(1,"Loading scope claims..."),a.Tb())}const ce=function(){return{sourceListTitle:"Available Claims",emptySourceListMessage:"There are no available claims to assign.",destinationListTitle:"Assigned Claims",emptyDestinationListMessage:"There are no claims assigned to this scope."}};function ne(e,t){if(1&e){const e=a.Vb();a.Ub(0,"app-transfer-lists",2,3),a.gc("itemAdded",(function(t){return a.zc(e),a.ic().addClaim(t)}))("itemRemoved",(function(t){return a.zc(e),a.ic().removeClaim(t)})),a.Tb()}if(2&e){const e=a.ic();a.oc("source",e.availableClaims)("destination",e.selectedClaims)("titlePropertyName","name")("subtitlePropertyName","description")("options",a.rc(5,ce))}}let re=(()=>{class e{constructor(e,t){this._route=e,this._apiResourceStore=t,this.scope=new l.a}ngOnInit(){this._apiResourceId=+this._route.parent.snapshot.params.id,this._apiResourceStore.getAllClaims().subscribe(e=>{const t=this.scope.userClaims||[];this.availableClaims=e.filter(e=>!t.includes(e.name)),this.selectedClaims=e.filter(e=>t.includes(e.name))})}ngOnDestroy(){this._getDataSubscription&&this._getDataSubscription.unsubscribe(),this._addApiResourceScopeClaim&&this._addApiResourceScopeClaim.unsubscribe(),this._deleteApiResourceScopeClaim&&this._deleteApiResourceScopeClaim.unsubscribe()}addClaim(e){this._addApiResourceScopeClaim=this._apiResourceStore.addApiResourceScopeClaim(this._apiResourceId,this.scope.id,e).subscribe()}removeClaim(e){this._deleteApiResourceScopeClaim=this._apiResourceStore.deleteApiResourceScopeClaim(this._apiResourceId,this.scope.id,e).subscribe()}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(r.a),a.Ob(j))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-api-resource-scope-claims"]],inputs:{scope:"scope"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"source","destination","titlePropertyName","subtitlePropertyName","options","itemAdded","itemRemoved",4,"ngIf"],[3,"source","destination","titlePropertyName","subtitlePropertyName","options","itemAdded","itemRemoved"],["transferList",""]],template:function(e,t){1&e&&(a.Gc(0,oe,2,0,"p",0),a.Gc(1,ne,2,6,"app-transfer-lists",1)),2&e&&(a.oc("ngIf",!t.availableClaims),a.Bb(1),a.oc("ngIf",t.availableClaims))},directives:[s.m,k.a],encapsulation:2}),e})();function ae(e,t){1&e&&(a.Ub(0,"p"),a.Ic(1,"Loading API resource scopes..."),a.Tb())}function le(e,t){if(1&e&&a.Pb(0,"app-api-resource-scope-details",14),2&e){const e=a.ic().$implicit,t=a.ic();a.oc("scope",e)("editable",!t.apiResource.nonEditable)}}function ue(e,t){if(1&e&&a.Pb(0,"app-api-resource-scope-claims",15),2&e){const e=a.ic().$implicit;a.oc("scope",e)}}const de=function(e){return{collapsed:e}},pe=function(e){return{show:e}},be=function(e){return{"active btn btn-secondary":e}};function me(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",4),a.Ub(1,"div",5),a.Ub(2,"button",6),a.gc("click",(function(){a.zc(e);const i=t.index;return a.ic().togglePanel(i)})),a.Ic(3),a.Tb(),a.Tb(),a.Ub(4,"div",7),a.Ub(5,"div",8),a.Ub(6,"ul",9),a.Ub(7,"li",10),a.Ub(8,"a",11),a.gc("click",(function(){return a.zc(e),a.ic().detailsActive=!0})),a.Ic(9," Details "),a.Tb(),a.Tb(),a.Ub(10,"li",10),a.Ub(11,"a",11),a.gc("click",(function(){return a.zc(e),a.ic().detailsActive=!1})),a.Ic(12," Claims "),a.Tb(),a.Tb(),a.Tb(),a.Gc(13,le,1,2,"app-api-resource-scope-details",12),a.Gc(14,ue,1,1,"app-api-resource-scope-claims",13),a.Tb(),a.Tb(),a.Tb()}if(2&e){const e=t.$implicit,i=a.ic();a.Bb(1),a.oc("id","heading"+e.id),a.Bb(1),a.oc("ngClass",a.sc(13,de,!e.isOpen)),a.Cb("data-target","#collapse-"+e.id)("aria-expanded",e.isOpen)("aria-controls","collapse-"+e.id),a.Bb(1),a.Kc(" ",e.name," "),a.Bb(1),a.oc("id","collapse-"+e.id)("ngClass",a.sc(15,pe,e.isOpen)),a.Cb("aria-labelledby","heading"+e.id),a.Bb(4),a.oc("ngClass",a.sc(17,be,i.detailsActive)),a.Bb(3),a.oc("ngClass",a.sc(19,be,!i.detailsActive)),a.Bb(2),a.oc("ngIf",i.detailsActive),a.Bb(1),a.oc("ngIf",!i.detailsActive)}}const he=function(){return["add"]};let fe=(()=>{class e{constructor(e,t,i,s){this._route=e,this._apiResourceStore=t,this._toast=i,this._router=s,this.detailsActive=!0}ngOnInit(){this._getDataSubscription=this._apiResourceStore.getApiResource(+this._route.parent.snapshot.params.id).subscribe(e=>{this.apiResource=e})}ngOnDestroy(){this._getDataSubscription&&this._getDataSubscription.unsubscribe()}togglePanel(e){this.apiResource.scopes.forEach((t,i)=>{t.isOpen=e===i&&!t.isOpen})}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(r.a),a.Ob(j),a.Ob(_.a),a.Ob(r.d))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-api-resource-scopes"]],decls:5,vars:4,consts:[[4,"ngIf"],["id","scopes-accordion",1,"api-resource-scopes","accordion","mb-3"],["class","card",4,"ngFor","ngForOf"],[1,"btn","btn-primary","waves-effect","waves-light","m-r-5",3,"routerLink"],[1,"card"],[1,"card-header",3,"id"],["type","button","data-toggle","collapse",1,"btn","btn-link",3,"ngClass","click"],["data-parent","#scopes-accordion",1,"collapse",3,"id","ngClass"],[1,"card-body"],[1,"nav","nav-pills"],[1,"nav-item"],["href","javascript:void(0);",1,"nav-link",3,"ngClass","click"],[3,"scope","editable",4,"ngIf"],[3,"scope",4,"ngIf"],[3,"scope","editable"],[3,"scope"]],template:function(e,t){1&e&&(a.Gc(0,ae,2,0,"p",0),a.Ub(1,"div",1),a.Gc(2,me,15,21,"div",2),a.Tb(),a.Ub(3,"a",3),a.Ic(4," Add Scope\n"),a.Tb()),2&e&&(a.oc("ngIf",!t.apiResource),a.Bb(2),a.oc("ngForOf",null==t.apiResource?null:t.apiResource.scopes),a.Bb(1),a.oc("routerLink",a.rc(3,he)))},directives:[s.m,s.l,r.g,s.k,se,re],encapsulation:2}),e})();function ge(e,t){1&e&&(a.Ub(0,"p"),a.Ic(1,"Loading scope claims..."),a.Tb())}const ve=function(){return{sourceListTitle:"Available Claims",emptySourceListMessage:"There are no available claims to assign.",destinationListTitle:"Assigned Claims",emptyDestinationListMessage:"There are no claims assigned to this resource."}};function ye(e,t){if(1&e){const e=a.Vb();a.Ub(0,"app-transfer-lists",2,3),a.gc("itemAdded",(function(t){return a.zc(e),a.ic().addClaim(t)}))("itemRemoved",(function(t){return a.zc(e),a.ic().removeClaim(t)})),a.Tb()}if(2&e){const e=a.ic();a.oc("source",e.availableClaims)("destination",e.selectedClaims)("titlePropertyName","name")("subtitlePropertyName","description")("options",a.rc(5,ve))}}let Re=(()=>{class e{constructor(e,t){this._route=e,this._apiResourceStore=t}ngOnInit(){this._apiResourceId=+this._route.parent.snapshot.params.id;const e=this._apiResourceStore.getApiResource(this._apiResourceId),t=this._apiResourceStore.getAllClaims();this._getDataSubscription=Object(f.a)([e,t]).pipe(Object(g.a)(e=>({apiResource:e[0],allClaims:e[1]}))).subscribe(e=>{const t=e.apiResource.allowedClaims,i=e.allClaims;this.availableClaims=i.filter(e=>!t.includes(e.name)),this.selectedClaims=i.filter(e=>t.includes(e.name))})}ngOnDestroy(){this._getDataSubscription&&this._getDataSubscription.unsubscribe(),this._addApiResourceClaim&&this._addApiResourceClaim.unsubscribe(),this._deleteApiResourceClaim&&this._deleteApiResourceClaim.unsubscribe()}addClaim(e){this._addApiResourceClaim=this._apiResourceStore.addApiResourceClaim(this._apiResourceId,e).subscribe()}removeClaim(e){this._deleteApiResourceClaim=this._apiResourceStore.deleteApiResourceClaim(this._apiResourceId,e).subscribe()}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(r.a),a.Ob(j))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-api-resource-claims"]],decls:2,vars:2,consts:[[4,"ngIf"],[3,"source","destination","titlePropertyName","subtitlePropertyName","options","itemAdded","itemRemoved",4,"ngIf"],[3,"source","destination","titlePropertyName","subtitlePropertyName","options","itemAdded","itemRemoved"],["transferList",""]],template:function(e,t){1&e&&(a.Gc(0,ge,2,0,"p",0),a.Gc(1,ye,2,6,"app-transfer-lists",1)),2&e&&(a.oc("ngIf",!t.availableClaims),a.Bb(1),a.oc("ngIf",t.availableClaims))},directives:[s.m,k.a],encapsulation:2}),e})();var Te=i("wWpK"),Ie=i("zVEd"),_e=i("2bU0");function Se(e,t){1&e&&(a.Ub(0,"p"),a.Ic(1,"Loading claim types..."),a.Tb())}const Ce=function(){return{sourceListTitle:"Available Claims",emptySourceListMessage:"There are no available claims to assign.",destinationListTitle:"Assigned Claims",emptyDestinationListMessage:"There are no claims assigned to this resource."}};function Ue(e,t){if(1&e){const e=a.Vb();a.Ub(0,"app-transfer-lists",2,3),a.gc("itemAdded",(function(t){return a.zc(e),a.ic().addClaim(t)}))("itemRemoved",(function(t){return a.zc(e),a.ic().removeClaim(t)})),a.Tb()}if(2&e){const e=a.ic();a.oc("source",e.availableClaims)("destination",e.selectedClaims)("titlePropertyName","name")("subtitlePropertyName","description")("options",a.rc(5,Ce))}}let we=(()=>{class e extends _e.a{constructor(e){super(),this._api=e}ngOnInit(){this._api.getClaimTypes(void 0,1,2147483647,"name+",void 0).subscribe(e=>{this._selectedClaimsControl=this.data.form.controls.userClaims,this.availableClaims=e.items.filter(e=>!this._selectedClaimsControl.value.includes(e.name)),this.selectedClaims=e.items.filter(e=>this._selectedClaimsControl.value.includes(e.name))})}ngOnDestroy(){this._getDataSubscription&&this._getDataSubscription.unsubscribe(),this._addApiResourceScopeClaim&&this._addApiResourceScopeClaim.unsubscribe()}addClaim(e){const t=this._selectedClaimsControl.value;t.push(e.name),this._selectedClaimsControl.setValue(t)}removeClaim(e){const t=this._selectedClaimsControl.value,i=t.indexOf(e.name,0);i>-1&&t.splice(i,1),this._selectedClaimsControl.setValue(t)}isValid(){return!0}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(l.n))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-user-claims-step"]],features:[a.yb],decls:2,vars:2,consts:[[4,"ngIf"],[3,"source","destination","titlePropertyName","subtitlePropertyName","options","itemAdded","itemRemoved",4,"ngIf"],[3,"source","destination","titlePropertyName","subtitlePropertyName","options","itemAdded","itemRemoved"],["transferList",""]],template:function(e,t){1&e&&(a.Gc(0,Se,2,0,"p",0),a.Gc(1,Ue,2,6,"app-transfer-lists",1)),2&e&&(a.oc("ngIf",!t.availableClaims),a.Bb(1),a.oc("ngIf",t.availableClaims))},directives:[s.m,k.a],encapsulation:2}),e})();function Ae(e,t){1&e&&(a.Ub(0,"div",19),a.Ic(1," Please select the type of the resource. "),a.Tb())}const xe=function(e){return{invalid:e}};function ke(e,t){if(1&e&&(a.Ub(0,"div",2),a.Ub(1,"label",14),a.Ic(2," Resource Type "),a.Tb(),a.Ub(3,"div",5),a.Ub(4,"select",15),a.Ub(5,"option",16),a.Ic(6,"Please select the type of the resource"),a.Tb(),a.Ub(7,"option",17),a.Ic(8,"API Resource"),a.Tb(),a.Ub(9,"option",18),a.Ic(10,"Identity Resource"),a.Tb(),a.Tb(),a.Gc(11,Ae,2,0,"div",8),a.Tb(),a.Tb()),2&e){const e=a.ic();a.Bb(4),a.oc("ngClass",a.sc(3,xe,e.hostFormValidated&&e.type.invalid))("formControlName","type"),a.Bb(7),a.oc("ngIf",e.hostFormValidated&&e.type.invalid)}}function ze(e,t){1&e&&(a.Ub(0,"div",19),a.Ic(1," Field 'Id' is required. "),a.Tb())}let Oe=(()=>{class e extends _e.a{constructor(){super()}get displayType(){return this.data.displayType}get type(){return this.data.form.get("type")}get name(){return this.data.form.get("name")}get displayName(){return this.data.form.get("displayName")}get description(){return this.data.form.get("description")}ngOnInit(){this.data.navigationOrigin&&this.data.form.get("type").setValue(this.data.navigationOrigin)}isValid(){return this.name.valid&&this.displayName.valid&&this.description.valid&&this.type.valid}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Ib({type:e,selectors:[["app-basic-info-step"]],features:[a.yb],decls:24,vars:12,consts:[[3,"formGroup"],["class","form-group row",4,"ngIf"],[1,"form-group","row"],["for","resource-name",1,"col-sm-2","col-form-label"],["title","The unique identifier for this resource.",1,"material-icons","align-middle"],[1,"col-sm-10"],[1,"input-group"],["type","text","id","resource-name","name","resource-name","required","","maxlength","200",1,"form-control",3,"ngClass","formControlName"],["class","form-control-feedback text-danger",4,"ngIf"],["for","resource-display-name",1,"col-sm-2","col-form-label"],["title","Application name that will be seen on consent screens.",1,"material-icons","align-middle"],["type","text","id","resource-display-name","name","resource-display-name","maxlength","200",1,"form-control",3,"ngClass","formControlName"],["for","description",1,"col-sm-2","col-form-label"],["rows","3","type","text","id","description","name","description","maxlength","1000",1,"form-control",3,"formControlName"],["for","resource-type",1,"col-sm-2","col-form-label"],["id","resource-type","name","resource-type","required","",1,"form-control","custom-select",3,"ngClass","formControlName"],["value",""],["value","api"],["value","identity"],[1,"form-control-feedback","text-danger"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Gc(1,ke,12,5,"div",1),a.Ub(2,"div",2),a.Ub(3,"label",3),a.Ub(4,"i",4),a.Ic(5," info "),a.Tb(),a.Ic(6," Id (*) "),a.Tb(),a.Ub(7,"div",5),a.Ub(8,"div",6),a.Pb(9,"input",7),a.Tb(),a.Gc(10,ze,2,0,"div",8),a.Tb(),a.Tb(),a.Ub(11,"div",2),a.Ub(12,"label",9),a.Ub(13,"i",10),a.Ic(14," info "),a.Tb(),a.Ic(15," Display Name "),a.Tb(),a.Ub(16,"div",5),a.Pb(17,"input",11),a.Tb(),a.Tb(),a.Ub(18,"div",2),a.Ub(19,"label",12),a.Ic(20,"Description"),a.Tb(),a.Ub(21,"div",5),a.Ub(22,"textarea",13),a.Ic(23,"            "),a.Tb(),a.Tb(),a.Tb(),a.Tb()),2&e&&(a.oc("formGroup",t.data.form),a.Bb(1),a.oc("ngIf",t.displayType),a.Bb(8),a.oc("ngClass",a.sc(8,xe,t.hostFormValidated&&t.name.invalid))("formControlName","name"),a.Bb(1),a.oc("ngIf",t.hostFormValidated&&t.name.invalid),a.Bb(7),a.oc("ngClass",a.sc(10,xe,t.hostFormValidated&&t.displayName.invalid))("formControlName","displayName"),a.Bb(5),a.oc("formControlName","description"))},directives:[o.n,o.h,s.m,o.b,o.u,o.j,s.k,o.m,o.f,o.v,o.q,o.x],encapsulation:2}),e})();const De=function(e){return{"d-none":e}};function Be(e,t){if(1&e&&(a.Ub(0,"h3",13),a.Ic(1),a.Tb()),2&e){const e=t.$implicit,i=t.index,s=a.ic();a.oc("ngClass",a.sc(4,De,i!==s.wizardStepIndex)),a.Bb(1),a.Mc(" Step ",s.wizardStepIndex+1," of ",s.apiResourceSteps.length," - ",e.title," ")}}function Me(e,t){}function Pe(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",14),a.gc("click",(function(){return a.zc(e),a.ic().goToPreviousStep()})),a.Ic(1," Previous Step "),a.Tb()}}function Ne(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",15),a.gc("click",(function(){return a.zc(e),a.ic().goToNextStep()})),a.Ic(1," Next Step "),a.Tb()}}function Fe(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",16),a.gc("click",(function(){return a.zc(e),a.ic().saveApiResourceScope()})),a.Ic(1," Save "),a.Tb()}}const Le=function(e){return{"was-validated":e}};let Ge=(()=>{class e{constructor(e,t,i,s,o,c,n){this._componentFactoryResolver=e,this._formBuilder=t,this._changeDetectionRef=i,this._apiResourceStore=s,this._toast=o,this._router=c,this._route=n,this.wizardStepIndex=0,this.apiResourceSteps=[],this.hostFormValidated=!1,this.resource=new l.e}get canGoFront(){return this.wizardStepIndex>=0&&this.wizardStepIndex<this.apiResourceSteps.length-1}get canGoBack(){return this.wizardStepIndex>0&&this.wizardStepIndex<=this.apiResourceSteps.length-1}get isSummaryStep(){return this.wizardStepIndex===this.apiResourceSteps.length-1}ngOnInit(){this._apiResourceId=+this._route.parent.snapshot.params.id,this.form=this._formBuilder.group({type:[""],name:["",[o.w.required,o.w.maxLength(200)]],displayName:["",[o.w.maxLength(200)]],description:["",[o.w.maxLength(1e3)]],userClaims:[[]]}),this.apiResourceSteps=[new Te.a("Basic Details",Oe),new Te.a("User Claims",we)],this._changeDetectionRef.detectChanges(),this.loadStep(this.apiResourceSteps[0])}goToNextStep(){this.canGoFront&&(this._loadedStepInstance.isValid()?(this.hostFormValidated=!1,this.wizardStepIndex+=1,this.loadStep(this.apiResourceSteps[this.wizardStepIndex])):(this.hostFormValidated=!0,this.validateFormFields(this.form)),this._loadedStepInstance.formValidated.emit(this.hostFormValidated))}goToPreviousStep(){this.canGoBack&&(this.hostFormValidated=!1,this.wizardStepIndex-=1,this.loadStep(this.apiResourceSteps[this.wizardStepIndex]))}saveApiResourceScope(){const e=this.form.get("name").value;this._apiResourceStore.addApiResourceScope(this._apiResourceId,{name:e,displayName:this.form.get("displayName").value,description:this.form.get("description").value,userClaims:this.form.get("userClaims").value}).subscribe(t=>{this._toast.showSuccess(`API scope '${e}' was created successfully.`),this._router.navigate(["../"],{relativeTo:this._route})},e=>{this._toast.showDanger(e.errors.name[0])})}validateFormFields(e){Object.keys(e.controls).forEach(t=>{const i=e.get(t);i instanceof o.e?i.markAsTouched({onlySelf:!0}):i instanceof o.g&&this.validateFormFields(i)})}loadStep(e){const t=this._componentFactoryResolver.resolveComponentFactory(e.component),i=this._wizardStepHost.viewContainerRef;i.clear();const s=i.createComponent(t);this._loadedStepInstance=s.instance,this._loadedStepInstance.data={apiResource:this.resource,form:this.form,displayType:!1},this._formValidatedSubscription&&this._formValidatedSubscription.unsubscribe(),this._formValidatedSubscription=this._loadedStepInstance.formValidated.subscribe(e=>{this.hostFormValidated=e})}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(a.j),a.Ob(o.d),a.Ob(a.h),a.Ob(j),a.Ob(_.a),a.Ob(r.d),a.Ob(r.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-api-resource-scope-add"]],viewQuery:function(e,t){var i;1&e&&a.Nc(Ie.a,!0),2&e&&a.wc(i=a.hc())&&(t._wizardStepHost=i.first)},decls:15,vars:8,consts:[[1,"row"],[1,"col-sm-12"],[1,"card","m-b-30"],[1,"card-body"],[1,"text-muted","m-b-30","font-14"],["class","m-b-30 text-center",3,"ngClass",4,"ngFor","ngForOf"],["novalidate","",1,"needs-validation",3,"ngClass","formGroup"],["ngForm","ngForm"],["wizardStepHost",""],[1,"form-group"],["type","button","class","btn btn-secondary m-r-5",3,"click",4,"ngIf"],["type","button","class","btn btn-primary m-r-5",3,"click",4,"ngIf"],["type","submit","class","btn btn-primary",3,"click",4,"ngIf"],[1,"m-b-30","text-center",3,"ngClass"],["type","button",1,"btn","btn-secondary","m-r-5",3,"click"],["type","button",1,"btn","btn-primary","m-r-5",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Ub(1,"div",1),a.Ub(2,"div",2),a.Ub(3,"div",3),a.Ub(4,"p",4),a.Ic(5," Add a new scope. "),a.Tb(),a.Gc(6,Be,2,6,"h3",5),a.Ub(7,"form",6,7),a.Gc(9,Me,0,0,"ng-template",8),a.Ub(10,"div",9),a.Ub(11,"div"),a.Gc(12,Pe,2,0,"button",10),a.Gc(13,Ne,2,0,"button",11),a.Gc(14,Fe,2,0,"button",12),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb()),2&e&&(a.Bb(6),a.oc("ngForOf",t.apiResourceSteps),a.Bb(1),a.oc("ngClass",a.sc(6,Le,t.hostFormValidated))("formGroup",t.form),a.Bb(5),a.oc("ngIf",t.canGoBack),a.Bb(1),a.oc("ngIf",t.canGoFront),a.Bb(1),a.oc("ngIf",t.isSummaryStep))},directives:[s.l,o.y,o.n,s.k,o.h,Ie.a,s.m],encapsulation:2}),e})();var Ve=i("m7xY"),je=i("G0yt");const Ee=["apiSecretsList"],qe=["actionsTemplate"],He=["optionalTemplate"],$e=["form"],Ke=["deleteAlert"];function Je(e,t){1&e&&(a.Ub(0,"div",33),a.Ic(1," Field 'Type' is required. "),a.Tb())}function Qe(e,t){if(1&e){const e=a.Vb();a.Ub(0,"span",34),a.gc("click",(function(){return a.zc(e),a.ic(2).generateValue()})),a.Ub(1,"span",35),a.Ub(2,"i",36),a.Ic(3,"add"),a.Tb(),a.Tb(),a.Tb()}}function Ye(e,t){1&e&&(a.Ub(0,"div",33),a.Ic(1," Field 'Value' is required. "),a.Tb())}const We=function(e){return{"was-validated":e}},Xe=function(e){return{invalid:e}};function Ze(e,t){if(1&e){const e=a.Vb();a.Ub(0,"form",9,10),a.gc("ngSubmit",(function(){a.zc(e);const t=a.xc(1),i=a.ic();return t.form.valid&&i.update()})),a.Ub(2,"div",11),a.Ub(3,"label",12),a.Ic(4," Type (*) "),a.Tb(),a.Ub(5,"div",13),a.Ub(6,"select",14,15),a.gc("ngModelChange",(function(t){return a.zc(e),a.ic().apiSecret.type=t})),a.Ub(8,"option",16),a.Ic(9,"Shared Secret"),a.Tb(),a.Ub(10,"option",17),a.Ic(11,"X509 Thumbprint"),a.Tb(),a.Tb(),a.Gc(12,Je,2,0,"div",18),a.Tb(),a.Tb(),a.Ub(13,"div",11),a.Ub(14,"label",19),a.Ic(15," Value (*) "),a.Tb(),a.Ub(16,"div",13),a.Ub(17,"div",20),a.Gc(18,Qe,4,0,"span",21),a.Ub(19,"input",22,23),a.gc("ngModelChange",(function(t){return a.zc(e),a.ic().apiSecret.value=t})),a.Tb(),a.Tb(),a.Ub(21,"div",24),a.Ic(22,"* You will not be able to access the value after adding it."),a.Tb(),a.Gc(23,Ye,2,0,"div",18),a.Tb(),a.Tb(),a.Ub(24,"div",11),a.Ub(25,"label",25),a.Ic(26," Expiration Date "),a.Tb(),a.Ub(27,"div",13),a.Ub(28,"input",26,27),a.gc("ngModelChange",(function(t){return a.zc(e),a.ic().apiSecret.expiration=t}))("focus",(function(){return a.zc(e),a.xc(29).toggle()})),a.Tb(),a.Tb(),a.Tb(),a.Ub(30,"div",11),a.Ub(31,"label",28),a.Ic(32," Description "),a.Tb(),a.Ub(33,"div",13),a.Ub(34,"textarea",29,30),a.gc("ngModelChange",(function(t){return a.zc(e),a.ic().apiSecret.description=t})),a.Ic(36,"        "),a.Tb(),a.Tb(),a.Tb(),a.Ub(37,"div",31),a.Ub(38,"div"),a.Ub(39,"button",32),a.Ic(40," Add "),a.Tb(),a.Tb(),a.Tb(),a.Tb()}if(2&e){const e=a.xc(1),t=a.xc(7),i=a.xc(20),s=a.ic();a.oc("ngClass",a.sc(10,We,e.submitted)),a.Bb(6),a.oc("ngClass",a.sc(12,Xe,e.submitted&&t.invalid))("ngModel",s.apiSecret.type),a.Bb(6),a.oc("ngIf",e.submitted&&t.invalid),a.Bb(6),a.oc("ngIf","SharedSecret"===s.apiSecret.type),a.Bb(1),a.oc("ngClass",a.sc(14,Xe,e.submitted&&i.invalid))("ngModel",s.apiSecret.value),a.Bb(4),a.oc("ngIf",e.submitted&&i.invalid),a.Bb(5),a.oc("ngModel",s.apiSecret.expiration),a.Bb(6),a.oc("ngModel",s.apiSecret.description)}}function et(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",37),a.gc("click",(function(){a.zc(e);const i=t.value;return a.ic().showDeleteAlert(i)})),a.Ic(1," Remove "),a.Tb()}}function tt(e,t){if(1&e&&(a.Ub(0,"span"),a.Ic(1),a.Tb()),2&e){const e=a.ic().value;a.Bb(1),a.Jc(e)}}function it(e,t){1&e&&(a.Ub(0,"span"),a.Ic(1," - "),a.Tb())}function st(e,t){if(1&e&&(a.Gc(0,tt,2,1,"span",38),a.Gc(1,it,2,0,"span",38)),2&e){const e=t.value;a.oc("ngIf",e),a.Bb(1),a.oc("ngIf",!e)}}let ot=(()=>{class e{constructor(e,t,i,s){this._utilities=e,this._route=t,this._apiResourceStore=i,this._toast=s,this.columns=[],this.rows=[],this.apiSecret=new l.k({type:l.p.SharedSecret})}ngOnInit(){this.columns=[{prop:"type",name:"Type",draggable:!1,canAutoResize:!0,sortable:!1,resizeable:!1},{prop:"valueText",name:"Value",draggable:!1,canAutoResize:!0,sortable:!1,resizeable:!1},{prop:"expiration",name:"Expiration",draggable:!1,canAutoResize:!0,sortable:!1,resizeable:!1,cellTemplate:this._apiSecretsList.dateTimeTemplate,cellClass:"d-flex align-items-center"},{prop:"description",name:"Description",draggable:!1,canAutoResize:!0,sortable:!1,resizeable:!1,cellTemplate:this._optionalTemplate,cellClass:"d-flex align-items-center"},{prop:"id",name:"Actions",draggable:!1,canAutoResize:!0,sortable:!1,resizeable:!1,cellTemplate:this._actionsTemplate,cellClass:"d-flex align-items-center"}],this._apiResourceId=+this._route.parent.snapshot.params.id,this._getDataSubscription=this._apiResourceStore.getApiResource(this._apiResourceId).subscribe(e=>{this.apiResource=e,this.apiResource.secrets&&this.apiResource.secrets.forEach(e=>{e.valueText="Value is hidden"}),this.rows=e.secrets})}ngOnDestroy(){this._getDataSubscription&&this._getDataSubscription.unsubscribe()}generateValue(){this.apiSecret.value=this._utilities.newGuid()}update(){if(!this.apiSecret.type||!this.apiSecret.value)return;const e=this.apiSecret.expiration;this.apiSecret.expiration=e?new Date(e.year,e.month-1,e.day):void 0,this._apiResourceStore.addApiResourceSecret(this._apiResourceId,this.apiSecret).subscribe(e=>{this.rows=[...this.apiResource.secrets],this._form.resetForm({"client-secret-type":l.p.SharedSecret,"client-secret-value":"","expiration-date":"",description:""}),this._toast.showSuccess("API secret was added successfully.")})}showDeleteAlert(e){this.secretToDelete=this.rows.find(t=>t.id===e),setTimeout(()=>this._deleteAlert.fire(),0)}delete(){this._apiResourceStore.deleteApiResourceSecret(this._apiResourceId,this.secretToDelete).subscribe(e=>{this.rows=[...this.apiResource.secrets],this._toast.showSuccess("API secret was deleted successfully.")})}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(Z.a),a.Ob(r.a),a.Ob(j),a.Ob(_.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-api-resource-secrets"]],viewQuery:function(e,t){var i;1&e&&(a.Ec(Ee,!0),a.Ec(qe,!0),a.Ec(He,!0),a.Nc($e,!0),a.Nc(Ke,!0)),2&e&&(a.wc(i=a.hc())&&(t._apiSecretsList=i.first),a.wc(i=a.hc())&&(t._actionsTemplate=i.first),a.wc(i=a.hc())&&(t._optionalTemplate=i.first),a.wc(i=a.hc())&&(t._form=i.first),a.wc(i=a.hc())&&(t._deleteAlert=i.first))},features:[a.Ab([Ve.a])],decls:13,vars:9,consts:[["title","Delete?","type","warning",3,"text","showCancelButton","confirm"],["deleteAlert",""],["class","needs-validation","novalidate","",3,"ngClass","ngSubmit",4,"ngIf"],[1,"mt-3","mb-3"],[1,"col-12"],[3,"clientSide","rowsPerPage","canFilter","columns","rows","defaultSortDirection"],["apiSecretsList",""],["actionsTemplate",""],["optionalTemplate",""],["novalidate","",1,"needs-validation",3,"ngClass","ngSubmit"],["form","ngForm"],[1,"form-group","row"],["for","client-secret-type",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["id","client-secret-type","name","client-secret-type","required","",1,"form-control","custom-select",3,"ngClass","ngModel","ngModelChange"],["secret","ngModel"],["value","SharedSecret"],["value","X509Thumbprint"],["class","form-control-feedback text-danger",4,"ngIf"],["for","client-secret-value",1,"col-sm-2","col-form-label"],[1,"input-group"],["class","input-group-prepend cursor-pointer","title","Generate a random value.",3,"click",4,"ngIf"],["type","text","id","client-secret-value","name","client-secret-value","required","","maxlength","4000",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["value","ngModel"],[1,"text-muted"],["for","expiration-date",1,"col-sm-2","col-form-label"],["type","text","id","expiration-date","name","expiration-date","placeholder","mm-dd-yyyy","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","focus"],["datePicker","ngbDatepicker"],["for","description",1,"col-sm-2","col-form-label"],["rows","3","type","text","id","description","name","description","maxlength","2000",1,"form-control",3,"ngModel","ngModelChange"],["description","ngModel"],[1,"form-group"],["type","submit",1,"btn","btn-primary","m-r-5"],[1,"form-control-feedback","text-danger"],["title","Generate a random value.",1,"input-group-prepend","cursor-pointer",3,"click"],[1,"input-group-text"],[1,"material-icons","align-middle","font-12"],["role","button",1,"btn","btn-danger",3,"click"],[4,"ngIf"]],template:function(e,t){1&e&&(a.Ub(0,"swal",0,1),a.gc("confirm",(function(){return t.delete()})),a.Tb(),a.Gc(2,Ze,41,16,"form",2),a.Pb(3,"hr"),a.Ub(4,"div",3),a.Ub(5,"div",4),a.Pb(6,"app-list-view",5,6),a.Tb(),a.Gc(8,et,2,0,"ng-template",null,7,a.Hc),a.Gc(10,st,2,2,"ng-template",null,8,a.Hc),a.Tb(),a.Pb(12,"hr")),2&e&&(a.oc("text","Selected secret will be deleted permanently. This action cannot be reversed.")("showCancelButton",!0),a.Bb(2),a.oc("ngIf",t.apiResource),a.Bb(4),a.oc("clientSide",!0)("rowsPerPage",10)("canFilter",!1)("columns",t.columns)("rows",t.rows)("defaultSortDirection","Asc"))},directives:[c.a,s.m,u.a,o.y,o.n,o.o,s.k,o.v,o.u,o.m,o.p,o.q,o.x,o.b,o.j,je.h],encapsulation:2}),e})();const ct=function(e){return{"d-none":e}};function nt(e,t){if(1&e&&(a.Ub(0,"h3",14),a.Ic(1),a.Tb()),2&e){const e=t.$implicit,i=t.index,s=a.ic();a.oc("ngClass",a.sc(4,ct,i!==s.wizardStepIndex)),a.Bb(1),a.Mc(" Step ",s.wizardStepIndex+1," of ",s.apiResourceSteps.length," - ",e.title," ")}}function rt(e,t){}function at(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",15),a.gc("click",(function(){return a.zc(e),a.ic().goToPreviousStep()})),a.Ic(1," Previous Step "),a.Tb()}}function lt(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",16),a.gc("click",(function(){return a.zc(e),a.ic().goToNextStep()})),a.Ic(1," Next Step "),a.Tb()}}function ut(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",17),a.gc("click",(function(){return a.zc(e),a.ic().saveResource()})),a.Ic(1," Save "),a.Tb()}}const dt=function(e){return{"was-validated":e}},pt=[{path:"",redirectTo:"identity",pathMatch:"full"},{path:"identity",component:m},{path:"add",component:(()=>{class e{constructor(e,t,i,s,o,c,n){this._componentFactoryResolver=e,this._formBuilder=t,this._changeDetectionRef=i,this._api=s,this._toast=o,this._router=c,this._route=n,this.wizardStepIndex=0,this.apiResourceSteps=[],this.hostFormValidated=!1,this.resource=new l.i}get canGoFront(){return this.wizardStepIndex>=0&&this.wizardStepIndex<this.apiResourceSteps.length-1}get canGoBack(){return this.wizardStepIndex>0&&this.wizardStepIndex<=this.apiResourceSteps.length-1}get isSummaryStep(){return this.wizardStepIndex===this.apiResourceSteps.length-1}ngOnInit(){this.form=this._formBuilder.group({type:["",[o.w.required]],name:["",[o.w.required,o.w.maxLength(200)]],displayName:["",[o.w.maxLength(200)]],description:["",[o.w.maxLength(1e3)]],userClaims:[[]]}),this.apiResourceSteps=[new Te.a("Basic Details",Oe),new Te.a("User Claims",we)],this._navigationOrigin=history.state.origin,this._changeDetectionRef.detectChanges(),this.loadStep(this.apiResourceSteps[0])}goToNextStep(){this.canGoFront&&(this._loadedStepInstance.isValid()?(this.hostFormValidated=!1,this.wizardStepIndex+=1,this.loadStep(this.apiResourceSteps[this.wizardStepIndex])):(this.hostFormValidated=!0,this.validateFormFields(this.form)),this._loadedStepInstance.formValidated.emit(this.hostFormValidated))}goToPreviousStep(){this.canGoBack&&(this.hostFormValidated=!1,this.wizardStepIndex-=1,this.loadStep(this.apiResourceSteps[this.wizardStepIndex]))}saveResource(){const e=this.form.get("type").value,t={name:this.form.get("name").value,displayName:this.form.get("displayName").value,description:this.form.get("description").value,userClaims:this.form.get("userClaims").value};"api"===e&&this._api.createApiResource(t).subscribe(e=>{this._toast.showSuccess(`API resource '${e.name}' was created successfully.`),this._router.navigate(["../api"],{relativeTo:this._route})}),"identity"===e&&this._api.createIdentityResource(t).subscribe(e=>{this._toast.showSuccess(`Identity resource '${e.name}' was created successfully.`),this._router.navigate(["../identity"],{relativeTo:this._route})})}validateFormFields(e){Object.keys(e.controls).forEach(t=>{const i=e.get(t);i instanceof o.e?i.markAsTouched({onlySelf:!0}):i instanceof o.g&&this.validateFormFields(i)})}loadStep(e){const t=this._componentFactoryResolver.resolveComponentFactory(e.component),i=this._wizardStepHost.viewContainerRef;i.clear();const s=i.createComponent(t);this._loadedStepInstance=s.instance,this._loadedStepInstance.data={apiResource:this.resource,form:this.form,displayType:!0,navigationOrigin:this._navigationOrigin},this._formValidatedSubscription&&this._formValidatedSubscription.unsubscribe(),this._formValidatedSubscription=this._loadedStepInstance.formValidated.subscribe(e=>{this.hostFormValidated=e})}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(a.j),a.Ob(o.d),a.Ob(a.h),a.Ob(l.n),a.Ob(_.a),a.Ob(r.d),a.Ob(r.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-resource-add"]],viewQuery:function(e,t){var i;1&e&&a.Nc(Ie.a,!0),2&e&&a.wc(i=a.hc())&&(t._wizardStepHost=i.first)},features:[a.Ab([j])],decls:17,vars:8,consts:[[1,"row"],[1,"col-sm-12"],[1,"card","m-b-30","m-t-30"],[1,"card-body"],[1,"mt-0","header-title"],[1,"text-muted","m-b-30","font-14"],["class","m-b-30 text-center",3,"ngClass",4,"ngFor","ngForOf"],["novalidate","",1,"needs-validation",3,"ngClass","formGroup"],["ngForm","ngForm"],["wizardStepHost",""],[1,"form-group"],["type","button","class","btn btn-secondary m-r-5",3,"click",4,"ngIf"],["type","button","class","btn btn-primary m-r-5",3,"click",4,"ngIf"],["type","submit","class","btn btn-primary",3,"click",4,"ngIf"],[1,"m-b-30","text-center",3,"ngClass"],["type","button",1,"btn","btn-secondary","m-r-5",3,"click"],["type","button",1,"btn","btn-primary","m-r-5",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Ub(1,"div",1),a.Ub(2,"div",2),a.Ub(3,"div",3),a.Ub(4,"h4",4),a.Ic(5,"Add Resource"),a.Tb(),a.Ub(6,"p",5),a.Ic(7," Create a new Resource. "),a.Tb(),a.Gc(8,nt,2,6,"h3",6),a.Ub(9,"form",7,8),a.Gc(11,rt,0,0,"ng-template",9),a.Ub(12,"div",10),a.Ub(13,"div"),a.Gc(14,at,2,0,"button",11),a.Gc(15,lt,2,0,"button",12),a.Gc(16,ut,2,0,"button",13),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb()),2&e&&(a.Bb(8),a.oc("ngForOf",t.apiResourceSteps),a.Bb(1),a.oc("ngClass",a.sc(6,dt,t.hostFormValidated))("formGroup",t.form),a.Bb(5),a.oc("ngIf",t.canGoBack),a.Bb(1),a.oc("ngIf",t.canGoFront),a.Bb(1),a.oc("ngIf",t.isSummaryStep))},directives:[s.l,o.y,o.n,s.k,o.h,Ie.a,s.m],encapsulation:2}),e})()},{path:"identity/:id",component:I,children:[{path:"",redirectTo:"details",pathMatch:"full"},{path:"details",component:x},{path:"claims",component:B}]},{path:"api",component:V},{path:"api/:id",component:K,children:[{path:"",redirectTo:"details",pathMatch:"full"},{path:"details",component:X},{path:"scopes",component:fe},{path:"scopes/add",component:Ge},{path:"claims",component:Re},{path:"secrets",component:ot}]}];let bt=(()=>{class e{}return e.\u0275mod=a.Mb({type:e}),e.\u0275inj=a.Lb({factory:function(t){return new(t||e)},imports:[[r.h.forChild(pt)],r.h]}),e})(),mt=(()=>{class e{}return e.\u0275mod=a.Mb({type:e}),e.\u0275inj=a.Lb({factory:function(t){return new(t||e)},imports:[[s.c,o.i,o.t,bt,n.a,c.c,je.c]]}),e})()}}]);