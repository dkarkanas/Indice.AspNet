function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var i,n=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"U/KP":function(e,t,i){"use strict";i.r(t),i.d(t,"ResourcesModule",(function(){return Bt}));var n=i("SVse"),o=i("s7LF"),s=i("hvj1"),r=i("PCNd"),c=i("iInd"),a=i("8Y7J"),l=i("onTr"),u=i("fQZA"),d=["actionsTemplate"];function p(e,t){if(1&e&&(a.Ub(0,"a",12),a.Ic(1,"Edit"),a.Tb()),2&e){var i=a.ic().value;a.oc("routerLink",i+"/details")}}function b(e,t){1&e&&a.Gc(0,p,2,1,"a",11),2&e&&a.oc("ngIf",t.value)}var m,f,h,v=((m=function(){function e(t){_classCallCheck(this,e),this._api=t,this.count=0,this.rows=[],this.columns=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.columns=[{prop:"name",name:"Id",draggable:!1,canAutoResize:!0,sortable:!0,resizeable:!1},{prop:"displayName",name:"Name",draggable:!1,canAutoResize:!0,sortable:!0,resizeable:!1},{prop:"description",name:"Description",draggable:!1,canAutoResize:!0,sortable:!0,resizeable:!1},{prop:"id",name:"Actions",draggable:!1,canAutoResize:!1,sortable:!1,resizeable:!1,cellTemplate:this._actionsTemplate,cellClass:"d-flex align-items-center"}]}},{key:"getIdentityResources",value:function(e){var t=this;this._api.getIdentityResources(e.page,e.pageSize,e.sortField,e.searchTerm).subscribe((function(e){t.count=e.count,t.rows=e.items}))}}]),e}()).\u0275fac=function(e){return new(e||m)(a.Ob(l.n))},m.\u0275cmp=a.Ib({type:m,selectors:[["app-identity-resources"]],viewQuery:function(e,t){var i;1&e&&a.Ec(d,!0),2&e&&a.wc(i=a.hc())&&(t._actionsTemplate=i.first)},decls:15,vars:8,consts:[[1,"row"],[1,"col-sm-12"],[1,"page-title-box"],[1,"row","align-items-center"],[1,"col-md-8"],[1,"page-title","m-0"],[1,"text-muted","font-14"],[1,"col-12"],[3,"clientSide","columns","rows","count","rowsPerPage","defaultSortField","defaultSortDirection","search"],["identityResourcesList",""],["actionsTemplate",""],["class","btn btn-success","href","#","role","button",3,"routerLink",4,"ngIf"],["href","#","role","button",1,"btn","btn-success",3,"routerLink"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Ub(1,"div",1),a.Ub(2,"div",2),a.Ub(3,"div",3),a.Ub(4,"div",4),a.Ub(5,"h4",5),a.Ic(6),a.Tb(),a.Ub(7,"p",6),a.Ic(8," Get a list of all identity resources. "),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(9,"div",0),a.Ub(10,"div",7),a.Ub(11,"app-list-view",8,9),a.gc("search",(function(e){return t.getIdentityResources(e)})),a.Tb(),a.Tb(),a.Tb(),a.Gc(13,b,1,1,"ng-template",null,10,a.Hc)),2&e&&(a.Bb(6),a.Kc("Identity Resources List (",t.count,")"),a.Bb(5),a.oc("clientSide",!1)("columns",t.columns)("rows",t.rows)("count",t.count)("rowsPerPage",15)("defaultSortField","name")("defaultSortDirection","Asc"))},directives:[u.a,n.m,c.g],encapsulation:2}),m),g=i("NHP+"),y=i("cp0P"),_=i("lJxs"),R=((f=function(){function e(t){_classCallCheck(this,e),this._api=t}return _createClass(e,[{key:"getIdentityResource",value:function(e){var t=this;return this._identityResource||(this._identityResource=new g.a,this._api.getIdentityResource(e).subscribe((function(e){t._identityResource.next(e),t._identityResource.complete()}))),this._identityResource}},{key:"updateIdentityResource",value:function(e){var t=this;return this._api.updateIdentityResource(e.id,new l.w({displayName:e.displayName,description:e.description,enabled:e.enabled,emphasize:e.emphasize,required:e.required,showInDiscoveryDocument:e.showInDiscoveryDocument})).pipe(Object(_.a)((function(i){t._identityResource.next(e),t._identityResource.complete()})))}},{key:"deleteIdentityResource",value:function(e){return this._api.deleteIdentityResource(e)}},{key:"getAllClaims",value:function(){var e=this;return this._allClaims||(this._allClaims=new g.a,this._api.getClaimTypes(void 0,1,2147483647,"name+",void 0).subscribe((function(t){e._allClaims.next(t.items),e._allClaims.complete()}))),this._allClaims}},{key:"addIdentityResourceClaim",value:function(e,t){var i=this,n=this.getIdentityResource(e),o=this._api.addIdentityResourceClaims(e,[t.name]);return Object(y.a)([n,o]).pipe(Object(_.a)((function(e){return{identityResource:e[0]}}))).pipe(Object(_.a)((function(e){e.identityResource.allowedClaims.push(t.name),i._identityResource.next(e.identityResource),i._identityResource.complete()})))}},{key:"deleteIdentityResourceClaim",value:function(e,t){var i=this;return this.getIdentityResource(e).subscribe((function(e){var n=e.allowedClaims.indexOf(t.name);n>-1&&e.allowedClaims.splice(n,1),i._identityResource.next(e),i._identityResource.complete()})),this._api.deleteIdentityResourceClaim(e,t.name)}}]),e}()).\u0275fac=function(e){return new(e||f)(a.cc(l.n))},f.\u0275prov=a.Kb({token:f,factory:f.\u0275fac}),f),T=i("OsF4"),I=function(){return["details"]},C=function(){return["claims"]},S=((h=function(){function e(t,i){_classCallCheck(this,e),this.route=t,this.logger=i,this.userId=""}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||h)(a.Ob(c.a),a.Ob(T.a))},h.\u0275cmp=a.Ib({type:h,selectors:[["app-identity-resource-edit"]],features:[a.Ab([R])],decls:18,vars:4,consts:[[1,"row"],[1,"col-12"],[1,"card","m-b-30","m-t-30"],[1,"card-body"],[1,"mt-0","header-title"],[1,"text-muted","m-b-30","font-14"],["role","tablist",1,"nav","nav-tabs","justify-content-start"],[1,"nav-item"],["routerLinkActive","active","role","tab","id","identity-resource-details-tab",1,"nav-link",3,"routerLink"],["routerLinkActive","active","role","tab","id","identity-resource-claims-tab",1,"nav-link",3,"routerLink"],[1,"tab-content"],["role","tabpanel",1,"tab-pane","active"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Ub(1,"div",1),a.Ub(2,"div",2),a.Ub(3,"div",3),a.Ub(4,"h4",4),a.Ic(5,"Edit Identity Resource"),a.Tb(),a.Ub(6,"p",5),a.Ic(7," Here you can modify an identity resource. "),a.Tb(),a.Ub(8,"ul",6),a.Ub(9,"li",7),a.Ub(10,"a",8),a.Ic(11," Details "),a.Tb(),a.Tb(),a.Ub(12,"li",7),a.Ub(13,"a",9),a.Ic(14," Claims "),a.Tb(),a.Tb(),a.Tb(),a.Ub(15,"div",10),a.Ub(16,"div",11),a.Pb(17,"router-outlet"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb()),2&e&&(a.Bb(10),a.oc("routerLink",a.rc(2,I)),a.Bb(3),a.oc("routerLink",a.rc(3,C)))},directives:[c.g,c.f,c.i],encapsulation:2}),h),U=i("1uCz");function w(e,t){1&e&&(a.Ub(0,"p"),a.Ic(1,"Loading identity resource..."),a.Tb())}function k(e,t){1&e&&(a.Ub(0,"div",37),a.Ic(1," Field 'Display Name' must be up to 200 characters. "),a.Tb())}function A(e,t){1&e&&(a.Ub(0,"div",37),a.Ic(1," Field 'Display Name' must be up to 1000 characters. "),a.Tb())}var x=function(e){return{"was-validated":e}};function O(e,t){if(1&e){var i=a.Vb();a.Ub(0,"form",4,5),a.gc("ngSubmit",(function(){a.zc(i);var e=a.xc(1),t=a.ic();return e.form.valid&&t.update()})),a.Ub(2,"div",6),a.Ub(3,"label",7),a.Ic(4," Resource Id "),a.Tb(),a.Ub(5,"div",8),a.Ub(6,"span",9),a.Ic(7),a.Tb(),a.Tb(),a.Tb(),a.Ub(8,"div",6),a.Ub(9,"label",10),a.Ic(10," Display Name "),a.Tb(),a.Ub(11,"div",11),a.Ub(12,"input",12,13),a.gc("ngModelChange",(function(e){return a.zc(i),a.ic().identityResource.displayName=e})),a.Tb(),a.Gc(14,k,2,0,"div",14),a.Tb(),a.Tb(),a.Ub(15,"div",6),a.Ub(16,"label",15),a.Ic(17," Description "),a.Tb(),a.Ub(18,"div",11),a.Ub(19,"textarea",16,17),a.gc("ngModelChange",(function(e){return a.zc(i),a.ic().identityResource.description=e})),a.Ic(21,"            "),a.Tb(),a.Gc(22,A,2,0,"div",14),a.Tb(),a.Tb(),a.Ub(23,"div",6),a.Ub(24,"label",18),a.Ic(25," Required "),a.Tb(),a.Ub(26,"div",11),a.Ub(27,"div",19),a.Ub(28,"input",20,21),a.gc("ngModelChange",(function(e){return a.zc(i),a.ic().identityResource.required=e})),a.Tb(),a.Pb(30,"label",22),a.Tb(),a.Tb(),a.Tb(),a.Ub(31,"div",6),a.Ub(32,"label",23),a.Ic(33," Show in Discovery Document "),a.Tb(),a.Ub(34,"div",11),a.Ub(35,"div",19),a.Ub(36,"input",24,25),a.gc("ngModelChange",(function(e){return a.zc(i),a.ic().identityResource.showInDiscoveryDocument=e})),a.Tb(),a.Pb(38,"label",26),a.Tb(),a.Tb(),a.Tb(),a.Ub(39,"div",6),a.Ub(40,"label",27),a.Ic(41," Emphasize "),a.Tb(),a.Ub(42,"div",11),a.Ub(43,"div",19),a.Ub(44,"input",28,29),a.gc("ngModelChange",(function(e){return a.zc(i),a.ic().identityResource.emphasize=e})),a.Tb(),a.Pb(46,"label",30),a.Tb(),a.Tb(),a.Tb(),a.Ub(47,"div",6),a.Ub(48,"label",31),a.Ic(49,"Enabled"),a.Tb(),a.Ub(50,"div",11),a.Ub(51,"div",19),a.Ub(52,"input",32,33),a.gc("ngModelChange",(function(e){return a.zc(i),a.ic().identityResource.enabled=e})),a.Tb(),a.Pb(54,"label",30),a.Tb(),a.Tb(),a.Tb(),a.Ub(55,"div",34),a.Ub(56,"div"),a.Ub(57,"button",35),a.Ic(58," Save Changes "),a.Tb(),a.Ub(59,"button",36),a.gc("click",(function(){return a.zc(i),a.ic(),a.xc(1).fire()})),a.Ic(60," Delete "),a.Tb(),a.Tb(),a.Tb(),a.Tb()}if(2&e){var n=a.xc(1),o=a.xc(13),s=a.xc(20),r=a.ic();a.oc("ngClass",a.sc(10,x,n.submitted)),a.Bb(7),a.Kc(" ",r.identityResource.name," "),a.Bb(5),a.oc("ngModel",r.identityResource.displayName),a.Bb(2),a.oc("ngIf",n.submitted&&o.invalid&&o.errors.maxLength),a.Bb(5),a.oc("ngModel",r.identityResource.description),a.Bb(3),a.oc("ngIf",n.submitted&&s.invalid&&s.errors.maxLength),a.Bb(6),a.oc("ngModel",r.identityResource.required),a.Bb(8),a.oc("ngModel",r.identityResource.showInDiscoveryDocument),a.Bb(8),a.oc("ngModel",r.identityResource.emphasize),a.Bb(8),a.oc("ngModel",r.identityResource.enabled)}}var z,D=((z=function(){function e(t,i,n,o){_classCallCheck(this,e),this._router=t,this._route=i,this._identityResourceStore=n,this._toast=o}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._getResourceSubscription=this._identityResourceStore.getIdentityResource(+this._route.parent.snapshot.params.id).subscribe((function(t){e.identityResource=t}))}},{key:"ngOnDestroy",value:function(){this._getResourceSubscription&&this._getResourceSubscription.unsubscribe(),this._updateIdentityResourceSubscription&&this._updateIdentityResourceSubscription.unsubscribe(),this._deleteIdentityResourceSubscription&&this._deleteIdentityResourceSubscription.unsubscribe()}},{key:"delete",value:function(){var e=this;this._deleteIdentityResourceSubscription=this._identityResourceStore.deleteIdentityResource(this.identityResource.id).subscribe((function(t){e._toast.showSuccess("Identity resource '".concat(e.identityResource.name,"' was deleted successfully.")),e._router.navigate(["../../"],{relativeTo:e._route})}))}},{key:"update",value:function(){var e=this;this._updateIdentityResourceSubscription=this._identityResourceStore.updateIdentityResource(this.identityResource).subscribe((function(t){e._toast.showSuccess("Identity resource '".concat(e.identityResource.name,"' was updated successfully."))}))}}]),e}()).\u0275fac=function(e){return new(e||z)(a.Ob(c.d),a.Ob(c.a),a.Ob(R),a.Ob(U.a))},z.\u0275cmp=a.Ib({type:z,selectors:[["app-identity-resource-details"]],decls:4,vars:4,consts:[["title","Delete?","type","warning",3,"text","showCancelButton","confirm"],["deleteAlert",""],[4,"ngIf"],["class","needs-validation","novalidate","",3,"ngClass","ngSubmit",4,"ngIf"],["novalidate","",1,"needs-validation",3,"ngClass","ngSubmit"],["form","ngForm"],[1,"form-group","row"],["for","resource-id",1,"col-sm-2","col-form-label"],[1,"col-sm-10","col-form-label"],["id","resource-id","name","resource-id",1,"col-form-label"],["for","resource-display-name",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["type","text","id","resource-display-name","name","resource-display-name","maxlength","200",1,"form-control",3,"ngModel","ngModelChange"],["resourceDisplayName","ngModel"],["class","form-control-feedback text-danger",4,"ngIf"],["for","resource-description",1,"col-sm-2","col-form-label"],["id","resource-description","name","resource-description","rows","3","maxlength","1000",1,"form-control",3,"ngModel","ngModelChange"],["resourceDescription","ngModel"],["for","resource-required",1,"col-sm-2","col-form-label"],[1,"form-check","col-form-label","custom-control","custom-checkbox"],["type","checkbox","id","resource-required","name","resource-required",1,"form-check-input","custom-control-input",3,"ngModel","ngModelChange"],["required","ngModel"],["for","resource-required",1,"custom-control-label"],["for","resource-in-discovery-document",1,"col-sm-2","col-form-label"],["type","checkbox","id","resource-in-discovery-document","name","resource-in-discovery-document",1,"form-check-input","custom-control-input",3,"ngModel","ngModelChange"],["showInDiscoveryDocument","ngModel"],["for","resource-in-discovery-document",1,"custom-control-label"],["for","resource-emphasize",1,"col-sm-2","col-form-label"],["type","checkbox","id","resource-emphasize","name","resource-emphasize",1,"form-check-input","custom-control-input",3,"ngModel","ngModelChange"],["emphasize","ngModel"],["for","resource-emphasize",1,"custom-control-label"],["for","resource-enabled",1,"col-sm-2","col-form-label"],["type","checkbox","id","resource-enabled","name","resource-enabled",1,"form-check-input","custom-control-input",3,"ngModel","ngModelChange"],["enabled","ngModel"],[1,"form-group"],["type","submit",1,"btn","btn-primary","m-r-5"],["type","button",1,"btn","btn-danger","m-r-5","float-right",3,"click"],[1,"form-control-feedback","text-danger"]],template:function(e,t){1&e&&(a.Ub(0,"swal",0,1),a.gc("confirm",(function(){return t.delete()})),a.Tb(),a.Gc(2,w,2,0,"p",2),a.Gc(3,O,61,12,"form",3)),2&e&&(a.oc("text","Identity resource '"+(null==t.identityResource?null:t.identityResource.name)+"' will be deleted permanently. This action cannot be reversed.")("showCancelButton",!0),a.Bb(2),a.oc("ngIf",!t.identityResource),a.Bb(1),a.oc("ngIf",t.identityResource))},directives:[s.a,n.m,o.y,o.n,o.o,n.k,o.b,o.j,o.m,o.p,o.a],encapsulation:2}),z),B=i("8xOu");function M(e,t){1&e&&(a.Ub(0,"p"),a.Ic(1,"Loading identity resource claims..."),a.Tb())}var P=function(){return{sourceListTitle:"Available Claims",emptySourceListMessage:"There are no available claims to assign.",destinationListTitle:"Assigned Claims",emptyDestinationListMessage:"There are no claims assigned to this identity resource."}};function N(e,t){if(1&e){var i=a.Vb();a.Ub(0,"app-transfer-lists",2,3),a.gc("itemAdded",(function(e){return a.zc(i),a.ic().addClaim(e)}))("itemRemoved",(function(e){return a.zc(i),a.ic().removeClaim(e)})),a.Tb()}if(2&e){var n=a.ic();a.oc("source",n.availableClaims)("destination",n.identityResourceClaims)("titlePropertyName","name")("subtitlePropertyName","description")("options",a.rc(5,P))}}var L,F=((L=function(){function e(t,i){_classCallCheck(this,e),this._route=t,this._identityResourceStore=i}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._identityResourceId=this._route.parent.snapshot.params.id;var t=this._identityResourceStore.getIdentityResource(this._identityResourceId),i=this._identityResourceStore.getAllClaims();this._getDataSubscription=Object(y.a)([t,i]).pipe(Object(_.a)((function(e){return{resource:e[0],claimTypes:e[1]}}))).subscribe((function(t){var i=t.resource.allowedClaims,n=t.claimTypes;e.availableClaims=n.filter((function(e){return!i.includes(e.name)})),e.identityResourceClaims=n.filter((function(e){return i.includes(e.name)}))}))}},{key:"ngOnDestroy",value:function(){this._getDataSubscription&&this._getDataSubscription.unsubscribe(),this._addIdentityResourceClaim&&this._addIdentityResourceClaim.unsubscribe(),this._deleteIdentityResourceClaim&&this._deleteIdentityResourceClaim.unsubscribe()}},{key:"addClaim",value:function(e){this._addIdentityResourceClaim=this._identityResourceStore.addIdentityResourceClaim(this._identityResourceId,e).subscribe()}},{key:"removeClaim",value:function(e){this._deleteIdentityResourceClaim=this._identityResourceStore.deleteIdentityResourceClaim(this._identityResourceId,e).subscribe()}}]),e}()).\u0275fac=function(e){return new(e||L)(a.Ob(c.a),a.Ob(R))},L.\u0275cmp=a.Ib({type:L,selectors:[["app-identity-resource-claims"]],decls:2,vars:2,consts:[[4,"ngIf"],[3,"source","destination","titlePropertyName","subtitlePropertyName","options","itemAdded","itemRemoved",4,"ngIf"],[3,"source","destination","titlePropertyName","subtitlePropertyName","options","itemAdded","itemRemoved"],["transferList",""]],template:function(e,t){1&e&&(a.Gc(0,M,2,0,"p",0),a.Gc(1,N,2,6,"app-transfer-lists",1)),2&e&&(a.oc("ngIf",!t.availableClaims),a.Bb(1),a.oc("ngIf",t.availableClaims))},directives:[n.m,B.a],encapsulation:2}),L),G=["actionsTemplate"],V=["idTemplate"];function j(e,t){if(1&e&&(a.Ub(0,"a",13),a.Ic(1," Edit "),a.Tb()),2&e){var i=a.ic().value;a.oc("routerLink",i+"/details")}}function E(e,t){1&e&&a.Gc(0,j,2,1,"a",12),2&e&&a.oc("ngIf",t.value)}function q(e,t){1&e&&(a.Ub(0,"span",16),a.Ic(1," reserved "),a.Tb())}function H(e,t){if(1&e&&(a.Ub(0,"span",14),a.Ic(1),a.Tb(),a.Ic(2," \xa0 "),a.Gc(3,q,2,0,"span",15)),2&e){var i=t.row,n=t.value;a.oc("title",n),a.Bb(1),a.Jc(n),a.Bb(2),a.oc("ngIf",i.nonEditable)}}var K,J,Q,$=((J=function(){function e(t){_classCallCheck(this,e),this._api=t,this.count=0,this.rows=[],this.columns=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.columns=[{prop:"name",name:"Id",draggable:!1,canAutoResize:!0,sortable:!0,resizeable:!1,cellTemplate:this._idTemplate},{prop:"displayName",name:"Name",draggable:!1,canAutoResize:!0,sortable:!0,resizeable:!1},{prop:"description",name:"Description",draggable:!1,canAutoResize:!0,sortable:!0,resizeable:!1},{prop:"id",name:"Actions",draggable:!1,canAutoResize:!1,sortable:!1,resizeable:!1,cellTemplate:this._actionsTemplate,cellClass:"d-flex align-items-center"}]}},{key:"getApiResources",value:function(e){var t=this;this._api.getApiResources(e.page,e.pageSize,e.sortField,e.searchTerm).subscribe((function(e){t.count=e.count,t.rows=e.items}))}}]),e}()).\u0275fac=function(e){return new(e||J)(a.Ob(l.n))},J.\u0275cmp=a.Ib({type:J,selectors:[["app-api-resources"]],viewQuery:function(e,t){var i;1&e&&(a.Ec(G,!0),a.Ec(V,!0)),2&e&&(a.wc(i=a.hc())&&(t._actionsTemplate=i.first),a.wc(i=a.hc())&&(t._idTemplate=i.first))},decls:17,vars:8,consts:[[1,"row"],[1,"col-sm-12"],[1,"page-title-box"],[1,"row","align-items-center"],[1,"col-md-8"],[1,"page-title","m-0"],[1,"text-muted","font-14"],[1,"col-12"],[3,"clientSide","columns","rows","count","rowsPerPage","defaultSortField","defaultSortDirection","search"],["apiResourcesList",""],["actionsTemplate",""],["idTemplate",""],["class","btn btn-success","href","#","role","button",3,"routerLink",4,"ngIf"],["href","#","role","button",1,"btn","btn-success",3,"routerLink"],[3,"title"],["class","badge badge-warning",4,"ngIf"],[1,"badge","badge-warning"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Ub(1,"div",1),a.Ub(2,"div",2),a.Ub(3,"div",3),a.Ub(4,"div",4),a.Ub(5,"h4",5),a.Ic(6),a.Tb(),a.Ub(7,"p",6),a.Ic(8," Get a list of all API resources. "),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(9,"div",0),a.Ub(10,"div",7),a.Ub(11,"app-list-view",8,9),a.gc("search",(function(e){return t.getApiResources(e)})),a.Tb(),a.Tb(),a.Tb(),a.Gc(13,E,1,1,"ng-template",null,10,a.Hc),a.Gc(15,H,4,3,"ng-template",null,11,a.Hc)),2&e&&(a.Bb(6),a.Kc("API Resources List (",t.count,")"),a.Bb(5),a.oc("clientSide",!1)("columns",t.columns)("rows",t.rows)("count",t.count)("rowsPerPage",15)("defaultSortField","name")("defaultSortDirection","Asc"))},directives:[u.a,n.m,c.g],encapsulation:2}),J),W=((K=function(){function e(t){_classCallCheck(this,e),this._api=t}return _createClass(e,[{key:"getApiResource",value:function(e){var t=this;return this._apiResource||(this._apiResource=new g.a,this._api.getApiResource(e).subscribe((function(e){e.secrets=e.secrets||[],e.scopes=e.scopes.sort((function(e,t){return e.name>t.name?1:-1})),e.scopes.forEach((function(e){e.isOpen=!1,e.userClaims=e.userClaims||[]})),t._apiResource.next(e),t._apiResource.complete()}))),this._apiResource}},{key:"updateApiResource",value:function(e){var t=this;return this._api.updateApiResource(e.id,new l.t({displayName:e.displayName,description:e.description,enabled:e.enabled})).pipe(Object(_.a)((function(i){t._apiResource.next(e),t._apiResource.complete()})))}},{key:"addApiResourceClaim",value:function(e,t){var i=this,n=this.getApiResource(e),o=this._api.addApiResourceClaims(e,[t.name]);return Object(y.a)([n,o]).pipe(Object(_.a)((function(e){return{apiResource:e[0]}}))).pipe(Object(_.a)((function(e){e.apiResource.allowedClaims.push(t.name),i._apiResource.next(e.apiResource),i._apiResource.complete()})))}},{key:"addApiResourceSecret",value:function(e,t){var i=this,n=this.getApiResource(e),o=this._api.addApiResourceSecret(e,t);return Object(y.a)([n,o]).pipe(Object(_.a)((function(e){return{apiResource:e[0],addedSecret:e[1]}}))).pipe(Object(_.a)((function(e){e.addedSecret.valueText="Value is hidden",e.apiResource.secrets.push(e.addedSecret),i._apiResource.next(e.apiResource),i._apiResource.complete()})))}},{key:"deleteApiResourceSecret",value:function(e,t){var i=this;return this.getApiResource(e).subscribe((function(e){var n=e.secrets.indexOf(t);n>-1&&e.secrets.splice(n,1),i._apiResource.next(e),i._apiResource.complete()})),this._api.deleteApiResourceSecret(e,t.id)}},{key:"deleteApiResourceClaim",value:function(e,t){var i=this;return this.getApiResource(e).subscribe((function(e){var n=e.allowedClaims.indexOf(t.name);n>-1&&e.allowedClaims.splice(n,1),i._apiResource.next(e),i._apiResource.complete()})),this._api.deleteApiResourceClaim(e,t.name)}},{key:"addApiResourceScope",value:function(e,t){var i=this,n=this.getApiResource(e);t.showInDiscoveryDocument=!0;var o=this._api.addApiResourceScope(e,t);return Object(y.a)([n,o]).pipe(Object(_.a)((function(e){return{apiResource:e[0],addedScope:e[1]}}))).pipe(Object(_.a)((function(e){e.apiResource.scopes.push(e.addedScope),e.apiResource.scopes=e.apiResource.scopes.sort((function(e,t){return e.name>t.name?1:-1})),i._apiResource.next(e.apiResource),i._apiResource.complete()})))}},{key:"updateApiResourceScope",value:function(e,t){var i=this,n=this.getApiResource(e),o=this._api.updateApiResourceScope(e,t.id,new l.u({displayName:t.displayName,description:t.description,emphasize:t.emphasize,showInDiscoveryDocument:t.showInDiscoveryDocument}));return Object(y.a)([n,o]).pipe(Object(_.a)((function(e){return{apiResource:e[0],updatedScope:e[1]}}))).pipe(Object(_.a)((function(e){var n=e.apiResource.scopes.find((function(e){return e.id===t.id}));n&&(n=t),i._apiResource.next(e.apiResource),i._apiResource.complete()})))}},{key:"deleteApiResourceScope",value:function(e,t){var i=this;return this.getApiResource(e).subscribe((function(e){var n=e.scopes.findIndex((function(e){return e.id===t}));n>-1&&e.scopes.splice(n,1),i._apiResource.next(e),i._apiResource.complete()})),this._api.deleteApiResourceScope(e,t)}},{key:"addApiResourceScopeClaim",value:function(e,t,i){var n=this;return this.getApiResource(e).subscribe((function(e){e.scopes.find((function(e){return e.id===t})).userClaims.push(i.name),n._apiResource.next(e),n._apiResource.complete()})),this._api.addApiResourceScopeClaims(e,t,[i.name])}},{key:"deleteApiResourceScopeClaim",value:function(e,t,i){var n=this;return this.getApiResource(e).subscribe((function(e){var o=e.scopes.find((function(e){return e.id===t})),s=o.userClaims.indexOf(i.name);s>-1&&o.userClaims.splice(s,1),n._apiResource.next(e),n._apiResource.complete()})),this._api.deleteApiResourceScopeClaim(e,t,i.name)}},{key:"deleteApiResource",value:function(e){return this._api.deleteApiResource(e)}},{key:"getAllClaims",value:function(){var e=this;return this._allClaims||(this._allClaims=new g.a,this._api.getClaimTypes(void 0,1,2147483647,"name+",void 0).subscribe((function(t){e._allClaims.next(t.items),e._allClaims.complete()}))),this._allClaims}}]),e}()).\u0275fac=function(e){return new(e||K)(a.cc(l.n))},K.\u0275prov=a.Kb({token:K,factory:K.\u0275fac}),K),Y=function(){return["details"]},X=function(){return["scopes"]},Z=function(){return["claims"]},ee=function(){return["secrets"]},te=((Q=function(){function e(t,i){_classCallCheck(this,e),this._route=t,this._apiResourceStore=i}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._getDataSubscription=this._apiResourceStore.getApiResource(+this._route.snapshot.params.id).subscribe((function(t){e.apiResource=t}))}},{key:"ngOnDestroy",value:function(){this._getDataSubscription&&this._getDataSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||Q)(a.Ob(c.a),a.Ob(W))},Q.\u0275cmp=a.Ib({type:Q,selectors:[["app-api-resource-edit"]],features:[a.Ab([W])],decls:24,vars:9,consts:[[1,"row"],[1,"col-12"],[1,"card","m-b-30","m-t-30"],[1,"card-body"],[1,"mt-0","header-title"],[1,"text-muted","m-b-30","font-14"],["role","tablist",1,"nav","nav-tabs","justify-content-start"],[1,"nav-item"],["routerLinkActive","active","role","tab","id","api-resource-details-tab",1,"nav-link",3,"routerLink"],["routerLinkActive","active","role","tab","id","api-resource-scopes-tab",1,"nav-link",3,"routerLink"],["routerLinkActive","active","role","tab","id","api-resource-resources-tab",1,"nav-link",3,"routerLink"],["routerLinkActive","active","role","tab","id","api-resource-secrets-tab",1,"nav-link",3,"routerLink"],[1,"tab-content","mt-2"],["role","tabpanel",1,"tab-pane","active"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Ub(1,"div",1),a.Ub(2,"div",2),a.Ub(3,"div",3),a.Ub(4,"h4",4),a.Ic(5),a.Tb(),a.Ub(6,"p",5),a.Ic(7," Here you can modify some properties of an API resource. "),a.Tb(),a.Ub(8,"ul",6),a.Ub(9,"li",7),a.Ub(10,"a",8),a.Ic(11," Details "),a.Tb(),a.Tb(),a.Ub(12,"li",7),a.Ub(13,"a",9),a.Ic(14," Scopes "),a.Tb(),a.Tb(),a.Ub(15,"li",7),a.Ub(16,"a",10),a.Ic(17," Claims "),a.Tb(),a.Tb(),a.Ub(18,"li",7),a.Ub(19,"a",11),a.Ic(20," Secrets "),a.Tb(),a.Tb(),a.Tb(),a.Ub(21,"div",12),a.Ub(22,"div",13),a.Pb(23,"router-outlet"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb()),2&e&&(a.Bb(5),a.Jc((null==t.apiResource?null:t.apiResource.displayName)||(null==t.apiResource?null:t.apiResource.name)),a.Bb(5),a.oc("routerLink",a.rc(5,Y)),a.Bb(3),a.oc("routerLink",a.rc(6,X)),a.Bb(3),a.oc("routerLink",a.rc(7,Z)),a.Bb(3),a.oc("routerLink",a.rc(8,ee)))},directives:[c.g,c.f,c.i],encapsulation:2}),Q);function ie(e,t){1&e&&(a.Ub(0,"p"),a.Ic(1,"Loading API resource data..."),a.Tb())}function ne(e,t){if(1&e){var i=a.Vb();a.Ub(0,"button",25),a.gc("click",(function(){return a.zc(i),a.ic(2),a.xc(1).fire()})),a.Ic(1," Delete "),a.Tb()}}var oe=function(e){return{"was-validated":e}};function se(e,t){if(1&e){var i=a.Vb();a.Ub(0,"form",4,5),a.gc("ngSubmit",(function(){a.zc(i);var e=a.xc(1),t=a.ic();return e.form.valid&&t.update()})),a.Ub(2,"div",6),a.Ub(3,"label",7),a.Ic(4," Resource Id "),a.Tb(),a.Ub(5,"div",8),a.Ub(6,"span",9),a.Ic(7),a.Tb(),a.Tb(),a.Tb(),a.Ub(8,"div",6),a.Ub(9,"label",10),a.Ic(10," Display Name "),a.Tb(),a.Ub(11,"div",11),a.Ub(12,"input",12,13),a.gc("ngModelChange",(function(e){return a.zc(i),a.ic().apiResource.displayName=e})),a.Tb(),a.Tb(),a.Tb(),a.Ub(14,"div",6),a.Ub(15,"label",14),a.Ic(16,"Description"),a.Tb(),a.Ub(17,"div",11),a.Ub(18,"textarea",15,16),a.gc("ngModelChange",(function(e){return a.zc(i),a.ic().apiResource.description=e})),a.Ic(20,"            "),a.Tb(),a.Tb(),a.Tb(),a.Ub(21,"div",6),a.Ub(22,"label",17),a.Ic(23," Enabled "),a.Tb(),a.Ub(24,"div",11),a.Ub(25,"div",18),a.Ub(26,"input",19,20),a.gc("ngModelChange",(function(e){return a.zc(i),a.ic().apiResource.enabled=e})),a.Tb(),a.Pb(28,"label",21),a.Tb(),a.Tb(),a.Tb(),a.Ub(29,"div",22),a.Ub(30,"div"),a.Ub(31,"button",23),a.Ic(32," Save Changes "),a.Tb(),a.Gc(33,ne,2,0,"button",24),a.Tb(),a.Tb(),a.Tb()}if(2&e){var n=a.xc(1),o=a.ic();a.oc("ngClass",a.sc(6,oe,n.submitted)),a.Bb(7),a.Kc(" ",o.apiResource.name," "),a.Bb(5),a.oc("ngModel",o.apiResource.displayName),a.Bb(6),a.oc("ngModel",o.apiResource.description),a.Bb(8),a.oc("ngModel",o.apiResource.enabled),a.Bb(7),a.oc("ngIf",!o.apiResource.nonEditable)}}var re,ce=((re=function(){function e(t,i,n,o){_classCallCheck(this,e),this._route=t,this._apiResourceStore=i,this._toast=n,this._router=o}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._getDataSubscription=this._apiResourceStore.getApiResource(+this._route.parent.snapshot.params.id).subscribe((function(t){e.apiResource=t}))}},{key:"ngOnDestroy",value:function(){this._getDataSubscription&&this._getDataSubscription.unsubscribe(),this._updateApiResourceSubscription&&this._updateApiResourceSubscription.unsubscribe(),this._deleteApiResourceSubscription&&this._deleteApiResourceSubscription.unsubscribe()}},{key:"delete",value:function(){var e=this;this._deleteApiResourceSubscription=this._apiResourceStore.deleteApiResource(this.apiResource.id).subscribe((function(t){e._toast.showSuccess("API resource '".concat(e.apiResource.name,"' was deleted successfully.")),e._router.navigate(["../../"],{relativeTo:e._route})}))}},{key:"update",value:function(){var e=this;this._updateApiResourceSubscription=this._apiResourceStore.updateApiResource(this.apiResource).subscribe((function(t){e._toast.showSuccess("API resource '".concat(e.apiResource.name,"' was updated successfully."))}))}}]),e}()).\u0275fac=function(e){return new(e||re)(a.Ob(c.a),a.Ob(W),a.Ob(U.a),a.Ob(c.d))},re.\u0275cmp=a.Ib({type:re,selectors:[["app-api-resource-details"]],decls:4,vars:4,consts:[["title","Delete?","type","warning",3,"text","showCancelButton","confirm"],["deleteAlert",""],[4,"ngIf"],["class","needs-validation","novalidate","",3,"ngClass","ngSubmit",4,"ngIf"],["novalidate","",1,"needs-validation",3,"ngClass","ngSubmit"],["form","ngForm"],[1,"form-group","row"],["for","api-resource-id",1,"col-sm-2","col-form-label"],[1,"col-sm-10","col-form-label"],["id","api-resource-id","name","api-resource-id",1,"col-form-label"],["for","api-resource-display-name",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["type","text","id","api-resource-display-name","name","api-resource-display-name","maxlength","200",1,"form-control",3,"ngModel","ngModelChange"],["apiResourceName","ngModel"],["for","api-resource-description",1,"col-sm-2","col-form-label"],["id","api-resource-description","name","api-resource-description","rows","3","maxlength","1000",1,"form-control",3,"ngModel","ngModelChange"],["description","ngModel"],["for","api-resource-enabled",1,"col-sm-2","col-form-label"],[1,"form-check","col-form-label","custom-control","custom-checkbox"],["type","checkbox","id","api-resource-enabled","name","api-resource-enabled",1,"form-check-input","custom-control-input",3,"ngModel","ngModelChange"],["enabled","ngModel"],["for","api-resource-enabled",1,"custom-control-label"],[1,"form-group"],["type","submit",1,"btn","btn-primary","m-r-5"],["type","button","class","btn btn-danger m-r-5 float-right",3,"click",4,"ngIf"],["type","button",1,"btn","btn-danger","m-r-5","float-right",3,"click"]],template:function(e,t){1&e&&(a.Ub(0,"swal",0,1),a.gc("confirm",(function(){return t.delete()})),a.Tb(),a.Gc(2,ie,2,0,"p",2),a.Gc(3,se,34,8,"form",3)),2&e&&(a.oc("text","API resource '"+(null==t.apiResource?null:t.apiResource.name)+"' will be deleted permanently. This action cannot be reversed.")("showCancelButton",!0),a.Bb(2),a.oc("ngIf",!t.apiResource),a.Bb(1),a.oc("ngIf",t.apiResource))},directives:[s.a,n.m,o.y,o.n,o.o,n.k,o.b,o.j,o.m,o.p,o.a],encapsulation:2}),re),ae=i("xWML"),le=["deleteAlert"];function ue(e,t){if(1&e){var i=a.Vb();a.Ub(0,"button",26),a.gc("click",(function(){a.zc(i);var e=a.ic();return e.deletePrompt(e.scope)})),a.Ic(1," Delete "),a.Tb()}}var de,pe=function(e){return{"was-validated":e}},be=((de=function(){function e(t,i,n,o){_classCallCheck(this,e),this._route=t,this._apiResourceStore=i,this._toast=n,this.utilities=o,this.scope=new l.a,this.editable=!1,this.discriminator=this.utilities.newGuid()}return _createClass(e,[{key:"ngOnInit",value:function(){this._apiResourceId=+this._route.parent.snapshot.params.id}},{key:"ngOnDestroy",value:function(){this._getDataSubscription&&this._getDataSubscription.unsubscribe(),this._deleteApiResourceSubscription&&this._deleteApiResourceSubscription.unsubscribe(),this._updateApiResourceSubscription&&this._updateApiResourceSubscription.unsubscribe()}},{key:"deletePrompt",value:function(e){var t=this;this.scope=e,setTimeout((function(){return t._deleteAlert.fire()}),0)}},{key:"delete",value:function(){var e=this;this._deleteApiResourceSubscription=this._apiResourceStore.deleteApiResourceScope(this._apiResourceId,this.scope.id).subscribe((function(t){e._toast.showSuccess("API scope '".concat(e.scope.name,"' was deleted successfully."))}))}},{key:"update",value:function(){var e=this;this._updateApiResourceSubscription=this._apiResourceStore.updateApiResourceScope(this._apiResourceId,this.scope).subscribe((function(t){e._toast.showSuccess("API scope '".concat(e.scope.name,"' was updated successfully."))}))}}]),e}()).\u0275fac=function(e){return new(e||de)(a.Ob(c.a),a.Ob(W),a.Ob(U.a),a.Ob(ae.a))},de.\u0275cmp=a.Ib({type:de,selectors:[["app-api-resource-scope-details"]],viewQuery:function(e,t){var i;1&e&&a.Nc(le,!0),2&e&&a.wc(i=a.hc())&&(t._deleteAlert=i.first)},inputs:{scope:"scope",editable:"editable"},decls:44,vars:20,consts:[["title","Delete?","type","warning",3,"text","showCancelButton","confirm"],["deleteAlert",""],["novalidate","",1,"needs-validation","mt-3",3,"ngClass","ngSubmit"],["form","ngForm"],[1,"form-group","row"],["for","scope-id",1,"col-sm-2","col-form-label"],[1,"col-sm-10","col-form-label"],["id","scope-id","name","scope-id",1,"col-form-label"],["for","scope-display-name",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["type","text","maxlength","200",1,"form-control",3,"id","name","ngModel","ngModelChange"],["scopeName","ngModel"],["for","scope-description",1,"col-sm-2","col-form-label"],["rows","3","maxlength","1000",1,"form-control",3,"id","name","ngModel","ngModelChange"],["description","ngModel"],["for","scope-show-in-dd",1,"col-sm-2","col-form-label"],[1,"form-check","col-form-label","custom-control","custom-checkbox"],["type","checkbox",1,"form-check-input","custom-control-input",3,"id","name","ngModel","ngModelChange"],["showInDiscoveryDocument","ngModel"],[1,"custom-control-label",3,"for"],["for","scope-emphasize",1,"col-sm-2","col-form-label"],["type","checkbox","name","scope-emphasize",1,"form-check-input","custom-control-input",3,"id","ngModel","ngModelChange"],["emphasize","ngModel"],[1,"form-group"],["type","submit",1,"btn","btn-primary","m-r-5"],["type","button","class","btn btn-danger m-r-5 float-right",3,"click",4,"ngIf"],["type","button",1,"btn","btn-danger","m-r-5","float-right",3,"click"]],template:function(e,t){if(1&e){var i=a.Vb();a.Ub(0,"swal",0,1),a.gc("confirm",(function(){return t.delete()})),a.Tb(),a.Ub(2,"form",2,3),a.gc("ngSubmit",(function(){return a.zc(i),a.xc(3).form.valid&&t.update()})),a.Ub(4,"div",4),a.Ub(5,"label",5),a.Ic(6," Scope Id "),a.Tb(),a.Ub(7,"div",6),a.Ub(8,"span",7),a.Ic(9),a.Tb(),a.Tb(),a.Tb(),a.Ub(10,"div",4),a.Ub(11,"label",8),a.Ic(12," Display Name "),a.Tb(),a.Ub(13,"div",9),a.Ub(14,"input",10,11),a.gc("ngModelChange",(function(e){return t.scope.displayName=e})),a.Tb(),a.Tb(),a.Tb(),a.Ub(16,"div",4),a.Ub(17,"label",12),a.Ic(18," Description "),a.Tb(),a.Ub(19,"div",9),a.Ub(20,"textarea",13,14),a.gc("ngModelChange",(function(e){return t.scope.description=e})),a.Ic(22,"            "),a.Tb(),a.Tb(),a.Tb(),a.Ub(23,"div",4),a.Ub(24,"label",15),a.Ic(25,"Show in Discovery Document"),a.Tb(),a.Ub(26,"div",9),a.Ub(27,"div",16),a.Ub(28,"input",17,18),a.gc("ngModelChange",(function(e){return t.scope.showInDiscoveryDocument=e})),a.Tb(),a.Pb(30,"label",19),a.Tb(),a.Tb(),a.Tb(),a.Ub(31,"div",4),a.Ub(32,"label",20),a.Ic(33,"Emphasize"),a.Tb(),a.Ub(34,"div",9),a.Ub(35,"div",16),a.Ub(36,"input",21,22),a.gc("ngModelChange",(function(e){return t.scope.emphasize=e})),a.Tb(),a.Pb(38,"label",19),a.Tb(),a.Tb(),a.Tb(),a.Ub(39,"div",23),a.Ub(40,"div"),a.Ub(41,"button",24),a.Ic(42," Save Changes "),a.Tb(),a.Gc(43,ue,2,0,"button",25),a.Tb(),a.Tb(),a.Tb()}if(2&e){var n=a.xc(3);a.oc("text","Scope '"+(null==t.scope?null:t.scope.name)+"' will be deleted permanently. This action cannot be reversed.")("showCancelButton",!0),a.Bb(2),a.oc("ngClass",a.sc(18,pe,n.submitted)),a.Bb(7),a.Kc(" ",t.scope.name," "),a.Bb(5),a.oc("id","scope-display-name-"+t.discriminator)("name","scope-display-name-"+t.discriminator)("ngModel",t.scope.displayName),a.Bb(6),a.oc("id","scope-description-"+t.discriminator)("name","scope-description-"+t.discriminator)("ngModel",t.scope.description),a.Bb(8),a.oc("id","scope-show-in-dd-"+t.discriminator)("name","scope-show-in-dd-"+t.discriminator)("ngModel",t.scope.showInDiscoveryDocument),a.Bb(2),a.oc("for","scope-show-in-dd-"+t.discriminator),a.Bb(6),a.oc("id","scope-emphasize"+t.discriminator)("ngModel",t.scope.emphasize),a.Bb(2),a.oc("for","scope-emphasize"+t.discriminator),a.Bb(5),a.oc("ngIf",t.editable)}},directives:[s.a,o.y,o.n,o.o,n.k,o.b,o.j,o.m,o.p,o.a,n.m],encapsulation:2}),de);function me(e,t){1&e&&(a.Ub(0,"p"),a.Ic(1,"Loading scope claims..."),a.Tb())}var fe=function(){return{sourceListTitle:"Available Claims",emptySourceListMessage:"There are no available claims to assign.",destinationListTitle:"Assigned Claims",emptyDestinationListMessage:"There are no claims assigned to this scope."}};function he(e,t){if(1&e){var i=a.Vb();a.Ub(0,"app-transfer-lists",2,3),a.gc("itemAdded",(function(e){return a.zc(i),a.ic().addClaim(e)}))("itemRemoved",(function(e){return a.zc(i),a.ic().removeClaim(e)})),a.Tb()}if(2&e){var n=a.ic();a.oc("source",n.availableClaims)("destination",n.selectedClaims)("titlePropertyName","name")("subtitlePropertyName","description")("options",a.rc(5,fe))}}var ve,ge=((ve=function(){function e(t,i){_classCallCheck(this,e),this._route=t,this._apiResourceStore=i,this.scope=new l.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._apiResourceId=+this._route.parent.snapshot.params.id,this._apiResourceStore.getAllClaims().subscribe((function(t){var i=e.scope.userClaims||[];e.availableClaims=t.filter((function(e){return!i.includes(e.name)})),e.selectedClaims=t.filter((function(e){return i.includes(e.name)}))}))}},{key:"ngOnDestroy",value:function(){this._getDataSubscription&&this._getDataSubscription.unsubscribe(),this._addApiResourceScopeClaim&&this._addApiResourceScopeClaim.unsubscribe(),this._deleteApiResourceScopeClaim&&this._deleteApiResourceScopeClaim.unsubscribe()}},{key:"addClaim",value:function(e){this._addApiResourceScopeClaim=this._apiResourceStore.addApiResourceScopeClaim(this._apiResourceId,this.scope.id,e).subscribe()}},{key:"removeClaim",value:function(e){this._deleteApiResourceScopeClaim=this._apiResourceStore.deleteApiResourceScopeClaim(this._apiResourceId,this.scope.id,e).subscribe()}}]),e}()).\u0275fac=function(e){return new(e||ve)(a.Ob(c.a),a.Ob(W))},ve.\u0275cmp=a.Ib({type:ve,selectors:[["app-api-resource-scope-claims"]],inputs:{scope:"scope"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"source","destination","titlePropertyName","subtitlePropertyName","options","itemAdded","itemRemoved",4,"ngIf"],[3,"source","destination","titlePropertyName","subtitlePropertyName","options","itemAdded","itemRemoved"],["transferList",""]],template:function(e,t){1&e&&(a.Gc(0,me,2,0,"p",0),a.Gc(1,he,2,6,"app-transfer-lists",1)),2&e&&(a.oc("ngIf",!t.availableClaims),a.Bb(1),a.oc("ngIf",t.availableClaims))},directives:[n.m,B.a],encapsulation:2}),ve);function ye(e,t){1&e&&(a.Ub(0,"p"),a.Ic(1,"Loading API resource scopes..."),a.Tb())}function _e(e,t){if(1&e&&a.Pb(0,"app-api-resource-scope-details",14),2&e){var i=a.ic().$implicit,n=a.ic();a.oc("scope",i)("editable",!n.apiResource.nonEditable)}}function Re(e,t){if(1&e&&a.Pb(0,"app-api-resource-scope-claims",15),2&e){var i=a.ic().$implicit;a.oc("scope",i)}}var Te=function(e){return{collapsed:e}},Ie=function(e){return{show:e}},Ce=function(e){return{"active btn btn-secondary":e}};function Se(e,t){if(1&e){var i=a.Vb();a.Ub(0,"div",4),a.Ub(1,"div",5),a.Ub(2,"button",6),a.gc("click",(function(){a.zc(i);var e=t.index;return a.ic().togglePanel(e)})),a.Ic(3),a.Tb(),a.Tb(),a.Ub(4,"div",7),a.Ub(5,"div",8),a.Ub(6,"ul",9),a.Ub(7,"li",10),a.Ub(8,"a",11),a.gc("click",(function(){return a.zc(i),a.ic().detailsActive=!0})),a.Ic(9," Details "),a.Tb(),a.Tb(),a.Ub(10,"li",10),a.Ub(11,"a",11),a.gc("click",(function(){return a.zc(i),a.ic().detailsActive=!1})),a.Ic(12," Claims "),a.Tb(),a.Tb(),a.Tb(),a.Gc(13,_e,1,2,"app-api-resource-scope-details",12),a.Gc(14,Re,1,1,"app-api-resource-scope-claims",13),a.Tb(),a.Tb(),a.Tb()}if(2&e){var n=t.$implicit,o=a.ic();a.Bb(1),a.oc("id","heading"+n.id),a.Bb(1),a.oc("ngClass",a.sc(13,Te,!n.isOpen)),a.Cb("data-target","#collapse-"+n.id)("aria-expanded",n.isOpen)("aria-controls","collapse-"+n.id),a.Bb(1),a.Kc(" ",n.name," "),a.Bb(1),a.oc("id","collapse-"+n.id)("ngClass",a.sc(15,Ie,n.isOpen)),a.Cb("aria-labelledby","heading"+n.id),a.Bb(4),a.oc("ngClass",a.sc(17,Ce,o.detailsActive)),a.Bb(3),a.oc("ngClass",a.sc(19,Ce,!o.detailsActive)),a.Bb(2),a.oc("ngIf",o.detailsActive),a.Bb(1),a.oc("ngIf",!o.detailsActive)}}var Ue,we=function(){return["add"]},ke=((Ue=function(){function e(t,i,n,o){_classCallCheck(this,e),this._route=t,this._apiResourceStore=i,this._toast=n,this._router=o,this.detailsActive=!0}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._getDataSubscription=this._apiResourceStore.getApiResource(+this._route.parent.snapshot.params.id).subscribe((function(t){e.apiResource=t}))}},{key:"ngOnDestroy",value:function(){this._getDataSubscription&&this._getDataSubscription.unsubscribe()}},{key:"togglePanel",value:function(e){this.apiResource.scopes.forEach((function(t,i){t.isOpen=e===i&&!t.isOpen}))}}]),e}()).\u0275fac=function(e){return new(e||Ue)(a.Ob(c.a),a.Ob(W),a.Ob(U.a),a.Ob(c.d))},Ue.\u0275cmp=a.Ib({type:Ue,selectors:[["app-api-resource-scopes"]],decls:5,vars:4,consts:[[4,"ngIf"],["id","scopes-accordion",1,"api-resource-scopes","accordion","mb-3"],["class","card",4,"ngFor","ngForOf"],[1,"btn","btn-primary","waves-effect","waves-light","m-r-5",3,"routerLink"],[1,"card"],[1,"card-header",3,"id"],["type","button","data-toggle","collapse",1,"btn","btn-link",3,"ngClass","click"],["data-parent","#scopes-accordion",1,"collapse",3,"id","ngClass"],[1,"card-body"],[1,"nav","nav-pills"],[1,"nav-item"],["href","javascript:void(0);",1,"nav-link",3,"ngClass","click"],[3,"scope","editable",4,"ngIf"],[3,"scope",4,"ngIf"],[3,"scope","editable"],[3,"scope"]],template:function(e,t){1&e&&(a.Gc(0,ye,2,0,"p",0),a.Ub(1,"div",1),a.Gc(2,Se,15,21,"div",2),a.Tb(),a.Ub(3,"a",3),a.Ic(4," Add Scope\n"),a.Tb()),2&e&&(a.oc("ngIf",!t.apiResource),a.Bb(2),a.oc("ngForOf",null==t.apiResource?null:t.apiResource.scopes),a.Bb(1),a.oc("routerLink",a.rc(3,we)))},directives:[n.m,n.l,c.g,n.k,be,ge],encapsulation:2}),Ue);function Ae(e,t){1&e&&(a.Ub(0,"p"),a.Ic(1,"Loading scope claims..."),a.Tb())}var xe=function(){return{sourceListTitle:"Available Claims",emptySourceListMessage:"There are no available claims to assign.",destinationListTitle:"Assigned Claims",emptyDestinationListMessage:"There are no claims assigned to this resource."}};function Oe(e,t){if(1&e){var i=a.Vb();a.Ub(0,"app-transfer-lists",2,3),a.gc("itemAdded",(function(e){return a.zc(i),a.ic().addClaim(e)}))("itemRemoved",(function(e){return a.zc(i),a.ic().removeClaim(e)})),a.Tb()}if(2&e){var n=a.ic();a.oc("source",n.availableClaims)("destination",n.selectedClaims)("titlePropertyName","name")("subtitlePropertyName","description")("options",a.rc(5,xe))}}var ze,De=((ze=function(){function e(t,i){_classCallCheck(this,e),this._route=t,this._apiResourceStore=i}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._apiResourceId=+this._route.parent.snapshot.params.id;var t=this._apiResourceStore.getApiResource(this._apiResourceId),i=this._apiResourceStore.getAllClaims();this._getDataSubscription=Object(y.a)([t,i]).pipe(Object(_.a)((function(e){return{apiResource:e[0],allClaims:e[1]}}))).subscribe((function(t){var i=t.apiResource.allowedClaims,n=t.allClaims;e.availableClaims=n.filter((function(e){return!i.includes(e.name)})),e.selectedClaims=n.filter((function(e){return i.includes(e.name)}))}))}},{key:"ngOnDestroy",value:function(){this._getDataSubscription&&this._getDataSubscription.unsubscribe(),this._addApiResourceClaim&&this._addApiResourceClaim.unsubscribe(),this._deleteApiResourceClaim&&this._deleteApiResourceClaim.unsubscribe()}},{key:"addClaim",value:function(e){this._addApiResourceClaim=this._apiResourceStore.addApiResourceClaim(this._apiResourceId,e).subscribe()}},{key:"removeClaim",value:function(e){this._deleteApiResourceClaim=this._apiResourceStore.deleteApiResourceClaim(this._apiResourceId,e).subscribe()}}]),e}()).\u0275fac=function(e){return new(e||ze)(a.Ob(c.a),a.Ob(W))},ze.\u0275cmp=a.Ib({type:ze,selectors:[["app-api-resource-claims"]],decls:2,vars:2,consts:[[4,"ngIf"],[3,"source","destination","titlePropertyName","subtitlePropertyName","options","itemAdded","itemRemoved",4,"ngIf"],[3,"source","destination","titlePropertyName","subtitlePropertyName","options","itemAdded","itemRemoved"],["transferList",""]],template:function(e,t){1&e&&(a.Gc(0,Ae,2,0,"p",0),a.Gc(1,Oe,2,6,"app-transfer-lists",1)),2&e&&(a.oc("ngIf",!t.availableClaims),a.Bb(1),a.oc("ngIf",t.availableClaims))},directives:[n.m,B.a],encapsulation:2}),ze),Be=i("wWpK"),Me=i("zVEd"),Pe=i("2bU0");function Ne(e,t){1&e&&(a.Ub(0,"p"),a.Ic(1,"Loading claim types..."),a.Tb())}var Le=function(){return{sourceListTitle:"Available Claims",emptySourceListMessage:"There are no available claims to assign.",destinationListTitle:"Assigned Claims",emptyDestinationListMessage:"There are no claims assigned to this resource."}};function Fe(e,t){if(1&e){var i=a.Vb();a.Ub(0,"app-transfer-lists",2,3),a.gc("itemAdded",(function(e){return a.zc(i),a.ic().addClaim(e)}))("itemRemoved",(function(e){return a.zc(i),a.ic().removeClaim(e)})),a.Tb()}if(2&e){var n=a.ic();a.oc("source",n.availableClaims)("destination",n.selectedClaims)("titlePropertyName","name")("subtitlePropertyName","description")("options",a.rc(5,Le))}}var Ge,Ve=((Ge=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var n;return _classCallCheck(this,i),(n=t.call(this))._api=e,n}return _createClass(i,[{key:"ngOnInit",value:function(){var e=this;this._api.getClaimTypes(void 0,1,2147483647,"name+",void 0).subscribe((function(t){e._selectedClaimsControl=e.data.form.controls.userClaims,e.availableClaims=t.items.filter((function(t){return!e._selectedClaimsControl.value.includes(t.name)})),e.selectedClaims=t.items.filter((function(t){return e._selectedClaimsControl.value.includes(t.name)}))}))}},{key:"ngOnDestroy",value:function(){this._getDataSubscription&&this._getDataSubscription.unsubscribe(),this._addApiResourceScopeClaim&&this._addApiResourceScopeClaim.unsubscribe()}},{key:"addClaim",value:function(e){var t=this._selectedClaimsControl.value;t.push(e.name),this._selectedClaimsControl.setValue(t)}},{key:"removeClaim",value:function(e){var t=this._selectedClaimsControl.value,i=t.indexOf(e.name,0);i>-1&&t.splice(i,1),this._selectedClaimsControl.setValue(t)}},{key:"isValid",value:function(){return!0}}]),i}(Pe.a)).\u0275fac=function(e){return new(e||Ge)(a.Ob(l.n))},Ge.\u0275cmp=a.Ib({type:Ge,selectors:[["app-user-claims-step"]],features:[a.yb],decls:2,vars:2,consts:[[4,"ngIf"],[3,"source","destination","titlePropertyName","subtitlePropertyName","options","itemAdded","itemRemoved",4,"ngIf"],[3,"source","destination","titlePropertyName","subtitlePropertyName","options","itemAdded","itemRemoved"],["transferList",""]],template:function(e,t){1&e&&(a.Gc(0,Ne,2,0,"p",0),a.Gc(1,Fe,2,6,"app-transfer-lists",1)),2&e&&(a.oc("ngIf",!t.availableClaims),a.Bb(1),a.oc("ngIf",t.availableClaims))},directives:[n.m,B.a],encapsulation:2}),Ge);function je(e,t){1&e&&(a.Ub(0,"div",19),a.Ic(1," Please select the type of the resource. "),a.Tb())}var Ee=function(e){return{invalid:e}};function qe(e,t){if(1&e&&(a.Ub(0,"div",2),a.Ub(1,"label",14),a.Ic(2," Resource Type "),a.Tb(),a.Ub(3,"div",5),a.Ub(4,"select",15),a.Ub(5,"option",16),a.Ic(6,"Please select the type of the resource"),a.Tb(),a.Ub(7,"option",17),a.Ic(8,"API Resource"),a.Tb(),a.Ub(9,"option",18),a.Ic(10,"Identity Resource"),a.Tb(),a.Tb(),a.Gc(11,je,2,0,"div",8),a.Tb(),a.Tb()),2&e){var i=a.ic();a.Bb(4),a.oc("ngClass",a.sc(3,Ee,i.hostFormValidated&&i.type.invalid))("formControlName","type"),a.Bb(7),a.oc("ngIf",i.hostFormValidated&&i.type.invalid)}}function He(e,t){1&e&&(a.Ub(0,"div",19),a.Ic(1," Field 'Id' is required. "),a.Tb())}var Ke,Je=((Ke=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck(this,i),t.call(this)}return _createClass(i,[{key:"ngOnInit",value:function(){this.data.navigationOrigin&&this.data.form.get("type").setValue(this.data.navigationOrigin)}},{key:"isValid",value:function(){return this.name.valid&&this.displayName.valid&&this.description.valid&&this.type.valid}},{key:"displayType",get:function(){return this.data.displayType}},{key:"type",get:function(){return this.data.form.get("type")}},{key:"name",get:function(){return this.data.form.get("name")}},{key:"displayName",get:function(){return this.data.form.get("displayName")}},{key:"description",get:function(){return this.data.form.get("description")}}]),i}(Pe.a)).\u0275fac=function(e){return new(e||Ke)},Ke.\u0275cmp=a.Ib({type:Ke,selectors:[["app-basic-info-step"]],features:[a.yb],decls:24,vars:12,consts:[[3,"formGroup"],["class","form-group row",4,"ngIf"],[1,"form-group","row"],["for","resource-name",1,"col-sm-2","col-form-label"],["title","The unique identifier for this resource.",1,"material-icons","align-middle"],[1,"col-sm-10"],[1,"input-group"],["type","text","id","resource-name","name","resource-name","required","","maxlength","200",1,"form-control",3,"ngClass","formControlName"],["class","form-control-feedback text-danger",4,"ngIf"],["for","resource-display-name",1,"col-sm-2","col-form-label"],["title","Application name that will be seen on consent screens.",1,"material-icons","align-middle"],["type","text","id","resource-display-name","name","resource-display-name","maxlength","200",1,"form-control",3,"ngClass","formControlName"],["for","description",1,"col-sm-2","col-form-label"],["rows","3","type","text","id","description","name","description","maxlength","1000",1,"form-control",3,"formControlName"],["for","resource-type",1,"col-sm-2","col-form-label"],["id","resource-type","name","resource-type","required","",1,"form-control","custom-select",3,"ngClass","formControlName"],["value",""],["value","api"],["value","identity"],[1,"form-control-feedback","text-danger"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Gc(1,qe,12,5,"div",1),a.Ub(2,"div",2),a.Ub(3,"label",3),a.Ub(4,"i",4),a.Ic(5," info "),a.Tb(),a.Ic(6," Id (*) "),a.Tb(),a.Ub(7,"div",5),a.Ub(8,"div",6),a.Pb(9,"input",7),a.Tb(),a.Gc(10,He,2,0,"div",8),a.Tb(),a.Tb(),a.Ub(11,"div",2),a.Ub(12,"label",9),a.Ub(13,"i",10),a.Ic(14," info "),a.Tb(),a.Ic(15," Display Name "),a.Tb(),a.Ub(16,"div",5),a.Pb(17,"input",11),a.Tb(),a.Tb(),a.Ub(18,"div",2),a.Ub(19,"label",12),a.Ic(20,"Description"),a.Tb(),a.Ub(21,"div",5),a.Ub(22,"textarea",13),a.Ic(23,"            "),a.Tb(),a.Tb(),a.Tb(),a.Tb()),2&e&&(a.oc("formGroup",t.data.form),a.Bb(1),a.oc("ngIf",t.displayType),a.Bb(8),a.oc("ngClass",a.sc(8,Ee,t.hostFormValidated&&t.name.invalid))("formControlName","name"),a.Bb(1),a.oc("ngIf",t.hostFormValidated&&t.name.invalid),a.Bb(7),a.oc("ngClass",a.sc(10,Ee,t.hostFormValidated&&t.displayName.invalid))("formControlName","displayName"),a.Bb(5),a.oc("formControlName","description"))},directives:[o.n,o.h,n.m,o.b,o.u,o.j,n.k,o.m,o.f,o.v,o.q,o.x],encapsulation:2}),Ke),Qe=function(e){return{"d-none":e}};function $e(e,t){if(1&e&&(a.Ub(0,"h3",13),a.Ic(1),a.Tb()),2&e){var i=t.$implicit,n=t.index,o=a.ic();a.oc("ngClass",a.sc(4,Qe,n!==o.wizardStepIndex)),a.Bb(1),a.Mc(" Step ",o.wizardStepIndex+1," of ",o.apiResourceSteps.length," - ",i.title," ")}}function We(e,t){}function Ye(e,t){if(1&e){var i=a.Vb();a.Ub(0,"button",14),a.gc("click",(function(){return a.zc(i),a.ic().goToPreviousStep()})),a.Ic(1," Previous Step "),a.Tb()}}function Xe(e,t){if(1&e){var i=a.Vb();a.Ub(0,"button",15),a.gc("click",(function(){return a.zc(i),a.ic().goToNextStep()})),a.Ic(1," Next Step "),a.Tb()}}function Ze(e,t){if(1&e){var i=a.Vb();a.Ub(0,"button",16),a.gc("click",(function(){return a.zc(i),a.ic().saveApiResourceScope()})),a.Ic(1," Save "),a.Tb()}}var et,tt=function(e){return{"was-validated":e}},it=((et=function(){function e(t,i,n,o,s,r,c){_classCallCheck(this,e),this._componentFactoryResolver=t,this._formBuilder=i,this._changeDetectionRef=n,this._apiResourceStore=o,this._toast=s,this._router=r,this._route=c,this.wizardStepIndex=0,this.apiResourceSteps=[],this.hostFormValidated=!1,this.resource=new l.e}return _createClass(e,[{key:"ngOnInit",value:function(){this._apiResourceId=+this._route.parent.snapshot.params.id,this.form=this._formBuilder.group({type:[""],name:["",[o.w.required,o.w.maxLength(200)]],displayName:["",[o.w.maxLength(200)]],description:["",[o.w.maxLength(1e3)]],userClaims:[[]]}),this.apiResourceSteps=[new Be.a("Basic Details",Je),new Be.a("User Claims",Ve)],this._changeDetectionRef.detectChanges(),this.loadStep(this.apiResourceSteps[0])}},{key:"goToNextStep",value:function(){this.canGoFront&&(this._loadedStepInstance.isValid()?(this.hostFormValidated=!1,this.wizardStepIndex+=1,this.loadStep(this.apiResourceSteps[this.wizardStepIndex])):(this.hostFormValidated=!0,this.validateFormFields(this.form)),this._loadedStepInstance.formValidated.emit(this.hostFormValidated))}},{key:"goToPreviousStep",value:function(){this.canGoBack&&(this.hostFormValidated=!1,this.wizardStepIndex-=1,this.loadStep(this.apiResourceSteps[this.wizardStepIndex]))}},{key:"saveApiResourceScope",value:function(){var e=this,t=this.form.get("name").value;this._apiResourceStore.addApiResourceScope(this._apiResourceId,{name:t,displayName:this.form.get("displayName").value,description:this.form.get("description").value,userClaims:this.form.get("userClaims").value}).subscribe((function(i){e._toast.showSuccess("API scope '".concat(t,"' was created successfully.")),e._router.navigate(["../"],{relativeTo:e._route})}),(function(t){e._toast.showDanger(t.errors.name[0])}))}},{key:"validateFormFields",value:function(e){var t=this;Object.keys(e.controls).forEach((function(i){var n=e.get(i);n instanceof o.e?n.markAsTouched({onlySelf:!0}):n instanceof o.g&&t.validateFormFields(n)}))}},{key:"loadStep",value:function(e){var t=this,i=this._componentFactoryResolver.resolveComponentFactory(e.component),n=this._wizardStepHost.viewContainerRef;n.clear();var o=n.createComponent(i);this._loadedStepInstance=o.instance,this._loadedStepInstance.data={apiResource:this.resource,form:this.form,displayType:!1},this._formValidatedSubscription&&this._formValidatedSubscription.unsubscribe(),this._formValidatedSubscription=this._loadedStepInstance.formValidated.subscribe((function(e){t.hostFormValidated=e}))}},{key:"canGoFront",get:function(){return this.wizardStepIndex>=0&&this.wizardStepIndex<this.apiResourceSteps.length-1}},{key:"canGoBack",get:function(){return this.wizardStepIndex>0&&this.wizardStepIndex<=this.apiResourceSteps.length-1}},{key:"isSummaryStep",get:function(){return this.wizardStepIndex===this.apiResourceSteps.length-1}}]),e}()).\u0275fac=function(e){return new(e||et)(a.Ob(a.j),a.Ob(o.d),a.Ob(a.h),a.Ob(W),a.Ob(U.a),a.Ob(c.d),a.Ob(c.a))},et.\u0275cmp=a.Ib({type:et,selectors:[["app-api-resource-scope-add"]],viewQuery:function(e,t){var i;1&e&&a.Nc(Me.a,!0),2&e&&a.wc(i=a.hc())&&(t._wizardStepHost=i.first)},decls:15,vars:8,consts:[[1,"row"],[1,"col-sm-12"],[1,"card","m-b-30"],[1,"card-body"],[1,"text-muted","m-b-30","font-14"],["class","m-b-30 text-center",3,"ngClass",4,"ngFor","ngForOf"],["novalidate","",1,"needs-validation",3,"ngClass","formGroup"],["ngForm","ngForm"],["wizardStepHost",""],[1,"form-group"],["type","button","class","btn btn-secondary m-r-5",3,"click",4,"ngIf"],["type","button","class","btn btn-primary m-r-5",3,"click",4,"ngIf"],["type","submit","class","btn btn-primary",3,"click",4,"ngIf"],[1,"m-b-30","text-center",3,"ngClass"],["type","button",1,"btn","btn-secondary","m-r-5",3,"click"],["type","button",1,"btn","btn-primary","m-r-5",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Ub(1,"div",1),a.Ub(2,"div",2),a.Ub(3,"div",3),a.Ub(4,"p",4),a.Ic(5," Add a new scope. "),a.Tb(),a.Gc(6,$e,2,6,"h3",5),a.Ub(7,"form",6,7),a.Gc(9,We,0,0,"ng-template",8),a.Ub(10,"div",9),a.Ub(11,"div"),a.Gc(12,Ye,2,0,"button",10),a.Gc(13,Xe,2,0,"button",11),a.Gc(14,Ze,2,0,"button",12),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb()),2&e&&(a.Bb(6),a.oc("ngForOf",t.apiResourceSteps),a.Bb(1),a.oc("ngClass",a.sc(6,tt,t.hostFormValidated))("formGroup",t.form),a.Bb(5),a.oc("ngIf",t.canGoBack),a.Bb(1),a.oc("ngIf",t.canGoFront),a.Bb(1),a.oc("ngIf",t.isSummaryStep))},directives:[n.l,o.y,o.n,n.k,o.h,Me.a,n.m],encapsulation:2}),et),nt=i("m7xY"),ot=i("G0yt"),st=["apiSecretsList"],rt=["actionsTemplate"],ct=["optionalTemplate"],at=["form"],lt=["deleteAlert"];function ut(e,t){1&e&&(a.Ub(0,"div",33),a.Ic(1," Field 'Type' is required. "),a.Tb())}function dt(e,t){if(1&e){var i=a.Vb();a.Ub(0,"span",34),a.gc("click",(function(){return a.zc(i),a.ic(2).generateValue()})),a.Ub(1,"span",35),a.Ub(2,"i",36),a.Ic(3,"add"),a.Tb(),a.Tb(),a.Tb()}}function pt(e,t){1&e&&(a.Ub(0,"div",33),a.Ic(1," Field 'Value' is required. "),a.Tb())}var bt=function(e){return{"was-validated":e}},mt=function(e){return{invalid:e}};function ft(e,t){if(1&e){var i=a.Vb();a.Ub(0,"form",9,10),a.gc("ngSubmit",(function(){a.zc(i);var e=a.xc(1),t=a.ic();return e.form.valid&&t.update()})),a.Ub(2,"div",11),a.Ub(3,"label",12),a.Ic(4," Type (*) "),a.Tb(),a.Ub(5,"div",13),a.Ub(6,"select",14,15),a.gc("ngModelChange",(function(e){return a.zc(i),a.ic().apiSecret.type=e})),a.Ub(8,"option",16),a.Ic(9,"Shared Secret"),a.Tb(),a.Ub(10,"option",17),a.Ic(11,"X509 Thumbprint"),a.Tb(),a.Tb(),a.Gc(12,ut,2,0,"div",18),a.Tb(),a.Tb(),a.Ub(13,"div",11),a.Ub(14,"label",19),a.Ic(15," Value (*) "),a.Tb(),a.Ub(16,"div",13),a.Ub(17,"div",20),a.Gc(18,dt,4,0,"span",21),a.Ub(19,"input",22,23),a.gc("ngModelChange",(function(e){return a.zc(i),a.ic().apiSecret.value=e})),a.Tb(),a.Tb(),a.Ub(21,"div",24),a.Ic(22,"* You will not be able to access the value after adding it."),a.Tb(),a.Gc(23,pt,2,0,"div",18),a.Tb(),a.Tb(),a.Ub(24,"div",11),a.Ub(25,"label",25),a.Ic(26," Expiration Date "),a.Tb(),a.Ub(27,"div",13),a.Ub(28,"input",26,27),a.gc("ngModelChange",(function(e){return a.zc(i),a.ic().apiSecret.expiration=e}))("focus",(function(){return a.zc(i),a.xc(29).toggle()})),a.Tb(),a.Tb(),a.Tb(),a.Ub(30,"div",11),a.Ub(31,"label",28),a.Ic(32," Description "),a.Tb(),a.Ub(33,"div",13),a.Ub(34,"textarea",29,30),a.gc("ngModelChange",(function(e){return a.zc(i),a.ic().apiSecret.description=e})),a.Ic(36,"        "),a.Tb(),a.Tb(),a.Tb(),a.Ub(37,"div",31),a.Ub(38,"div"),a.Ub(39,"button",32),a.Ic(40," Add "),a.Tb(),a.Tb(),a.Tb(),a.Tb()}if(2&e){var n=a.xc(1),o=a.xc(7),s=a.xc(20),r=a.ic();a.oc("ngClass",a.sc(10,bt,n.submitted)),a.Bb(6),a.oc("ngClass",a.sc(12,mt,n.submitted&&o.invalid))("ngModel",r.apiSecret.type),a.Bb(6),a.oc("ngIf",n.submitted&&o.invalid),a.Bb(6),a.oc("ngIf","SharedSecret"===r.apiSecret.type),a.Bb(1),a.oc("ngClass",a.sc(14,mt,n.submitted&&s.invalid))("ngModel",r.apiSecret.value),a.Bb(4),a.oc("ngIf",n.submitted&&s.invalid),a.Bb(5),a.oc("ngModel",r.apiSecret.expiration),a.Bb(6),a.oc("ngModel",r.apiSecret.description)}}function ht(e,t){if(1&e){var i=a.Vb();a.Ub(0,"button",37),a.gc("click",(function(){a.zc(i);var e=t.value;return a.ic().showDeleteAlert(e)})),a.Ic(1," Remove "),a.Tb()}}function vt(e,t){if(1&e&&(a.Ub(0,"span"),a.Ic(1),a.Tb()),2&e){var i=a.ic().value;a.Bb(1),a.Jc(i)}}function gt(e,t){1&e&&(a.Ub(0,"span"),a.Ic(1," - "),a.Tb())}function yt(e,t){if(1&e&&(a.Gc(0,vt,2,1,"span",38),a.Gc(1,gt,2,0,"span",38)),2&e){var i=t.value;a.oc("ngIf",i),a.Bb(1),a.oc("ngIf",!i)}}var _t,Rt=((_t=function(){function e(t,i,n,o){_classCallCheck(this,e),this._utilities=t,this._route=i,this._apiResourceStore=n,this._toast=o,this.columns=[],this.rows=[],this.apiSecret=new l.k({type:l.p.SharedSecret})}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.columns=[{prop:"type",name:"Type",draggable:!1,canAutoResize:!0,sortable:!1,resizeable:!1},{prop:"valueText",name:"Value",draggable:!1,canAutoResize:!0,sortable:!1,resizeable:!1},{prop:"expiration",name:"Expiration",draggable:!1,canAutoResize:!0,sortable:!1,resizeable:!1,cellTemplate:this._apiSecretsList.dateTimeTemplate,cellClass:"d-flex align-items-center"},{prop:"description",name:"Description",draggable:!1,canAutoResize:!0,sortable:!1,resizeable:!1,cellTemplate:this._optionalTemplate,cellClass:"d-flex align-items-center"},{prop:"id",name:"Actions",draggable:!1,canAutoResize:!0,sortable:!1,resizeable:!1,cellTemplate:this._actionsTemplate,cellClass:"d-flex align-items-center"}],this._apiResourceId=+this._route.parent.snapshot.params.id,this._getDataSubscription=this._apiResourceStore.getApiResource(this._apiResourceId).subscribe((function(t){e.apiResource=t,e.apiResource.secrets&&e.apiResource.secrets.forEach((function(e){e.valueText="Value is hidden"})),e.rows=t.secrets}))}},{key:"ngOnDestroy",value:function(){this._getDataSubscription&&this._getDataSubscription.unsubscribe()}},{key:"generateValue",value:function(){this.apiSecret.value=this._utilities.newGuid()}},{key:"update",value:function(){var e=this;if(this.apiSecret.type&&this.apiSecret.value){var t=this.apiSecret.expiration;this.apiSecret.expiration=t?new Date(t.year,t.month-1,t.day):void 0,this._apiResourceStore.addApiResourceSecret(this._apiResourceId,this.apiSecret).subscribe((function(t){e.rows=_toConsumableArray(e.apiResource.secrets),e._form.resetForm({"client-secret-type":l.p.SharedSecret,"client-secret-value":"","expiration-date":"",description:""}),e._toast.showSuccess("API secret was added successfully.")}))}}},{key:"showDeleteAlert",value:function(e){var t=this;this.secretToDelete=this.rows.find((function(t){return t.id===e})),setTimeout((function(){return t._deleteAlert.fire()}),0)}},{key:"delete",value:function(){var e=this;this._apiResourceStore.deleteApiResourceSecret(this._apiResourceId,this.secretToDelete).subscribe((function(t){e.rows=_toConsumableArray(e.apiResource.secrets),e._toast.showSuccess("API secret was deleted successfully.")}))}}]),e}()).\u0275fac=function(e){return new(e||_t)(a.Ob(ae.a),a.Ob(c.a),a.Ob(W),a.Ob(U.a))},_t.\u0275cmp=a.Ib({type:_t,selectors:[["app-api-resource-secrets"]],viewQuery:function(e,t){var i;1&e&&(a.Ec(st,!0),a.Ec(rt,!0),a.Ec(ct,!0),a.Nc(at,!0),a.Nc(lt,!0)),2&e&&(a.wc(i=a.hc())&&(t._apiSecretsList=i.first),a.wc(i=a.hc())&&(t._actionsTemplate=i.first),a.wc(i=a.hc())&&(t._optionalTemplate=i.first),a.wc(i=a.hc())&&(t._form=i.first),a.wc(i=a.hc())&&(t._deleteAlert=i.first))},features:[a.Ab([nt.a])],decls:13,vars:9,consts:[["title","Delete?","type","warning",3,"text","showCancelButton","confirm"],["deleteAlert",""],["class","needs-validation","novalidate","",3,"ngClass","ngSubmit",4,"ngIf"],[1,"mt-3","mb-3"],[1,"col-12"],[3,"clientSide","rowsPerPage","canFilter","columns","rows","defaultSortDirection"],["apiSecretsList",""],["actionsTemplate",""],["optionalTemplate",""],["novalidate","",1,"needs-validation",3,"ngClass","ngSubmit"],["form","ngForm"],[1,"form-group","row"],["for","client-secret-type",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["id","client-secret-type","name","client-secret-type","required","",1,"form-control","custom-select",3,"ngClass","ngModel","ngModelChange"],["secret","ngModel"],["value","SharedSecret"],["value","X509Thumbprint"],["class","form-control-feedback text-danger",4,"ngIf"],["for","client-secret-value",1,"col-sm-2","col-form-label"],[1,"input-group"],["class","input-group-prepend cursor-pointer","title","Generate a random value.",3,"click",4,"ngIf"],["type","text","id","client-secret-value","name","client-secret-value","required","","maxlength","4000",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["value","ngModel"],[1,"text-muted"],["for","expiration-date",1,"col-sm-2","col-form-label"],["type","text","id","expiration-date","name","expiration-date","placeholder","mm-dd-yyyy","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","focus"],["datePicker","ngbDatepicker"],["for","description",1,"col-sm-2","col-form-label"],["rows","3","type","text","id","description","name","description","maxlength","2000",1,"form-control",3,"ngModel","ngModelChange"],["description","ngModel"],[1,"form-group"],["type","submit",1,"btn","btn-primary","m-r-5"],[1,"form-control-feedback","text-danger"],["title","Generate a random value.",1,"input-group-prepend","cursor-pointer",3,"click"],[1,"input-group-text"],[1,"material-icons","align-middle","font-12"],["role","button",1,"btn","btn-danger",3,"click"],[4,"ngIf"]],template:function(e,t){1&e&&(a.Ub(0,"swal",0,1),a.gc("confirm",(function(){return t.delete()})),a.Tb(),a.Gc(2,ft,41,16,"form",2),a.Pb(3,"hr"),a.Ub(4,"div",3),a.Ub(5,"div",4),a.Pb(6,"app-list-view",5,6),a.Tb(),a.Gc(8,ht,2,0,"ng-template",null,7,a.Hc),a.Gc(10,yt,2,2,"ng-template",null,8,a.Hc),a.Tb(),a.Pb(12,"hr")),2&e&&(a.oc("text","Selected secret will be deleted permanently. This action cannot be reversed.")("showCancelButton",!0),a.Bb(2),a.oc("ngIf",t.apiResource),a.Bb(4),a.oc("clientSide",!0)("rowsPerPage",10)("canFilter",!1)("columns",t.columns)("rows",t.rows)("defaultSortDirection","Asc"))},directives:[s.a,n.m,u.a,o.y,o.n,o.o,n.k,o.v,o.u,o.m,o.p,o.q,o.x,o.b,o.j,ot.h],encapsulation:2}),_t),Tt=function(e){return{"d-none":e}};function It(e,t){if(1&e&&(a.Ub(0,"h3",14),a.Ic(1),a.Tb()),2&e){var i=t.$implicit,n=t.index,o=a.ic();a.oc("ngClass",a.sc(4,Tt,n!==o.wizardStepIndex)),a.Bb(1),a.Mc(" Step ",o.wizardStepIndex+1," of ",o.apiResourceSteps.length," - ",i.title," ")}}function Ct(e,t){}function St(e,t){if(1&e){var i=a.Vb();a.Ub(0,"button",15),a.gc("click",(function(){return a.zc(i),a.ic().goToPreviousStep()})),a.Ic(1," Previous Step "),a.Tb()}}function Ut(e,t){if(1&e){var i=a.Vb();a.Ub(0,"button",16),a.gc("click",(function(){return a.zc(i),a.ic().goToNextStep()})),a.Ic(1," Next Step "),a.Tb()}}function wt(e,t){if(1&e){var i=a.Vb();a.Ub(0,"button",17),a.gc("click",(function(){return a.zc(i),a.ic().saveResource()})),a.Ic(1," Save "),a.Tb()}}var kt,At,xt,Ot=function(e){return{"was-validated":e}},zt=[{path:"",redirectTo:"identity",pathMatch:"full"},{path:"identity",component:v},{path:"add",component:(kt=function(){function e(t,i,n,o,s,r,c){_classCallCheck(this,e),this._componentFactoryResolver=t,this._formBuilder=i,this._changeDetectionRef=n,this._api=o,this._toast=s,this._router=r,this._route=c,this.wizardStepIndex=0,this.apiResourceSteps=[],this.hostFormValidated=!1,this.resource=new l.i}return _createClass(e,[{key:"ngOnInit",value:function(){this.form=this._formBuilder.group({type:["",[o.w.required]],name:["",[o.w.required,o.w.maxLength(200)]],displayName:["",[o.w.maxLength(200)]],description:["",[o.w.maxLength(1e3)]],userClaims:[[]]}),this.apiResourceSteps=[new Be.a("Basic Details",Je),new Be.a("User Claims",Ve)],this._navigationOrigin=history.state.origin,this._changeDetectionRef.detectChanges(),this.loadStep(this.apiResourceSteps[0])}},{key:"goToNextStep",value:function(){this.canGoFront&&(this._loadedStepInstance.isValid()?(this.hostFormValidated=!1,this.wizardStepIndex+=1,this.loadStep(this.apiResourceSteps[this.wizardStepIndex])):(this.hostFormValidated=!0,this.validateFormFields(this.form)),this._loadedStepInstance.formValidated.emit(this.hostFormValidated))}},{key:"goToPreviousStep",value:function(){this.canGoBack&&(this.hostFormValidated=!1,this.wizardStepIndex-=1,this.loadStep(this.apiResourceSteps[this.wizardStepIndex]))}},{key:"saveResource",value:function(){var e=this,t=this.form.get("type").value,i={name:this.form.get("name").value,displayName:this.form.get("displayName").value,description:this.form.get("description").value,userClaims:this.form.get("userClaims").value};"api"===t&&this._api.createApiResource(i).subscribe((function(t){e._toast.showSuccess("API resource '".concat(t.name,"' was created successfully.")),e._router.navigate(["../api"],{relativeTo:e._route})})),"identity"===t&&this._api.createIdentityResource(i).subscribe((function(t){e._toast.showSuccess("Identity resource '".concat(t.name,"' was created successfully.")),e._router.navigate(["../identity"],{relativeTo:e._route})}))}},{key:"validateFormFields",value:function(e){var t=this;Object.keys(e.controls).forEach((function(i){var n=e.get(i);n instanceof o.e?n.markAsTouched({onlySelf:!0}):n instanceof o.g&&t.validateFormFields(n)}))}},{key:"loadStep",value:function(e){var t=this,i=this._componentFactoryResolver.resolveComponentFactory(e.component),n=this._wizardStepHost.viewContainerRef;n.clear();var o=n.createComponent(i);this._loadedStepInstance=o.instance,this._loadedStepInstance.data={apiResource:this.resource,form:this.form,displayType:!0,navigationOrigin:this._navigationOrigin},this._formValidatedSubscription&&this._formValidatedSubscription.unsubscribe(),this._formValidatedSubscription=this._loadedStepInstance.formValidated.subscribe((function(e){t.hostFormValidated=e}))}},{key:"canGoFront",get:function(){return this.wizardStepIndex>=0&&this.wizardStepIndex<this.apiResourceSteps.length-1}},{key:"canGoBack",get:function(){return this.wizardStepIndex>0&&this.wizardStepIndex<=this.apiResourceSteps.length-1}},{key:"isSummaryStep",get:function(){return this.wizardStepIndex===this.apiResourceSteps.length-1}}]),e}(),kt.\u0275fac=function(e){return new(e||kt)(a.Ob(a.j),a.Ob(o.d),a.Ob(a.h),a.Ob(l.n),a.Ob(U.a),a.Ob(c.d),a.Ob(c.a))},kt.\u0275cmp=a.Ib({type:kt,selectors:[["app-resource-add"]],viewQuery:function(e,t){var i;1&e&&a.Nc(Me.a,!0),2&e&&a.wc(i=a.hc())&&(t._wizardStepHost=i.first)},features:[a.Ab([W])],decls:17,vars:8,consts:[[1,"row"],[1,"col-sm-12"],[1,"card","m-b-30","m-t-30"],[1,"card-body"],[1,"mt-0","header-title"],[1,"text-muted","m-b-30","font-14"],["class","m-b-30 text-center",3,"ngClass",4,"ngFor","ngForOf"],["novalidate","",1,"needs-validation",3,"ngClass","formGroup"],["ngForm","ngForm"],["wizardStepHost",""],[1,"form-group"],["type","button","class","btn btn-secondary m-r-5",3,"click",4,"ngIf"],["type","button","class","btn btn-primary m-r-5",3,"click",4,"ngIf"],["type","submit","class","btn btn-primary",3,"click",4,"ngIf"],[1,"m-b-30","text-center",3,"ngClass"],["type","button",1,"btn","btn-secondary","m-r-5",3,"click"],["type","button",1,"btn","btn-primary","m-r-5",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Ub(1,"div",1),a.Ub(2,"div",2),a.Ub(3,"div",3),a.Ub(4,"h4",4),a.Ic(5,"Add Resource"),a.Tb(),a.Ub(6,"p",5),a.Ic(7," Create a new Resource. "),a.Tb(),a.Gc(8,It,2,6,"h3",6),a.Ub(9,"form",7,8),a.Gc(11,Ct,0,0,"ng-template",9),a.Ub(12,"div",10),a.Ub(13,"div"),a.Gc(14,St,2,0,"button",11),a.Gc(15,Ut,2,0,"button",12),a.Gc(16,wt,2,0,"button",13),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb()),2&e&&(a.Bb(8),a.oc("ngForOf",t.apiResourceSteps),a.Bb(1),a.oc("ngClass",a.sc(6,Ot,t.hostFormValidated))("formGroup",t.form),a.Bb(5),a.oc("ngIf",t.canGoBack),a.Bb(1),a.oc("ngIf",t.canGoFront),a.Bb(1),a.oc("ngIf",t.isSummaryStep))},directives:[n.l,o.y,o.n,n.k,o.h,Me.a,n.m],encapsulation:2}),kt)},{path:"identity/:id",component:S,children:[{path:"",redirectTo:"details",pathMatch:"full"},{path:"details",component:D},{path:"claims",component:F}]},{path:"api",component:$},{path:"api/:id",component:te,children:[{path:"",redirectTo:"details",pathMatch:"full"},{path:"details",component:ce},{path:"scopes",component:ke},{path:"scopes/add",component:it},{path:"claims",component:De},{path:"secrets",component:Rt}]}],Dt=((xt=function e(){_classCallCheck(this,e)}).\u0275mod=a.Mb({type:xt}),xt.\u0275inj=a.Lb({factory:function(e){return new(e||xt)},imports:[[c.h.forChild(zt)],c.h]}),xt),Bt=((At=function e(){_classCallCheck(this,e)}).\u0275mod=a.Mb({type:At}),At.\u0275inj=a.Lb({factory:function(e){return new(e||At)},imports:[[n.c,o.i,o.t,Dt,r.a,s.c,ot.c]]}),At)}}]);