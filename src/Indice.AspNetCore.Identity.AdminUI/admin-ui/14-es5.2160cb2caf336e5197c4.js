function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{qRw5:function(e,t,i){"use strict";i.r(t),i.d(t,"UsersModule",(function(){return qe}));var n=i("SVse"),r=i("s7LF"),a=i("G0yt"),s=i("hvj1"),o=i("iInd"),c=i("8Y7J"),l=i("onTr"),u=i("fQZA"),b=["usersList"],d=["actionsTemplate"],m=["optionalTemplate"];function p(e,t){if(1&e&&(c.Ub(0,"a",13),c.Ic(1,"Edit"),c.Tb()),2&e){var i=c.ic().value;c.oc("routerLink",i+"/details")}}function f(e,t){1&e&&c.Gc(0,p,2,1,"a",12),2&e&&c.oc("ngIf",t.value)}function g(e,t){if(1&e&&(c.Ub(0,"span"),c.Ic(1),c.Tb()),2&e){var i=c.ic().value;c.Bb(1),c.Jc(i)}}function h(e,t){1&e&&(c.Ub(0,"span"),c.Ic(1," - "),c.Tb())}function v(e,t){if(1&e&&(c.Gc(0,g,2,1,"span",14),c.Gc(1,h,2,0,"span",14)),2&e){var i=t.value;c.oc("ngIf",i),c.Bb(1),c.oc("ngIf",!i)}}var U,T=((U=function(){function e(t){_classCallCheck(this,e),this.api=t,this.count=0,this.rows=[],this.columns=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.columns=[{prop:"userName",name:"Username",draggable:!1,canAutoResize:!0,sortable:!0,resizeable:!0,cellTemplate:this._usersList.usernameTemplate},{prop:"email",name:"Email",draggable:!1,canAutoResize:!0,sortable:!0,resizeable:!0,cellTemplate:this._usersList.emailTemplate},{prop:"lastName",name:"Last Name",draggable:!1,canAutoResize:!0,sortable:!0,resizeable:!0,cellTemplate:this._optionalTemplate},{prop:"firstName",name:"First Name",draggable:!1,canAutoResize:!0,sortable:!0,resizeable:!0,cellTemplate:this._optionalTemplate},{prop:"phoneNumber",name:"Phone Number",draggable:!1,canAutoResize:!0,sortable:!1,resizeable:!0,cellTemplate:this._usersList.phoneNumberTemplate},{prop:"createDate",name:"Create Date",draggable:!1,canAutoResize:!1,sortable:!0,resizeable:!1,cellTemplate:this._usersList.dateTimeTemplate,width:200},{prop:"isAdmin",name:"Admin",draggable:!1,canAutoResize:!1,sortable:!0,resizeable:!1,cellTemplate:this._usersList.booleanTemplate,width:80},{prop:"id",name:"Actions",draggable:!1,canAutoResize:!1,sortable:!1,resizeable:!1,cellTemplate:this._actionsTemplate,cellClass:"d-flex align-items-center",width:100}]}},{key:"getUsers",value:function(e){var t=this;this.api.getUsers(void 0,void 0,e.page,e.pageSize,e.sortField,e.searchTerm).subscribe((function(e){t.count=e.count,t.rows=e.items}))}}]),e}()).\u0275fac=function(e){return new(e||U)(c.Ob(l.n))},U.\u0275cmp=c.Ib({type:U,selectors:[["app-users"]],viewQuery:function(e,t){var i;1&e&&(c.Ec(b,!0),c.Ec(d,!0),c.Ec(m,!0)),2&e&&(c.wc(i=c.hc())&&(t._usersList=i.first),c.wc(i=c.hc())&&(t._actionsTemplate=i.first),c.wc(i=c.hc())&&(t._optionalTemplate=i.first))},decls:17,vars:9,consts:[[1,"row"],[1,"col-sm-12"],[1,"page-title-box"],[1,"row","align-items-center"],[1,"col-md-8"],[1,"page-title","m-0"],[1,"text-muted","font-14"],[1,"col-12"],[3,"clientSide","columns","rows","count","rowsPerPage","defaultSortField","defaultSortDirection","canFilter","search"],["usersList",""],["actionsTemplate",""],["optionalTemplate",""],["class","btn btn-success","href","#","role","button",3,"routerLink",4,"ngIf"],["href","#","role","button",1,"btn","btn-success",3,"routerLink"],[4,"ngIf"]],template:function(e,t){1&e&&(c.Ub(0,"div",0),c.Ub(1,"div",1),c.Ub(2,"div",2),c.Ub(3,"div",3),c.Ub(4,"div",4),c.Ub(5,"h4",5),c.Ic(6),c.Tb(),c.Ub(7,"p",6),c.Ic(8," Get a list of all system users. "),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(9,"div",0),c.Ub(10,"div",7),c.Ub(11,"app-list-view",8,9),c.gc("search",(function(e){return t.getUsers(e)})),c.Tb(),c.Tb(),c.Tb(),c.Gc(13,f,1,1,"ng-template",null,10,c.Hc),c.Gc(15,v,2,2,"ng-template",null,11,c.Hc)),2&e&&(c.Bb(6),c.Kc("Users List (",t.count,")"),c.Bb(5),c.oc("clientSide",!1)("columns",t.columns)("rows",t.rows)("count",t.count)("rowsPerPage",15)("defaultSortField","lastName")("defaultSortDirection","Asc")("canFilter",!0))},directives:[u.a,n.m,o.g],encapsulation:2}),U),y=i("1uCz"),_=i("1+MP"),C=["validationSummary"];function w(e,t){1&e&&(c.Ub(0,"div",30),c.Ic(1," Field 'Username' is required. "),c.Tb())}function I(e,t){1&e&&(c.Ub(0,"div",30),c.Ic(1," Field 'Email' is required. "),c.Tb())}function k(e,t){1&e&&(c.Ub(0,"div",30),c.Ic(1," Please enter a valid email address. "),c.Tb())}function S(e,t){1&e&&(c.Ub(0,"div",30),c.Ic(1," Field 'Password' is required. "),c.Tb())}var x,M,P,A=function(e){return{"was-validated":e}},B=function(e){return{invalid:e}},O=((x=function(){function e(t,i,n,r){_classCallCheck(this,e),this._api=t,this._route=i,this._router=n,this._toast=r,this._saveAndConfigure=!1,this.user=new l.l}return _createClass(e,[{key:"setSaveAndConfigure",value:function(e){this._saveAndConfigure=e}},{key:"save",value:function(){var e=this;this._validationSummary.clear(),this._api.createUser(this.user).subscribe((function(t){e._toast.showSuccess("User '".concat(t.email,"' was created successfully.")),e._saveAndConfigure?e._router.navigateByUrl("/app/users/".concat(t.id,"/details")):e._router.navigate(["../"],{relativeTo:e._route})}),(function(t){e.problemDetails=t}))}}]),e}()).\u0275fac=function(e){return new(e||x)(c.Ob(l.n),c.Ob(o.a),c.Ob(o.d),c.Ob(y.a))},x.\u0275cmp=c.Ib({type:x,selectors:[["app-user-add"]],viewQuery:function(e,t){var i;1&e&&c.Nc(C,!0),2&e&&c.wc(i=c.hc())&&(t._validationSummary=i.first)},decls:52,vars:28,consts:[[1,"row"],[1,"col-12"],[1,"card","m-b-30","m-t-30"],[1,"card-body"],[1,"mt-0","header-title"],[1,"text-muted","m-b-30","font-14"],["novalidate","",1,"needs-validation",3,"ngClass","ngSubmit"],["form","ngForm"],[3,"problemDetails"],["validationSummary",""],[1,"form-group","row"],["for","first-name",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["id","first-name","name","first-name","type","text","maxlength","256",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["firstName","ngModel"],["for","last-name",1,"col-sm-2","col-form-label"],["id","last-name","name","last-name","type","text","maxlength","256",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["lastName","ngModel"],["for","userName",1,"col-sm-2","col-form-label"],["id","userName","name","userName","type","text","required","","maxlength","256",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["userName","ngModel"],["class","form-control-feedback text-danger",4,"ngIf"],["for","email",1,"col-sm-2","col-form-label"],["id","email","name","email","type","email","email","","required","","maxlength","256",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["email","ngModel"],["for","password",1,"col-sm-2","col-form-label"],["id","password","name","password","type","password","required","",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["password","ngModel"],[1,"form-group"],["type","submit",1,"btn","btn-primary","waves-effect","waves-light","m-r-5",3,"click"],[1,"form-control-feedback","text-danger"]],template:function(e,t){if(1&e){var i=c.Vb();c.Ub(0,"div",0),c.Ub(1,"div",1),c.Ub(2,"div",2),c.Ub(3,"div",3),c.Ub(4,"h4",4),c.Ic(5,"Add User"),c.Tb(),c.Ub(6,"p",5),c.Ic(7," Create a new user. "),c.Tb(),c.Ub(8,"form",6,7),c.gc("ngSubmit",(function(){return c.zc(i),c.xc(9).form.valid&&t.save()})),c.Pb(10,"app-validation-summary",8,9),c.Ub(12,"div",10),c.Ub(13,"label",11),c.Ic(14," First Name "),c.Tb(),c.Ub(15,"div",12),c.Ub(16,"input",13,14),c.gc("ngModelChange",(function(e){return t.user.firstName=e})),c.Tb(),c.Tb(),c.Tb(),c.Ub(18,"div",10),c.Ub(19,"label",15),c.Ic(20," Last Name "),c.Tb(),c.Ub(21,"div",12),c.Ub(22,"input",16,17),c.gc("ngModelChange",(function(e){return t.user.lastName=e})),c.Tb(),c.Tb(),c.Tb(),c.Ub(24,"div",10),c.Ub(25,"label",18),c.Ic(26," Username (*) "),c.Tb(),c.Ub(27,"div",12),c.Ub(28,"input",19,20),c.gc("ngModelChange",(function(e){return t.user.userName=e})),c.Tb(),c.Gc(30,w,2,0,"div",21),c.Tb(),c.Tb(),c.Ub(31,"div",10),c.Ub(32,"label",22),c.Ic(33," Email (*) "),c.Tb(),c.Ub(34,"div",12),c.Ub(35,"input",23,24),c.gc("ngModelChange",(function(e){return t.user.email=e})),c.Tb(),c.Gc(37,I,2,0,"div",21),c.Gc(38,k,2,0,"div",21),c.Tb(),c.Tb(),c.Ub(39,"div",10),c.Ub(40,"label",25),c.Ic(41," Password (*) "),c.Tb(),c.Ub(42,"div",12),c.Ub(43,"input",26,27),c.gc("ngModelChange",(function(e){return t.user.password=e})),c.Tb(),c.Gc(45,S,2,0,"div",21),c.Tb(),c.Tb(),c.Ub(46,"div",28),c.Ub(47,"div"),c.Ub(48,"button",29),c.gc("click",(function(){return t.setSaveAndConfigure(!0)})),c.Ic(49," Save & Configure "),c.Tb(),c.Ub(50,"button",29),c.gc("click",(function(){return t.setSaveAndConfigure(!1)})),c.Ic(51," Save "),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb()}if(2&e){var n=c.xc(9),r=c.xc(17),a=c.xc(23),s=c.xc(29),o=c.xc(36),l=c.xc(44);c.Bb(8),c.oc("ngClass",c.sc(16,A,n.submitted)),c.Bb(2),c.oc("problemDetails",t.problemDetails),c.Bb(6),c.oc("ngClass",c.sc(18,B,n.submitted&&r.invalid))("ngModel",t.user.firstName),c.Bb(6),c.oc("ngClass",c.sc(20,B,n.submitted&&a.invalid))("ngModel",t.user.lastName),c.Bb(6),c.oc("ngClass",c.sc(22,B,n.submitted&&s.invalid))("ngModel",t.user.userName),c.Bb(2),c.oc("ngIf",n.submitted&&s.invalid),c.Bb(5),c.oc("ngClass",c.sc(24,B,n.submitted&&o.invalid))("ngModel",t.user.email),c.Bb(2),c.oc("ngIf",n.submitted&&o.invalid&&o.errors.required),c.Bb(1),c.oc("ngIf",n.submitted&&o.invalid&&o.errors.email),c.Bb(5),c.oc("ngClass",c.sc(26,B,n.submitted&&l.invalid))("ngModel",t.user.password),c.Bb(2),c.oc("ngIf",n.submitted&&l.invalid)}},directives:[r.y,r.n,r.o,n.k,_.a,r.b,r.j,r.m,r.p,r.u,n.m,r.c],encapsulation:2}),x),N=i("NHP+"),R=i("lJxs"),z=((M=function(){function e(t){_classCallCheck(this,e),this._api=t}return _createClass(e,[{key:"getUser",value:function(e){var t=this;return this._user||(this._user=new N.a,this._api.getUser(e).subscribe((function(e){t._user.next(e),t._user.complete()}))),this._user}},{key:"updateUser",value:function(e,t){var i=this,n=t?t.map((function(e){return{type:e.name,value:e.value}})):null;return this._api.updateUser(e.id,{email:e.email,phoneNumber:e.phoneNumber,twoFactorEnabled:e.twoFactorEnabled,userName:e.userName,passwordExpirationPolicy:e.passwordExpirationPolicy,isAdmin:e.isAdmin,emailConfirmed:e.emailConfirmed,phoneNumberConfirmed:e.phoneNumberConfirmed,claims:n}).pipe(Object(R.a)((function(t){e.claims=_toConsumableArray(t.claims),i._user.next(e),i._user.complete()})))}},{key:"deleteUser",value:function(e){return this._api.deleteUser(e)}},{key:"blockUser",value:function(e){var t=this;return this.getUser(e).subscribe((function(e){e.blocked=!0,t._user.next(e),t._user.complete()})),this._api.setUserBlock(e,{blocked:!0})}},{key:"unblockUser",value:function(e){var t=this;return this.getUser(e).subscribe((function(e){e.blocked=!1,t._user.next(e),t._user.complete()})),this._api.setUserBlock(e,{blocked:!1})}},{key:"unlockUser",value:function(e){var t=this;return this.getUser(e).subscribe((function(e){e.lockoutEnd=null,e.accessFailedCount=0,t._user.next(e),t._user.complete()})),this._api.unlockUser(e)}},{key:"resetPassword",value:function(e,t,i){var n=this;return this.getUser(e).subscribe((function(e){n._user.next(e),n._user.complete()})),this._api.setPassword(e,{password:t,changePasswordAfterFirstSignIn:i})}},{key:"addUserRole",value:function(e,t){var i=this;return this.getUser(e).subscribe((function(e){e.roles.push(t.name),i._user.next(e),i._user.complete()})),this._api.addUserRole(e,t.id)}},{key:"deleteUserRole",value:function(e,t){var i=this;return this.getUser(e).subscribe((function(e){var n=e.roles.indexOf(t.name,0);n>-1&&e.roles.splice(n,1),i._user.next(e),i._user.complete()})),this._api.deleteUserRole(e,t.id)}},{key:"addClaim",value:function(e,t){var i=this;return this._api.addUserClaim(e,{type:t.type,value:t.value}).pipe(Object(R.a)((function(t){i.getUser(e).subscribe((function(e){e.claims.push(t),i._user.next(e),i._user.complete()}))})))}},{key:"updateUserClaim",value:function(e,t,i){var n=this;return this._api.updateUserClaim(e,t,{claimValue:i}).pipe(Object(R.a)((function(r){n.getUser(e).subscribe((function(e){e.claims.find((function(e){return e.id===t})).value=i,n._user.next(e),n._user.complete()}))})))}},{key:"deleteUserClaim",value:function(e,t){var i=this;return this._api.deleteUserClaim(e,t).pipe(Object(R.a)((function(n){i.getUser(e).subscribe((function(e){var n=e.claims.find((function(e){return e.id===t})),r=e.claims.indexOf(n,0);r>-1&&e.claims.splice(r,1),i._user.next(e),i._user.complete()}))})))}},{key:"getUserApplications",value:function(e){var t=this;return this._userApplications||(this._userApplications=new N.a,this._api.getUserApplications(e).subscribe((function(e){t._userApplications.next(e.items),t._userApplications.complete()}))),this._userApplications}},{key:"getAllRoles",value:function(){var e=this;return this._allRoles||(this._allRoles=new N.a,this._api.getRoles(1,2147483647,"name+",void 0).subscribe((function(t){e._allRoles.next(t.items),e._allRoles.complete()}))),this._allRoles}},{key:"getAllClaims",value:function(){var e=this;return this._allClaims||(this._allClaims=new N.a,this._api.getClaimTypes(void 0,1,2147483647,"name+",void 0).subscribe((function(t){e._allClaims.next(t.items),e._allClaims.complete()}))),this._allClaims}}]),e}()).\u0275fac=function(e){return new(e||M)(c.cc(l.n))},M.\u0275prov=c.Kb({token:M,factory:M.\u0275fac}),M),D=i("OsF4"),F=function(){return["details"]},L=function(){return["roles"]},E=function(){return["additional-details"]},q=function(){return["applications"]},G=((P=function(){function e(t,i){_classCallCheck(this,e),this.route=t,this.logger=i,this.userId=""}return _createClass(e,[{key:"ngOnInit",value:function(){this.logger.log("UserEditComponent ngOnInit was called."),this.userId=this.route.snapshot.params.id}}]),e}()).\u0275fac=function(e){return new(e||P)(c.Ob(o.a),c.Ob(D.a))},P.\u0275cmp=c.Ib({type:P,selectors:[["app-user-edit"]],features:[c.Ab([z])],decls:24,vars:9,consts:[[1,"row"],[1,"col-12"],[1,"card","m-b-30","m-t-30"],[1,"card-body"],[1,"mt-0","header-title"],[1,"text-muted","m-b-30","font-14"],["role","tablist",1,"nav","nav-tabs","justify-content-start"],[1,"nav-item"],["routerLinkActive","active","role","tab","id","user-details-tab",1,"nav-link",3,"routerLink"],["routerLinkActive","active","role","tab","id","user-roles-tab",1,"nav-link",3,"routerLink"],["routerLinkActive","active","role","tab","id","user-additional-details-tab",1,"nav-link",3,"routerLink"],["routerLinkActive","active","role","tab","id","user-applications-tab",1,"nav-link",3,"routerLink"],[1,"tab-content"],["role","tabpanel",1,"tab-pane","active"]],template:function(e,t){1&e&&(c.Ub(0,"div",0),c.Ub(1,"div",1),c.Ub(2,"div",2),c.Ub(3,"div",3),c.Ub(4,"h4",4),c.Ic(5),c.Tb(),c.Ub(6,"p",5),c.Ic(7," Here you can modify some properties of a system user. "),c.Tb(),c.Ub(8,"ul",6),c.Ub(9,"li",7),c.Ub(10,"a",8),c.Ic(11," Details "),c.Tb(),c.Tb(),c.Ub(12,"li",7),c.Ub(13,"a",9),c.Ic(14," Roles "),c.Tb(),c.Tb(),c.Ub(15,"li",7),c.Ub(16,"a",10),c.Ic(17," Additional Details "),c.Tb(),c.Tb(),c.Ub(18,"li",7),c.Ub(19,"a",11),c.Ic(20," Applications "),c.Tb(),c.Tb(),c.Tb(),c.Ub(21,"div",12),c.Ub(22,"div",13),c.Pb(23,"router-outlet"),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb()),2&e&&(c.Bb(5),c.Kc("Edit User - ",t.userId,""),c.Bb(5),c.oc("routerLink",c.rc(5,F)),c.Bb(3),c.oc("routerLink",c.rc(6,L)),c.Bb(3),c.oc("routerLink",c.rc(7,E)),c.Bb(3),c.oc("routerLink",c.rc(8,q)))},directives:[o.g,o.f,o.i],encapsulation:2}),P),j=i("cp0P"),V=i("m7xY"),K=i("7dP1");function H(e,t){if(1&e){var i=c.Vb();c.Ub(0,"input",4),c.gc("ngModelChange",(function(e){return c.zc(i),c.ic().value=e}))("ngModelChange",(function(){return c.zc(i),c.ic().updateChanges()})),c.Tb()}if(2&e){var n=c.ic();c.oc("id",n.id)("name",n.name)("ngModel",n.value)("placeholder",n.placeholder||"")}}function J(e,t){if(1&e){var i=c.Vb();c.Ub(0,"select",5),c.gc("ngModelChange",(function(e){return c.zc(i),c.ic().value=e}))("ngModelChange",(function(){return c.zc(i),c.ic().updateChanges()})),c.Ub(1,"option",6),c.Ic(2,"Please select a suitable value"),c.Tb(),c.Ub(3,"option",7),c.Ic(4,"Yes"),c.Tb(),c.Ub(5,"option",8),c.Ic(6,"No"),c.Tb(),c.Tb()}if(2&e){var n=c.ic();c.oc("id",n.id)("name",n.name)("ngModel",n.value)}}function Q(e,t){if(1&e){var i=c.Vb();c.Ub(0,"input",9),c.gc("ngModelChange",(function(e){return c.zc(i),c.ic().value=e}))("ngModelChange",(function(){return c.zc(i),c.ic().updateChanges()})),c.Tb()}if(2&e){var n=c.ic();c.oc("id",n.id)("ngModel",n.value)("placeholder",n.placeholder||"")}}function $(e,t){if(1&e){var i=c.Vb();c.Ub(0,"input",10,11),c.gc("ngModelChange",(function(e){return c.zc(i),c.ic().value=e}))("ngModelChange",(function(){return c.zc(i),c.ic().updateChanges()}))("focus",(function(){return c.zc(i),c.xc(1).toggle()})),c.Tb()}if(2&e){var n=c.ic();c.oc("id",n.id)("name",n.name)("placeholder",n.placeholder||"mm-dd-yyyy")("ngModel",n.value)}}var Y,W=((Y=function(){function e(){_classCallCheck(this,e),this.onChange=function(e){},this.onTouched=function(){}}return _createClass(e,[{key:"updateChanges",value:function(){this.onChange(this.value)}},{key:"writeValue",value:function(e){this.value=e,this.updateChanges()}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){}}]),e}()).\u0275fac=function(e){return new(e||Y)},Y.\u0275cmp=c.Ib({type:Y,selectors:[["app-dynamic-input"]],inputs:{id:"id",name:"name",modelType:"modelType",placeholder:"placeholder"},features:[c.Ab([{provide:r.l,useExisting:Object(c.T)((function(){return Y})),multi:!0}])],decls:4,vars:4,consts:[["class","form-control","type","text","required","",3,"id","name","ngModel","placeholder","ngModelChange",4,"ngIf"],["class","form-control custom-select","required","",3,"id","name","ngModel","ngModelChange",4,"ngIf"],["class","form-control","type","number","required","",3,"id","ngModel","placeholder","ngModelChange",4,"ngIf"],["class","form-control","ngbDatepicker","","required","",3,"id","name","placeholder","ngModel","ngModelChange","focus",4,"ngIf"],["type","text","required","",1,"form-control",3,"id","name","ngModel","placeholder","ngModelChange"],["required","",1,"form-control","custom-select",3,"id","name","ngModel","ngModelChange"],["value","","disabled",""],["value","true"],["value","false"],["type","number","required","",1,"form-control",3,"id","ngModel","placeholder","ngModelChange"],["ngbDatepicker","","required","",1,"form-control",3,"id","name","placeholder","ngModel","ngModelChange","focus"],["datePicker","ngbDatepicker"]],template:function(e,t){1&e&&(c.Gc(0,H,1,4,"input",0),c.Gc(1,J,7,3,"select",1),c.Gc(2,Q,1,3,"input",2),c.Gc(3,$,2,4,"input",3)),2&e&&(c.oc("ngIf","String"===t.modelType||void 0===t.modelType),c.Bb(1),c.oc("ngIf","Boolean"===t.modelType),c.Bb(1),c.oc("ngIf","Int"===t.modelType),c.Bb(1),c.oc("ngIf","DateTime"===t.modelType))},directives:[n.m,r.b,r.u,r.m,r.p,r.v,r.q,r.x,r.r,a.h],encapsulation:2}),Y);function Z(e,t){1&e&&(c.Ub(0,"div",28),c.Ic(1," Field 'Password' is required. "),c.Tb())}var X=function(e){return{"was-validated":e}};function ee(e,t){if(1&e){var i=c.Vb();c.Ub(0,"form",14,15),c.gc("ngSubmit",(function(){c.zc(i);var e=c.xc(1),t=c.ic(2);return e.form.valid&&t.resetPassword()})),c.Pb(2,"app-validation-summary",16,17),c.Ub(4,"div",18),c.Ub(5,"label",19),c.Ic(6,"Password (*)"),c.Tb(),c.Ub(7,"input",20,21),c.gc("ngModelChange",(function(e){return c.zc(i),c.ic(2).newPassword=e})),c.Tb(),c.Gc(9,Z,2,0,"div",22),c.Tb(),c.Ub(10,"div",18),c.Ub(11,"div",23),c.Ub(12,"input",24,25),c.gc("ngModelChange",(function(e){return c.zc(i),c.ic(2).changePasswordAfterFirstSignIn=e})),c.Tb(),c.Ub(14,"label",26),c.Ic(15," Require this user to change their password when they first sign in "),c.Tb(),c.Tb(),c.Tb(),c.Ub(16,"button",27),c.Ic(17," Reset "),c.Tb(),c.Tb()}if(2&e){var n=c.xc(1),r=c.xc(8),a=c.ic(2);c.oc("ngClass",c.sc(5,X,n.submitted)),c.Bb(2),c.oc("problemDetails",a.problemDetails),c.Bb(5),c.oc("ngModel",a.newPassword),c.Bb(2),c.oc("ngIf",n.submitted&&r.invalid),c.Bb(3),c.oc("ngModel",a.changePasswordAfterFirstSignIn)}}function te(e,t){if(1&e&&(c.Ub(0,"div",9),c.Ub(1,"h4",10),c.Ic(2," Reset Password "),c.Tb(),c.Ub(3,"button",11),c.gc("click",(function(){return t.$implicit.dismiss()})),c.Ub(4,"span",12),c.Ic(5,"\xd7"),c.Tb(),c.Tb(),c.Tb(),c.Ub(6,"div",13),c.Gc(7,ee,18,7,"form",8),c.Tb()),2&e){var i=c.ic();c.Bb(7),c.oc("ngIf",i.user)}}function ie(e,t){1&e&&(c.Ub(0,"p"),c.Ic(1,"Loading user data..."),c.Tb())}function ne(e,t){if(1&e){var i=c.Vb();c.Ub(0,"div",68),c.Ub(1,"b",69),c.Ic(2),c.jc(3,"date"),c.Tb(),c.Ub(4,"button",70),c.gc("click",(function(){return c.zc(i),c.ic(2),c.xc(3).fire()})),c.Ic(5," Unlock "),c.Tb(),c.Tb()}if(2&e){var n=c.ic(2);c.Bb(2),c.Lc(" User is locked until ",c.lc(3,2,n.user.lockoutEnd,"medium")," after ",n.user.accessFailedCount," failed logins. ")}}function re(e,t){1&e&&(c.Ub(0,"div",28),c.Ic(1," Field 'Username' is required. "),c.Tb())}function ae(e,t){1&e&&(c.Ub(0,"div",28),c.Ic(1," Field 'Email' is required. "),c.Tb())}function se(e,t){1&e&&(c.Ub(0,"div",28),c.Ic(1," Please enter a valid email address. "),c.Tb())}function oe(e,t){if(1&e&&(c.Ub(0,"div",28),c.Ic(1),c.Tb()),2&e){var i=c.ic().$implicit;c.Bb(1),c.Kc(" Field '",i.displayName||i.name,"' is required. ")}}function ce(e,t){1&e&&(c.Ub(0,"div",28),c.Ic(1," Pattern not correct. "),c.Tb())}function le(e,t){if(1&e){var i=c.Vb();c.Ub(0,"div",31),c.Ub(1,"label",71),c.Ic(2),c.Tb(),c.Ub(3,"div",33),c.Ub(4,"app-dynamic-input",72,73),c.gc("ngModelChange",(function(e){c.zc(i);var n=t.index;return c.ic(2).requiredClaims[n].value=e})),c.Tb(),c.Gc(6,oe,2,1,"div",22),c.Gc(7,ce,2,0,"div",22),c.Tb(),c.Tb()}if(2&e){var n=t.$implicit,r=t.index,a=c.xc(5);c.ic();var s=c.xc(1),o=c.ic();c.Bb(1),c.oc("for","user-"+n.name),c.Bb(1),c.Kc("",n.displayName||n.name," (*)"),c.Bb(2),c.oc("id","user-"+n.name)("name","user-"+n.name)("pattern",n.rule)("ngModel",o.requiredClaims[r].value)("modelType",n.valueType),c.Bb(2),c.oc("ngIf",s.submitted&&a.invalid&&a.errors.required),c.Bb(1),c.oc("ngIf",s.submitted&&a.invalid&&a.errors.pattern)}}function ue(e,t){if(1&e){var i=c.Vb();c.Ub(0,"form",14,29),c.gc("ngSubmit",(function(){c.zc(i);var e=c.xc(1),t=c.ic();return e.form.valid&&t.update()})),c.Gc(2,ne,6,5,"div",30),c.Ub(3,"div",31),c.Ub(4,"label",32),c.Ic(5," Username (*) "),c.Tb(),c.Ub(6,"div",33),c.Ub(7,"input",34,35),c.gc("ngModelChange",(function(e){return c.zc(i),c.ic().user.userName=e})),c.Tb(),c.Gc(9,re,2,0,"div",22),c.Tb(),c.Tb(),c.Ub(10,"div",31),c.Ub(11,"label",36),c.Ic(12," Email (*) "),c.Tb(),c.Ub(13,"div",33),c.Ub(14,"input",37,38),c.gc("ngModelChange",(function(e){return c.zc(i),c.ic().user.email=e})),c.Tb(),c.Gc(16,ae,2,0,"div",22),c.Gc(17,se,2,0,"div",22),c.Tb(),c.Tb(),c.Ub(18,"div",31),c.Ub(19,"label",39),c.Ic(20," Email Confirmed "),c.Tb(),c.Ub(21,"div",33),c.Ub(22,"div",23),c.Ub(23,"input",40,41),c.gc("ngModelChange",(function(e){return c.zc(i),c.ic().user.emailConfirmed=e})),c.Tb(),c.Pb(25,"label",42),c.Tb(),c.Tb(),c.Tb(),c.Ub(26,"div",31),c.Ub(27,"label",43),c.Ic(28," Create Date "),c.Tb(),c.Ub(29,"div",44),c.Ub(30,"span",45),c.Ic(31),c.jc(32,"date"),c.Tb(),c.Tb(),c.Tb(),c.Ub(33,"div",31),c.Ub(34,"label",46),c.Ic(35," Phone Number "),c.Tb(),c.Ub(36,"div",33),c.Ub(37,"input",47),c.gc("ngModelChange",(function(e){return c.zc(i),c.ic().user.phoneNumber=e})),c.Tb(),c.Tb(),c.Tb(),c.Ub(38,"div",31),c.Ub(39,"label",48),c.Ic(40," Phone Number Confirmed "),c.Tb(),c.Ub(41,"div",33),c.Ub(42,"div",23),c.Ub(43,"input",49,50),c.gc("ngModelChange",(function(e){return c.zc(i),c.ic().user.phoneNumberConfirmed=e})),c.Tb(),c.Pb(45,"label",51),c.Tb(),c.Tb(),c.Tb(),c.Ub(46,"div",31),c.Ub(47,"label",52),c.Ic(48," Password Expires "),c.Tb(),c.Ub(49,"div",33),c.Ub(50,"select",53,54),c.gc("ngModelChange",(function(e){return c.zc(i),c.ic().userPasswordExpirationPolicy=e})),c.Ub(52,"option",55),c.Ic(53,"Please select a password expiration policy"),c.Tb(),c.Ub(54,"option",56),c.Ic(55,"Never"),c.Tb(),c.Ub(56,"option",57),c.Ic(57,"In next login"),c.Tb(),c.Ub(58,"option",58),c.Ic(59,"Monthly"),c.Tb(),c.Ub(60,"option",59),c.Ic(61,"Quarterly"),c.Tb(),c.Ub(62,"option",60),c.Ic(63,"Semesterly"),c.Tb(),c.Ub(64,"option",61),c.Ic(65,"Annually"),c.Tb(),c.Ub(66,"option",62),c.Ic(67,"Biannually"),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Gc(68,le,8,9,"div",63),c.Ub(69,"div",18),c.Ub(70,"div"),c.Ub(71,"button",64),c.Ub(72,"i",65),c.Ic(73,"save"),c.Tb(),c.Ic(74," Save Changes "),c.Tb(),c.Ub(75,"button",66),c.gc("click",(function(){return c.zc(i),c.ic(),c.xc(1).fire()})),c.Ub(76,"i",65),c.Ic(77,"delete"),c.Tb(),c.Ic(78," Delete "),c.Tb(),c.Ub(79,"button",67),c.gc("click",(function(){return c.zc(i),c.ic(),c.xc(5).fire()})),c.Ub(80,"i",65),c.Ic(81),c.Tb(),c.Ic(82),c.Tb(),c.Ub(83,"button",67),c.gc("click",(function(){c.zc(i);var e=c.ic(),t=c.xc(7);return e.showResetPassword(t)})),c.Ub(84,"i",65),c.Ic(85,"vpn_key"),c.Tb(),c.Ic(86," Reset Password "),c.Tb(),c.Tb(),c.Tb(),c.Tb()}if(2&e){var n=c.xc(1),r=c.xc(8),a=c.xc(15),s=c.ic();c.oc("ngClass",c.sc(21,X,n.submitted)),c.Bb(2),c.oc("ngIf",s.user.accessFailedCount>0&&s.user.lockoutEnd),c.Bb(5),c.oc("ngModel",s.user.userName),c.Bb(2),c.oc("ngIf",n.submitted&&r.invalid),c.Bb(5),c.oc("ngModel",s.user.email),c.Bb(2),c.oc("ngIf",n.submitted&&a.invalid&&a.errors.required),c.Bb(1),c.oc("ngIf",n.submitted&&a.invalid&&a.errors.email),c.Bb(6),c.oc("ngModel",s.user.emailConfirmed),c.Bb(8),c.Kc(" ",c.lc(32,18,s.user.createDate,"medium")," "),c.Bb(6),c.oc("ngModel",s.user.phoneNumber),c.Bb(6),c.oc("ngModel",s.user.phoneNumberConfirmed),c.Bb(7),c.oc("ngModel",s.userPasswordExpirationPolicy),c.Bb(18),c.oc("ngForOf",s.requiredClaims),c.Bb(7),c.oc("disabled",s.currentUserId===s.user.id),c.Bb(4),c.oc("disabled",s.currentUserId===s.user.id),c.Bb(2),c.Jc(s.user.blocked?"lock_open":"lock"),c.Bb(1),c.Kc(" ",s.user.blocked?"Unblock":"Block"," "),c.Bb(1),c.oc("disabled",s.currentUserId===s.user.id)}}var be,de=((be=function(){function e(t,i,n,r,a,s,o,c){_classCallCheck(this,e),this._route=t,this._userStore=i,this._dateParser=n,this._toast=r,this._router=a,this._authService=s,this._modalService=o,this.swalTargets=c,this.userPasswordExpirationPolicy="",this.newPassword="",this.changePasswordAfterFirstSignIn=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.currentUserId=this._authService.getSubjectId();var t=this._userStore.getUser(this._route.parent.snapshot.params.id),i=this._userStore.getAllClaims();this._getDataSubscription=Object(j.a)([t,i]).pipe(Object(R.a)((function(e){return{user:e[0],claims:e[1]}}))).subscribe((function(t){e.user=t.user,e.userPasswordExpirationPolicy=e.user.passwordExpirationPolicy?e.user.passwordExpirationPolicy:"";var i=t.claims.filter((function(e){return!0===e.required}));i.forEach((function(t){var i=e.user.claims.find((function(e){return e.type===t.name}));i&&(t.value=t.valueType===l.x.DateTime?e._dateParser.parse(i.value):i.value)})),e.requiredClaims=i}))}},{key:"ngOnDestroy",value:function(){this._getDataSubscription&&this._getDataSubscription.unsubscribe(),this._updateUserSubscription&&this._updateUserSubscription.unsubscribe(),this._routeDataSubscription&&this._routeDataSubscription.unsubscribe()}},{key:"delete",value:function(){var e=this;this._userStore.deleteUser(this.user.id).subscribe((function(t){e._toast.showSuccess("User '".concat(e.user.userName,"' was deleted successfully.")),e._router.navigate(["../../"],{relativeTo:e._route})}))}},{key:"unlock",value:function(){var e=this;this._userStore.unlockUser(this.user.id).subscribe((function(t){e._toast.showSuccess("User '".concat(e.user.userName,"' was unlocked."))}))}},{key:"toggleBlock",value:function(){var e=this;this.user.blocked?this._userStore.unblockUser(this.user.id).subscribe((function(t){e._toast.showSuccess("User '".concat(e.user.userName,"' was unblocked."))})):this._userStore.blockUser(this.user.id).subscribe((function(t){e._toast.showSuccess("User '".concat(e.user.userName,"' was blocked."))}))}},{key:"showResetPassword",value:function(e){this._modalService.open(e)}},{key:"resetPassword",value:function(){var e=this;this._userStore.resetPassword(this.user.id,this.newPassword,this.changePasswordAfterFirstSignIn).subscribe((function(t){e.userPasswordExpirationPolicy=e.user.passwordExpirationPolicy?e.user.passwordExpirationPolicy:"",e._toast.showSuccess("Password for user '".concat(e.user.userName,"' was reset successfully."))}),(function(t){e.problemDetails=t}))}},{key:"update",value:function(){var e=this,t=this.requiredClaims.map((function(e){return Object.assign({},e)}));t.forEach((function(t){t.valueType===l.x.DateTime&&(t.value=e._dateParser.format(t.value))})),this.user.passwordExpirationPolicy=""===this.userPasswordExpirationPolicy?void 0:this.userPasswordExpirationPolicy,this._updateUserSubscription=this._userStore.updateUser(this.user,t).subscribe((function(t){e._toast.showSuccess("User '".concat(e.user.email,"' was updated successfully."))}))}}]),e}()).\u0275fac=function(e){return new(e||be)(c.Ob(o.a),c.Ob(z),c.Ob(V.a),c.Ob(y.a),c.Ob(o.d),c.Ob(K.a),c.Ob(a.i),c.Ob(s.b))},be.\u0275cmp=c.Ib({type:be,selectors:[["app-user-details"]],features:[c.Ab([V.a])],decls:10,vars:7,consts:[["title","Delete?","text","User will be deleted permanently. This action cannot be reversed.","type","warning",3,"showCancelButton","confirm"],["deleteAlert",""],["title","Unlock?","text","User will be unlocked permanently. This action cannot be reversed.","type","warning",3,"showCancelButton","confirm"],["unlockAlert",""],["type","warning",3,"title","text","showCancelButton","confirm"],["blockAlert",""],["content",""],[4,"ngIf"],["class","needs-validation","novalidate","",3,"ngClass","ngSubmit",4,"ngIf"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["novalidate","",1,"needs-validation",3,"ngClass","ngSubmit"],["userPasswordform","ngForm"],[3,"problemDetails"],["validationSummary",""],[1,"form-group"],["for","user-new-password"],["type","password","id","user-new-password","name","user-new-password","required","",1,"form-control",3,"ngModel","ngModelChange"],["userNewPassword","ngModel"],["class","form-control-feedback text-danger",4,"ngIf"],[1,"form-check","col-form-label","custom-control","custom-checkbox"],["type","checkbox","id","change-password-after-first-sign-in-check","name","change-password-after-first-sign-in-check",1,"form-check-input","custom-control-input",3,"ngModel","ngModelChange"],["changePasswordAfterFirstSignInCheck","ngModel"],["for","change-password-after-first-sign-in-check",1,"custom-control-label"],["type","submit",1,"btn","btn-primary"],[1,"form-control-feedback","text-danger"],["form","ngForm"],["class","alert alert-warning d-flex align-items-center justify-content-between","role","alert",4,"ngIf"],[1,"form-group","row"],["for","user-name",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["type","text","id","user-name","name","user-name","maxlength","256","required","",1,"form-control",3,"ngModel","ngModelChange"],["userName","ngModel"],["for","user-email",1,"col-sm-2","col-form-label"],["type","text","id","user-email","name","user-email","maxlength","256","required","","email","",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],["for","user-email-confirmed",1,"col-sm-2","col-form-label"],["type","checkbox","id","user-email-confirmed","name","user-email-confirmed",1,"form-check-input","custom-control-input",3,"ngModel","ngModelChange"],["emailConfirmed","ngModel"],["for","user-email-confirmed",1,"custom-control-label"],["for","user-create-date",1,"col-sm-2","col-form-label"],[1,"col-sm-10","col-form-label"],["id","user-create-date","name","user-create-date",1,"col-form-label"],["for","user-phone-number",1,"col-sm-2","col-form-label"],["type","tel","id","user-phone-number","name","user-phone-number",1,"form-control",3,"ngModel","ngModelChange"],["for","user-phone-number-confirmed",1,"col-sm-2","col-form-label"],["type","checkbox","id","user-phone-number-confirmed","name","user-phone-number-confirmed",1,"form-check-input","custom-control-input",3,"ngModel","ngModelChange"],["phoneNumberConfirmed","ngModel"],["for","user-phone-number-confirmed",1,"custom-control-label"],["for","resource-type",1,"col-sm-2","col-form-label"],["id","user-password-expiration-policy","name","user-password-expiration-policy",1,"form-control","custom-select",3,"ngModel","ngModelChange"],["passwordExpirationPolicy","ngModel"],["value",""],["value","Never"],["value","NextLogin"],["value","Monthly"],["value","Quarterly"],["value","Semesterly"],["value","Annually"],["value","Biannually"],["class","form-group row",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary","m-r-5"],[1,"material-icons","align-middle"],["type","button",1,"btn","btn-danger","m-r-5","float-right",3,"disabled","click"],["type","button",1,"btn","btn-secondary","m-r-5","float-right",3,"disabled","click"],["role","alert",1,"alert","alert-warning","d-flex","align-items-center","justify-content-between"],[1,"flex-fill"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"col-sm-2","col-form-label",3,"for"],["required","",3,"id","name","pattern","ngModel","modelType","ngModelChange"],["input","ngModel"]],template:function(e,t){1&e&&(c.Ub(0,"swal",0,1),c.gc("confirm",(function(){return t.delete()})),c.Tb(),c.Ub(2,"swal",2,3),c.gc("confirm",(function(){return t.unlock()})),c.Tb(),c.Ub(4,"swal",4,5),c.gc("confirm",(function(){return t.toggleBlock()})),c.Tb(),c.Gc(6,te,8,1,"ng-template",null,6,c.Hc),c.Gc(8,ie,2,0,"p",7),c.Gc(9,ue,87,23,"form",8)),2&e&&(c.oc("showCancelButton",!0),c.Bb(2),c.oc("showCancelButton",!0),c.Bb(2),c.oc("title",null!=t.user&&t.user.blocked?"Unblock?":"Block?")("text",null!=t.user&&t.user.blocked?"User will be unblocked. You can revert this action later.":"User will be blocked. You can revert this action later.")("showCancelButton",!0),c.Bb(4),c.oc("ngIf",!t.user),c.Bb(1),c.oc("ngIf",t.user))},directives:[s.a,n.m,r.y,r.n,r.o,n.k,_.a,r.b,r.u,r.m,r.p,r.a,r.j,r.c,r.v,r.q,r.x,n.l,W,r.s],pipes:[n.e],encapsulation:2}),be),me=i("8xOu");function pe(e,t){1&e&&(c.Ub(0,"p"),c.Ic(1,"Loading user roles..."),c.Tb())}var fe=function(){return{sourceListTitle:"Available Roles",emptySourceListMessage:"There are no available roles to assign.",destinationListTitle:"Assigned Roles",emptyDestinationListMessage:"There are no roles assigned to this user."}};function ge(e,t){if(1&e){var i=c.Vb();c.Ub(0,"app-transfer-lists",3,4),c.gc("itemAdded",(function(e){return c.zc(i),c.ic().addRole(e)}))("itemRemoved",(function(e){return c.zc(i),c.ic().removeRole(e)})),c.Tb()}if(2&e){var n=c.ic();c.oc("source",n.availableRoles)("destination",n.userRoles)("titlePropertyName","name")("subtitlePropertyName","description")("options",c.rc(5,fe))}}var he=["form"],ve=["actionsTemplate"];function Ue(e,t){if(1&e&&(c.Ub(0,"option",20),c.Ic(1),c.Tb()),2&e){var i=t.$implicit;c.oc("value",i.name),c.Bb(1),c.Kc(" ",i.name," ")}}function Te(e,t){1&e&&(c.Ub(0,"div",21),c.Ic(1," Please select a claim. "),c.Tb())}function ye(e,t){1&e&&(c.Ub(0,"div",21),c.Ic(1," Please provide a value. "),c.Tb())}function _e(e,t){1&e&&(c.Ub(0,"a",22),c.Ic(1,"Edit"),c.Tb()),2&e&&c.oc("routerLink",t.value+"/edit")}var Ce=function(e){return{"was-validated":e}};function we(e,t){if(1&e&&(c.Ub(0,"div",24),c.Ic(1),c.Tb()),2&e){var i=c.ic(2);c.Bb(1),c.Kc(" Field '",i.claim.displayName||i.claim.name,"' is required. ")}}function Ie(e,t){1&e&&(c.Ub(0,"div",24),c.Ic(1," Pattern not correct. "),c.Tb())}var ke=function(e){return{"was-validated":e}};function Se(e,t){if(1&e){var i=c.Vb();c.Ub(0,"form",9,10),c.gc("ngSubmit",(function(){c.zc(i);var e=c.xc(1),t=c.ic();return e.form.valid&&t.update()})),c.Ub(2,"div",11),c.Ub(3,"label",12),c.Ub(4,"i",13),c.Ic(5," info "),c.Tb(),c.Ic(6," Type "),c.Tb(),c.Ub(7,"div",14),c.Ub(8,"span",15),c.Ic(9),c.Tb(),c.Tb(),c.Tb(),c.Ub(10,"div",11),c.Ub(11,"label",16),c.Ic(12,"Value (*)"),c.Tb(),c.Ub(13,"div",17),c.Ub(14,"app-dynamic-input",18,19),c.gc("ngModelChange",(function(e){return c.zc(i),c.ic().claim.value=e})),c.Tb(),c.Gc(16,we,2,1,"div",20),c.Gc(17,Ie,2,0,"div",20),c.Tb(),c.Tb(),c.Ub(18,"div",21),c.Ub(19,"div"),c.Ub(20,"button",22),c.Ic(21," Save Changes "),c.Tb(),c.Ub(22,"button",23),c.gc("click",(function(){return c.zc(i),c.ic(),c.xc(1).fire()})),c.Ic(23," Delete "),c.Tb(),c.Tb(),c.Tb(),c.Tb()}if(2&e){var n=c.xc(1),r=c.xc(15),a=c.ic();c.oc("ngClass",c.sc(10,ke,n.submitted)),c.Bb(4),c.oc("title",a.claim.description),c.Bb(5),c.Kc(" ",a.claim.name," "),c.Bb(5),c.oc("id","claim-value")("name","claim-value")("pattern",a.claim.rule)("modelType",a.claim.valueType)("ngModel",a.claim.value),c.Bb(2),c.oc("ngIf",n.submitted&&r.invalid&&r.errors.required),c.Bb(1),c.oc("ngIf",n.submitted&&r.invalid&&r.errors.pattern)}}var xe=["actionsTemplate"];function Me(e,t){if(1&e&&(c.Ub(0,"h6",16),c.Ub(1,"span",17),c.Ic(2),c.Tb(),c.Tb()),2&e){var i=t.$implicit;c.Bb(2),c.Jc(i)}}function Pe(e,t){if(1&e&&(c.Ub(0,"div",6),c.Ub(1,"h4",7),c.Ic(2),c.Tb(),c.Ub(3,"button",8),c.gc("click",(function(){return t.$implicit.dismiss()})),c.Ub(4,"span",9),c.Ic(5,"\xd7"),c.Tb(),c.Tb(),c.Tb(),c.Ub(6,"div",10),c.Ub(7,"div",11),c.Ub(8,"table",12),c.Ub(9,"tbody"),c.Ub(10,"tr"),c.Ub(11,"th",13),c.Ic(12,"Id"),c.Tb(),c.Ub(13,"td"),c.Ic(14),c.Tb(),c.Tb(),c.Ub(15,"tr"),c.Ub(16,"th",13),c.Ic(17,"Description"),c.Tb(),c.Ub(18,"td"),c.Ic(19),c.Tb(),c.Tb(),c.Ub(20,"tr"),c.Ub(21,"th",13),c.Ic(22,"URL"),c.Tb(),c.Ub(23,"td"),c.Ic(24),c.Tb(),c.Tb(),c.Ub(25,"tr"),c.Ub(26,"th",13),c.Ic(27,"Created"),c.Tb(),c.Ub(28,"td"),c.Ic(29),c.jc(30,"date"),c.Tb(),c.Tb(),c.Ub(31,"tr"),c.Ub(32,"th",13),c.Ic(33,"Expires"),c.Tb(),c.Ub(34,"td"),c.Ic(35),c.jc(36,"date"),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Pb(37,"hr"),c.Ub(38,"p",14),c.Ic(39,"Resources & scopes accessible by client:"),c.Tb(),c.Gc(40,Me,3,1,"h6",15),c.Tb(),c.Tb()),2&e){var i=c.ic();c.Bb(2),c.Kc(" ",null==i.selectedUserClient?null:i.selectedUserClient.clientName," "),c.Bb(12),c.Jc(null==i.selectedUserClient?null:i.selectedUserClient.clientId),c.Bb(5),c.Jc(null==i.selectedUserClient?null:i.selectedUserClient.description),c.Bb(5),c.Jc(null==i.selectedUserClient?null:i.selectedUserClient.clientUri),c.Bb(5),c.Jc(c.lc(30,7,null==i.selectedUserClient?null:i.selectedUserClient.createdAt,"medium")),c.Bb(6),c.Kc("",null!=i.selectedUserClient&&i.selectedUserClient.expiresAt?c.lc(36,10,null==i.selectedUserClient?null:i.selectedUserClient.expiresAt,"medium"):"Never"," "),c.Bb(5),c.oc("ngForOf",null==i.selectedUserClient?null:i.selectedUserClient.scopes)}}function Ae(e,t){if(1&e){var i=c.Vb();c.Ub(0,"button",18),c.gc("click",(function(){c.zc(i);var e=t.row,n=c.ic(),r=c.xc(1);return n.showDetails(e,r)})),c.Ic(1," Details "),c.Tb()}}var Be,Oe,Ne,Re,ze,De,Fe=[{path:"",component:T},{path:"add",component:O},{path:":id",component:G,children:[{path:"",redirectTo:"details",pathMatch:"full"},{path:"details",component:de},{path:"roles",component:(Re=function(){function e(t,i,n,r){_classCallCheck(this,e),this._route=t,this._userStore=i,this._toast=n,this._authService=r,this.user=new l.r}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this,t=this._route.parent.snapshot.params.id;this.currentUserId=this._authService.getSubjectId();var i=this._userStore.getUser(t),n=this._userStore.getAllRoles();this._getDataSubscription=Object(j.a)([i,n]).pipe(Object(R.a)((function(e){return{user:e[0],roles:e[1]}}))).subscribe((function(t){e.user=t.user;var i=t.user.roles,n=t.roles;e.availableRoles=n.filter((function(e){return!i.includes(e.name)})),e.userRoles=n.filter((function(e){return i.includes(e.name)}))}))}},{key:"ngOnDestroy",value:function(){this._getDataSubscription&&this._getDataSubscription.unsubscribe(),this._addUserRoleSubscription&&this._addUserRoleSubscription.unsubscribe(),this._removeUserRoleSubscription&&this._removeUserRoleSubscription.unsubscribe()}},{key:"addRole",value:function(e){var t=this;this._addUserRoleSubscription=this._userStore.addUserRole(this.user.id,e).subscribe((function(i){t._toast.showSuccess("Role '".concat(e.name,"' was successfully added to user '").concat(t.user.email,"'."))}))}},{key:"removeRole",value:function(e){var t=this;this._removeUserRoleSubscription=this._userStore.deleteUserRole(this.user.id,e).subscribe((function(i){t._toast.showSuccess("Role '".concat(e.name,"' was successfully removed from user '").concat(t.user.email,"'."))}))}},{key:"toggleAdmin",value:function(){var e=this;this.user.isAdmin=!this.user.isAdmin,this._userStore.updateUser(this.user,null).subscribe((function(t){e._toast.showSuccess("User '".concat(e.user.email,"' was updated successfully."))}))}}]),e}(),Re.\u0275fac=function(e){return new(e||Re)(c.Ob(o.a),c.Ob(z),c.Ob(y.a),c.Ob(K.a))},Re.\u0275cmp=c.Ib({type:Re,selectors:[["app-user-roles"]],decls:6,vars:4,consts:[[4,"ngIf"],[3,"source","destination","titlePropertyName","subtitlePropertyName","options","itemAdded","itemRemoved",4,"ngIf"],["type","button",1,"btn","btn-secondary","m-r-5","float-right",3,"disabled","click"],[3,"source","destination","titlePropertyName","subtitlePropertyName","options","itemAdded","itemRemoved"],["transferList",""]],template:function(e,t){1&e&&(c.Gc(0,pe,2,0,"p",0),c.Gc(1,ge,2,6,"app-transfer-lists",1),c.Pb(2,"hr"),c.Ub(3,"div"),c.Ub(4,"button",2),c.gc("click",(function(){return t.toggleAdmin()})),c.Ic(5),c.Tb(),c.Tb()),2&e&&(c.oc("ngIf",!t.availableRoles),c.Bb(1),c.oc("ngIf",t.availableRoles),c.Bb(3),c.oc("disabled",t.currentUserId===t.user.id),c.Bb(1),c.Kc(" ",t.user.isAdmin?"Remove from admins":"Mark as admin"," "))},directives:[n.m,me.a],encapsulation:2}),Re)},{path:"additional-details",component:(Ne=function(){function e(t,i,n,r){_classCallCheck(this,e),this._userStore=t,this._route=i,this._dateParser=n,this._toast=r,this.selectedClaimName="",this.selectedClaimValue="",this.selectedClaimRule="",this.selectedClaimValueType=l.x.String,this.columns=[],this.rows=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.columns=[{prop:"type",name:"Type",draggable:!1,canAutoResize:!0,sortable:!0,resizeable:!1},{prop:"value",name:"Value",draggable:!1,canAutoResize:!0,sortable:!0,resizeable:!1},{prop:"id",name:"Actions",draggable:!1,canAutoResize:!0,sortable:!1,resizeable:!1,cellTemplate:this._actionsTemplate,cellClass:"d-flex align-items-center"}];var t=this._userStore.getUser(this._route.parent.snapshot.params.id),i=this._userStore.getAllClaims();this._getDataSubscription=Object(j.a)([t,i]).pipe(Object(R.a)((function(e){return{user:e[0],claims:e[1]}}))).subscribe((function(t){e._user=t.user,e.rows=e._user.claims,e.claims=t.claims.filter((function(e){return!1===e.required}))}))}},{key:"ngOnDestroy",value:function(){this._getDataSubscription&&this._getDataSubscription.unsubscribe()}},{key:"claimSelected",value:function(e){var t=this;this.selectedClaimName=e;var i=this.claims.find((function(e){return e.name===t.selectedClaimName}));i&&(this.selectedClaimRule=i.rule,this.selectedClaimValueType=i.valueType)}},{key:"addClaim",value:function(){var e=this;this._userStore.addClaim(this._user.id,{type:this.selectedClaimName,value:this.selectedClaimValueType===l.x.DateTime?this._dateParser.format(this.selectedClaimValue):this.selectedClaimValue}).subscribe((function(t){e._toast.showSuccess("Claim '".concat(e.selectedClaimName,"' was successfully added to user ").concat(e._user.email,".")),e._form.resetForm({"claims-select":"","claim-value":""}),e.rows=_toConsumableArray(e.rows)}))}}]),e}(),Ne.\u0275fac=function(e){return new(e||Ne)(c.Ob(z),c.Ob(o.a),c.Ob(V.a),c.Ob(y.a))},Ne.\u0275cmp=c.Ib({type:Ne,selectors:[["app-user-additional-details"]],viewQuery:function(e,t){var i;1&e&&(c.Nc(he,!0),c.Ec(ve,!0)),2&e&&(c.wc(i=c.hc())&&(t._form=i.first),c.wc(i=c.hc())&&(t._actionsTemplate=i.first))},features:[c.Ab([V.a])],decls:27,vars:18,consts:[["novalidate","",1,"needs-validation",3,"ngClass","ngSubmit"],["form","ngForm"],[1,"form-row"],[1,"col"],["for","claims-select",1,"sr-only"],["id","claims-select","name","claims-select","required","",1,"form-control","custom-select",3,"ngModel","ngModelChange"],["claim","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","form-control-feedback text-danger",4,"ngIf"],["for","claim-value",1,"sr-only"],["id","claim-value","name","claim-value","required","",3,"pattern","ngModel","modelType","placeholder","ngModelChange"],["value","ngModel"],[1,"col-md-1","text-right"],["type","submit",1,"btn","btn-primary","waves-effect","waves-light","m-r-5"],[1,"row","mt-3"],[1,"col-12"],[3,"clientSide","rowsPerPage","canFilter","columns","rows","defaultSortField","defaultSortDirection"],["userClaimsList",""],["actionsTemplate",""],[3,"value"],[1,"form-control-feedback","text-danger"],["href","#","role","button",1,"btn","btn-success",3,"routerLink"]],template:function(e,t){if(1&e){var i=c.Vb();c.Ub(0,"form",0,1),c.gc("ngSubmit",(function(){return c.zc(i),c.xc(1).form.valid&&t.addClaim()})),c.Ub(2,"div",2),c.Ub(3,"div",3),c.Ub(4,"label",4),c.Ic(5," Claim "),c.Tb(),c.Ub(6,"select",5,6),c.gc("ngModelChange",(function(e){return t.claimSelected(e)})),c.Ub(8,"option",7),c.Ic(9," Please select a claim "),c.Tb(),c.Gc(10,Ue,2,2,"option",8),c.Tb(),c.Gc(11,Te,2,0,"div",9),c.Tb(),c.Ub(12,"div",3),c.Ub(13,"label",10),c.Ic(14," Value "),c.Tb(),c.Ub(15,"app-dynamic-input",11,12),c.gc("ngModelChange",(function(e){return t.selectedClaimValue=e})),c.Tb(),c.Gc(17,ye,2,0,"div",9),c.Tb(),c.Ub(18,"div",13),c.Ub(19,"button",14),c.Ic(20," Add "),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(21,"div",15),c.Ub(22,"div",16),c.Pb(23,"app-list-view",17,18),c.Tb(),c.Tb(),c.Gc(25,_e,2,1,"ng-template",null,19,c.Hc)}if(2&e){var n=c.xc(1),r=c.xc(7),a=c.xc(16);c.oc("ngClass",c.sc(16,Ce,n.submitted)),c.Bb(6),c.oc("ngModel",t.selectedClaimName),c.Bb(4),c.oc("ngForOf",t.claims),c.Bb(1),c.oc("ngIf",n.submitted&&r.invalid),c.Bb(4),c.oc("pattern",t.selectedClaimRule)("ngModel",t.selectedClaimValue)("modelType",t.selectedClaimValueType)("placeholder","Please provide a value..."),c.Bb(2),c.oc("ngIf",n.submitted&&a.invalid),c.Bb(6),c.oc("clientSide",!0)("rowsPerPage",10)("canFilter",!1)("columns",t.columns)("rows",t.rows)("defaultSortField","type")("defaultSortDirection","Asc")}},directives:[r.y,r.n,r.o,n.k,r.v,r.u,r.m,r.p,r.q,r.x,n.l,n.m,W,r.s,u.a,o.g],encapsulation:2}),Ne)},{path:"additional-details/:id/edit",component:(Oe=function(){function e(t,i,n,r,a){_classCallCheck(this,e),this._userStore=t,this._router=i,this._route=n,this._dateParser=r,this._toast=a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._userId=this._route.snapshot.parent.params.id,this._claimId=+this._route.snapshot.params.id;var t=this._userStore.getUser(this._userId),i=this._userStore.getAllClaims();this._getDataSubscription=Object(j.a)([t,i]).pipe(Object(R.a)((function(e){return{user:e[0],claims:e[1]}}))).subscribe((function(t){e._userEmail=t.user.email;var i=t.user.claims.find((function(t){return t.id===e._claimId})),n=i&&t.claims.find((function(e){return e.name===i.type}));if(n){var r=n;r.value=r.valueType===l.x.DateTime?e._dateParser.parse(i.value):i.value,e.claim=r}}))}},{key:"ngOnDestroy",value:function(){this._getDataSubscription&&this._getDataSubscription.unsubscribe()}},{key:"delete",value:function(){var e=this;this._userStore.deleteUserClaim(this._userId,this._claimId).subscribe((function(t){e._toast.showSuccess("Claim '".concat(e.claim.name,"' was successfully removed from user '").concat(e._userEmail,"'.")),e._router.navigate(["../../"],{relativeTo:e._route})}))}},{key:"update",value:function(){var e=this,t=this.claim.valueType===l.x.DateTime?this._dateParser.format(this.claim.value):this.claim.value;this._userStore.updateUserClaim(this._userId,this._claimId,t).subscribe((function(t){e._toast.showSuccess("Claim '".concat(e.claim.name,"' was successfully updated."))}))}}]),e}(),Oe.\u0275fac=function(e){return new(e||Oe)(c.Ob(z),c.Ob(o.d),c.Ob(o.a),c.Ob(V.a),c.Ob(y.a))},Oe.\u0275cmp=c.Ib({type:Oe,selectors:[["app-additional-detail-edit"]],features:[c.Ab([V.a])],decls:11,vars:3,consts:[["title","Delete?","type","warning",3,"text","showCancelButton","confirm"],["deleteAlert",""],[1,"row"],[1,"col-12"],[1,"card","m-b-30"],[1,"card-body"],[1,"mt-0","header-title"],[1,"text-muted","m-b-30","font-14"],["class","needs-validation","novalidate","",3,"ngClass","ngSubmit",4,"ngIf"],["novalidate","",1,"needs-validation",3,"ngClass","ngSubmit"],["form","ngForm"],[1,"form-group","row"],["for","claim-type",1,"col-sm-2","col-form-label"],[1,"material-icons","align-middle",3,"title"],[1,"col-sm-10","col-form-label"],["id","claim-type","name","claim-type",1,"col-form-label"],["for","claim-value",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["required","",3,"id","name","pattern","modelType","ngModel","ngModelChange"],["claimValue","ngModel"],["class","form-control-feedback text-danger",4,"ngIf"],[1,"form-group"],["type","submit",1,"btn","btn-primary","waves-effect","waves-light","m-r-5"],["type","button",1,"btn","btn-danger","waves-effect","m-r-5","float-right",3,"click"],[1,"form-control-feedback","text-danger"]],template:function(e,t){1&e&&(c.Ub(0,"swal",0,1),c.gc("confirm",(function(){return t.delete()})),c.Tb(),c.Ub(2,"div",2),c.Ub(3,"div",3),c.Ub(4,"div",4),c.Ub(5,"div",5),c.Ub(6,"h4",6),c.Ic(7,"Edit Claim"),c.Tb(),c.Ub(8,"p",7),c.Ic(9," Here you can modify a claim of the specified user. "),c.Tb(),c.Gc(10,Se,24,12,"form",8),c.Tb(),c.Tb(),c.Tb(),c.Tb()),2&e&&(c.oc("text","Claim '"+(null==t.claim?null:t.claim.name)+"' will be deleted permanently. This action cannot be reversed.")("showCancelButton",!0),c.Bb(10),c.oc("ngIf",t.claim))},directives:[s.a,n.m,r.y,r.n,r.o,n.k,W,r.u,r.s,r.m,r.p],encapsulation:2}),Oe)},{path:"applications",component:(Be=function(){function e(t,i,n){_classCallCheck(this,e),this._userStore=t,this._route=i,this._modalService=n,this.columns=[],this.rows=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.columns=[{prop:"clientId",name:"App Id",draggable:!1,canAutoResize:!0,sortable:!0,resizeable:!1},{prop:"clientName",name:"App Name",draggable:!1,canAutoResize:!0,sortable:!0,resizeable:!1},{prop:"description",name:"Description",draggable:!1,canAutoResize:!0,sortable:!1,resizeable:!1},{prop:"id",name:"Actions",draggable:!1,canAutoResize:!0,sortable:!1,resizeable:!1,cellTemplate:this._actionsTemplate,cellClass:"d-flex align-items-center"}],this._getDataSubscription=this._userStore.getUserApplications(this._route.parent.snapshot.params.id).subscribe((function(t){e.rows=t}))}},{key:"ngOnDestroy",value:function(){this._getDataSubscription&&this._getDataSubscription.unsubscribe()}},{key:"showDetails",value:function(e,t){this.selectedUserClient=e,this._modalService.open(t)}}]),e}(),Be.\u0275fac=function(e){return new(e||Be)(c.Ob(z),c.Ob(o.a),c.Ob(a.i))},Be.\u0275cmp=c.Ib({type:Be,selectors:[["app-user-applications"]],viewQuery:function(e,t){var i;1&e&&c.Ec(xe,!0),2&e&&c.wc(i=c.hc())&&(t._actionsTemplate=i.first)},decls:8,vars:7,consts:[["content",""],[1,"row","mt-3"],[1,"col-12"],[3,"clientSide","rowsPerPage","canFilter","columns","rows","defaultSortField","defaultSortDirection"],["userApplicationsList",""],["actionsTemplate",""],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"table-responsive"],[1,"table","table-striped","mb-0"],["scope","row"],[1,"text-muted","font-14"],["class","d-inline-block mt-0",4,"ngFor","ngForOf"],[1,"d-inline-block","mt-0"],[1,"badge","badge-warning","mr-1"],[1,"btn","btn-success",3,"click"]],template:function(e,t){1&e&&(c.Gc(0,Pe,41,13,"ng-template",null,0,c.Hc),c.Ub(2,"div",1),c.Ub(3,"div",2),c.Pb(4,"app-list-view",3,4),c.Tb(),c.Tb(),c.Gc(6,Ae,2,0,"ng-template",null,5,c.Hc)),2&e&&(c.Bb(4),c.oc("clientSide",!0)("rowsPerPage",10)("canFilter",!1)("columns",t.columns)("rows",t.rows)("defaultSortField","clientId")("defaultSortDirection","Asc"))},directives:[u.a,n.l],pipes:[n.e],encapsulation:2}),Be)}]}],Le=((ze=function e(){_classCallCheck(this,e)}).\u0275mod=c.Mb({type:ze}),ze.\u0275inj=c.Lb({factory:function(e){return new(e||ze)},imports:[[o.h.forChild(Fe)],o.h]}),ze),Ee=i("PCNd"),qe=((De=function e(){_classCallCheck(this,e)}).\u0275mod=c.Mb({type:De}),De.\u0275inj=c.Lb({factory:function(e){return new(e||De)},imports:[[n.c,r.i,Le,a.f,a.j,Ee.a,s.c]]}),De)}}]);